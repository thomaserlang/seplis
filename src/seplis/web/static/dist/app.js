var exports=webpackJsonpexports([0],[,,,function(e,t,n){"use strict";function r(e){401===e.status&&1009===e.responseJSON.code&&(localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),localStorage.removeItem("accessLevel"),location.href="/sign-in")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.default.param(t.query||"",!0),a=t.method||(t.data?"POST":"GET"),o=t.data,l=t.localRequest||!1;void 0!==o&&"GET"!==a&&(o=JSON.stringify(o)),e.startsWith("http")||l||(e=i.baseUrl+e),n&&(-1===e.indexOf("?")?e+="?"+n:e+="&"+n);var u={Accept:"application/json; charset=utf-8"};if(e.startsWith(i.baseUrl)){var c=localStorage.getItem("access_token");c&&(u.Authorization="Bearer "+c)}return s.default.ajax({url:e,method:a,data:o,contentType:"application/json",headers:u,error:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.apiClientSettings=void 0,t.request=a;var o=n(14),s=function(e){return e&&e.__esModule?e:{default:e}}(o),i=t.apiClientSettings={baseUrl:"",clientId:""}},function(e,t,n){"use strict";function r(){return null!==localStorage.getItem("access_token")}function a(){if(!r())throw location.href="/sign-in","Not authed!";return!0}function o(){return a(),localStorage.getItem("user_id")||0}function s(){return localStorage.getItem("user_level")||null}function i(e,t){return e=e.toString(),e.length<t?i("0"+e,t):e}function l(e,t){switch(e.episode_type){case 1:return"Episode "+t.number;case 2:return"S"+i(t.season,2)+" · E"+i(t.episode,2)+" ("+t.number+")";case 3:return"Airdate: "+t.air_date}}function u(e,t){switch(e.episode_type){case 1:return t.number+": "+t.title;case 2:return"S"+i(t.season,2)+"E"+i(t.episode,2)+": "+t.title;case 3:return t.air_date+": "+t.title}}function c(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function f(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),(t>0?t+":":"")+n+":"+r}function d(e){"string"==typeof e&&(e=new Date(e));var t=Math.abs(e-(new Date).getTime())/1e3,n="",r=Math.floor(t/86400),a=Math.floor((t-86400*r)/3600),o=Math.floor((t-86400*r-3600*a)/60);return r>0&&(n=r+(1==r?" day":" days")),a>0&&(n+=" "+a+(1==a?" hour":" hours")),r<1&&a<1&&(n=o+(1==o?" minute":" minutes")),n.trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.isAuthed=r,t.requireAuthed=a,t.getUserId=o,t.getUserLevel=s,t.pad=i,t.episodeNumber=l,t.episodeTitle=u,t.guid=c,t.secondsToTime=f,t.dateInDays=d},,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(20),p=r(d);n(311);var h={hcenter:f.default.bool},m={hcenter:!1},y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){var e=(0,p.default)({loader:!0,"loader-hcenter":this.props.hcenter});return u.default.createElement("div",{className:e})}}]),t}(u.default.Component);y.propTypes=h,y.defaultProps=m,t.default=y},,,,,,,function(e,t,n){"use strict";var r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=void 0===n?"undefined":o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(s.apply(null,n));else if("object"===r)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=s:"object"===o(n(50))&&n(50)?(r=[],void 0!==(a=function(){return s}.apply(t,r))&&(e.exports=a)):window.classNames=s}()},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(169),p=(r(d),{jqXHR:f.default.object.isRequired,onPageChange:f.default.func}),h=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.parseJqXHR(),n.onPageChange=n.pageChange.bind(n),n}return s(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(this.parseJqXHR(e.jqXHR))}},{key:"pageChange",value:function(e){this.state.page=e.target.value,void 0!=this.props.onPageChange&&this.props.onPageChange(e)}},{key:"parseJqXHR",value:function(e){return{pages:this.props.jqXHR.getResponseHeader("X-Total-Pages"),page:this.props.jqXHR.getResponseHeader("X-Page")}}},{key:"renderOptions",value:function(){for(var e=[],t=1;t<=this.state.pages;t++)e.push(u.default.createElement("option",{key:t,value:t},"Page ",t));return e}},{key:"render",value:function(){return this.state.pages<=1?null:u.default.createElement("select",{className:"form-control col-margin",onChange:this.onPageChange,value:this.state.page},this.renderOptions())}}]),t}(u.default.Component);h.propTypes=p,t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){y.session=e,0!=e.media.length&&s(e.media[0]),y.timerGetCurrentTime=setInterval(function(){y.mediaSession&&"PLAYING"==y.mediaSession.playerState&&u(m.CURRENT_TIME,y.mediaSession.getEstimatedTime())},1e3),e.addMediaListener(s),e.addUpdateListener(o),u(m.IS_CONNECTED,!0)}function o(e){y.session.status!==chrome.cast.SessionStatus.CONNECTED&&(y.session=null,y.mediaSession=null,u(m.IS_CONNECTED,!1))}function s(e){y.mediaSession=e,e.addUpdateListener(i),u(m.CURRENT_TIME,y.mediaSession.getEstimatedTime()),i()}function i(){u(m.PLAYER_STATE,y.mediaSession.playerState)}function l(e){"available"==e?u(m.AVAILABLE,!0):u(m.AVAILABLE,!1)}function u(e,t){var n={field:e,value:t};c("anyChanged",n),c(e,n)}function c(e,t){(y.eventListener[e]||[]).forEach(function(e){try{e(t)}catch(e){console.log(e)}})}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(136),p=n(3),h=n(4),m={ANY_CHANGED:"anyChanged",AVAILABLE:"isAvailable",IS_CONNECTED:"isConnected",PLAYER_STATE:"playerState",CURRENT_TIME:"currentTime"},y=function(){function e(){r(this,e),this.loaded=!1}return f(e,[{key:"load",value:function(t){this.onInit=t,e.initialized?this.initCast(!0):this.loadCastScript()}},{key:"loadCastScript",value:function(){if(e.initList.push(this),!e.loaded){e.loaded=!0,window.__onGCastApiAvailable=function(t){setTimeout(function(){var n=new chrome.cast.SessionRequest(e.appId),r=new chrome.cast.ApiConfig(n,a,l,chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(r,function(){e.initialized=!0;var n=!0,r=!1,a=void 0;try{for(var o,s=e.initList[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.initCast(t)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}})},500)};var t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",document.head.appendChild(t)}}},{key:"initCast",value:function(e){this.loaded=e,e&&this.onInit&&this.onInit(this)}},{key:"requestSession",value:function(){chrome.cast.requestSession(a)}},{key:"isConnected",value:function(){return!!e.session&&"connected"==e.session.status}},{key:"getSession",value:function(){return e.session}},{key:"getMediaSession",value:function(){return e.mediaSession}},{key:"getFriendlyName",value:function(){return e.session.receiver.friendlyName}},{key:"getCurrentTime",value:function(){return e.mediaSession.getEstimatedTime()}},{key:"playOrPause",value:function(t,n){"PLAYING"==e.mediaSession.playerState?this.pause(t,n):this.play(t,n)}},{key:"play",value:function(t,n){e.mediaSession.play(null,t,n)}},{key:"pause",value:function(t,n){e.mediaSession.pause(null,t,n)}},{key:"playEpisode",value:function(t,n,r){var a=this;return new Promise(function(o,i){if(!a.isConnected())return console.log("Not connected to a cast device."),void i();var l="/1/shows/"+t+"/episodes/"+n+"/play-servers";Promise.all([(0,d.getPlayServer)(l),(0,p.request)("/1/progress-token"),(0,p.request)("/1/shows/"+t),(0,p.request)("/1/shows/"+t+"/episodes/"+n),(0,p.request)("/1/shows/"+t+"/episodes/"+n+"/watched"),(0,p.request)("/1/users/"+(0,h.getUserId)()+"/subtitle-lang/shows/"+t)]).then(function(t){r||(r=t[4]?t[4].position:0),a.getSession().sendMessage("urn:x-cast:net.seplis.cast.info",{play:t[0].playServer,metadata:t[0].metadata,token:t[1].token,type:"episode",show:t[2],episode:t[3],startTime:r,apiUrl:seplis.apiClientSettings.baseUrl},function(){},function(e){console.log(e)});var n=t[0].playServer.play_server.url+"/play?play_id="+t[0].playServer.play_id;n+="&session="+(0,h.guid)(),r&&(n+="&start_time="+r),t[5]&&(n+="&subtitle_lang="+(t[5].subtitle_lang||""),n+="&audio_lang="+(t[5].audio_lang||""));var l=new chrome.cast.media.LoadRequest(a._playEpisodeMediaInfo(n,t[2],t[3]));a.getSession().loadMedia(l,function(e){s(e),o(e)},function(e){i(e)},e)})})}},{key:"_playEpisodeMediaInfo",value:function(e,t,n){var r=new chrome.cast.media.MediaInfo(e);return r.metadata=new chrome.cast.media.TvShowMediaMetadata,r.metadata.seriesTitle=t.title,r.metadata.title=n.title,r.metadata.episode=n.episode||n.number,r.metadata.originalAirdate=n.air_date,r.metadata.metadataType=chrome.cast.media.MetadataType.TV_SHOW,r}},{key:"addEventListener",value:function(t,n){t in e.eventListener||(e.eventListener[t]=[]);e.eventListener[t];e.eventListener[t].includes(n)||e.eventListener[t].push(n)}},{key:"removeEventListener",value:function(t,n){var r=e.eventListener[t]||[],a=r.indexOf(n);a>0&&r.splice(a,1)}}]),e}();y.initialized=!1,y.loaded=!1,y.initList=[],y.session=null,y.mediaSession=null,y.eventListener={},y.events=m,y.timerGetCurrentTime=null,y.appId="",t.default=y},,,,,,,,,,function(e,t){(function(t){e.exports=t}).call(t,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(20),p=r(d);n(143);var h={shows:f.default.array.isRequired,mobile_xscroll:f.default.bool},m={mobile_xscroll:!1},y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"renderShow",value:function(e){return u.default.createElement("div",{key:e.id,className:"col-4 col-sm-4 col-md-3 col-lg-2 col-margin"},u.default.createElement("a",{href:"/show/"+e.id},u.default.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})))}},{key:"render",value:function(){var e=this,t=(0,p.default)({row:!0,slider:this.props.mobile_xscroll});return u.default.createElement("div",{className:t},this.props.shows.map(function(t){return e.renderShow(t)}))}}]),t}(u.default.Component);y.propTypes=h,y.defaultProps=m,t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c);n(322);var d=n(285),p=r(d),h={showId:f.default.number.isRequired,episode:f.default.object.isRequired,displaySeason:f.default.bool},m={displaySeason:!0},y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"renderEpisodeNumber",value:function(){return this.props.episode.episode?u.default.createElement("span",null,this.props.displaySeason?"S"+this.props.episode.season+" ":"","Episode ",this.props.episode.episode," ",u.default.createElement("font",{color:"grey"},"(",this.props.episode.number,")")):u.default.createElement("span",null,"Episode ",this.props.episode.number)}},{key:"renderAirDate",value:function(){return this.props.episode.air_date?u.default.createElement("date",{className:"air-date",title:this.props.episode.air_date},this.props.episode.air_date):u.default.createElement("span",null,"Unknown air date.")}},{key:"getPlayUrl",value:function(){return"/show/"+this.props.showId+"/episode/"+this.props.episode.number+"/play"}},{key:"render",value:function(){return u.default.createElement("div",{className:"episode-box-list-item"},u.default.createElement("div",{className:"title",title:this.props.episode.title},this.props.episode.title?this.props.episode.title:"TBA"),u.default.createElement("div",{className:"meta"},this.renderEpisodeNumber(),u.default.createElement("strong",null," · "),this.renderAirDate()),u.default.createElement("div",{className:"button-bar"},u.default.createElement(p.default,{showId:this.props.showId,episodeNumber:this.props.episode.number,watched:this.props.episode.user_watched}),u.default.createElement("div",{className:"float-right"},u.default.createElement("a",{href:this.getPlayUrl(),className:"play-button","data-type":"episode","data-show-id":this.props.showId,"data-episode-number":this.props.episode.number},u.default.createElement("i",{className:"fa fa-play-circle"})))))}}]),t}(u.default.Component);y.propTypes=h,y.defaultProps=m,t.default=y},function(e,t,n){"use strict";function r(e,t,n){var r=new Event(a,{method:e,show_id:t,episode_number:n});document.dispatchEvent(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.trigger_episode_watched_status=r;var a=t.EVENT_EPISODE_WATCHED_STATUS="episode_watched_status"},,,,,,,,,,,,,,function(e,t,n){"use strict";t.decode=t.parse=n(175),t.encode=t.stringify=n(176)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(20),f=r(c),d=n(2),p=r(d);n(314);var h={metadata:p.default.object,onAudioChange:p.default.func,onSubtitleChange:p.default.func,bottom:p.default.bool},m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={show:!1},n.audio=[],n.subtitles=[],n.parseMetadata(),n.onClick=n.click.bind(n),n.onAudioClick=n.audioClick.bind(n),n.onSubtitleClick=n.subtitleClick.bind(n),n.onDocumentClick=n.documentClick.bind(n),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){void 0!=this.icon&&(this.icon.contains(e.target)||this.setState({show:!1}))}},{key:"parseMetadata",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.props.metadata.streams[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if("tags"in o&&"language"in o.tags){var s={language:o.tags.language,title:o.tags.title||o.tags.language,index:o.index};switch(o.codec_type){case"subtitle":this.subtitles.push(s);break;case"audio":this.audio.push(s)}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"click",value:function(e){this.setState({show:!this.state.show})}},{key:"subtitleClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onSubtitleChange&&this.props.onSubtitleChange(e.target.getAttribute("data-data"))}},{key:"audioClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onAudioChange&&this.props.onAudioChange(e.target.getAttribute("data-data"))}},{key:"renderSubtitles",value:function(){var e=this;if(0!=this.subtitles.length)return u.default.createElement("span",null,u.default.createElement("p",{className:"title"},"Subtitles"),u.default.createElement("p",null,u.default.createElement("a",{href:"#",onClick:this.onSubtitleClick,"data-data":""},"None")),this.subtitles.map(function(t){return u.default.createElement("p",{key:t.index},u.default.createElement("a",{href:"#",onClick:e.onSubtitleClick,"data-data":t.language+":"+t.index},t.title))}))}},{key:"renderAudio",value:function(){var e=this;if(!(this.audio.length<=1))return u.default.createElement("span",null,u.default.createElement("p",{className:"title"},"Audio"),this.audio.map(function(t){return u.default.createElement("p",{key:t.index},u.default.createElement("a",{href:"#",onClick:e.onAudioClick,"data-data":t.language+":"+t.index},t.title))}))}},{key:"renderAudioSubtitles",value:function(){var e=this;if(!this.state.show)return null;var t=(0,f.default)({"audio-subtitles":!0,"audio-subtitles-bottom":this.props.bottom});return u.default.createElement("div",{className:t,ref:function(t){return e.audioSubtitlesElem=t}},this.renderSubtitles(),this.renderAudio())}},{key:"render",value:function(){var e=this;return this.audio.length<=1&&0==this.subtitles.length?null:u.default.createElement("span",{ref:function(t){return e.icon=t}},u.default.createElement("span",{className:"fa fa-cc",onClick:this.onClick}),this.renderAudioSubtitles())}}]),t}(u.default.Component);m.propTypes=h,t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(40),f=r(c);n(316);var d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={connected:!1,available:!1},n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.onConnected=this.connected.bind(this),this.onDeviceAvailable=this.deviceAvailable.bind(this),this.cast=new f.default,this.cast.load(this.onCastInit.bind(this)),this.iconClick=this.castIconClick.bind(this)}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("isConnected",this.onConnected)}},{key:"onCastInit",value:function(){this.cast.addEventListener("isConnected",this.onConnected),this.cast.addEventListener("isAvailable",this.onDeviceAvailable)}},{key:"deviceAvailable",value:function(e){this.setState({available:e.value})}},{key:"connected",value:function(e){this.setState({connected:e.value})}},{key:"castIconClick",value:function(e){this.cast.requestSession()}},{key:"render",value:function(){if(!this.state.available)return null;var e="/static/img/chromecast.svg";return this.state.connected&&(e="/static/img/chromecast_connected.svg"),u.default.createElement("img",{onClick:this.iconClick,title:"Chromecast",className:"castbutton",src:e})}}]),t}(u.default.Component);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d={title:f.default.string,description:f.default.string,url:f.default.string},p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onNextClick=n.nextClick.bind(n),n}return s(t,e),i(t,[{key:"nextClick",value:function(e){location.href=this.props.url}},{key:"render",value:function(){return u.default.createElement("a",{className:"fa fa-step-forward",title:this.props.title,href:this.props.url})}}]),t}(u.default.Component);p.propTypes=d,t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return new Promise(function(t,n){(0,m.request)(e).done(function(e){var r=!1,a=0;if(0==e.length)return void n({code:1,message:"No play servers."});var o=!0,s=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;a+=1,(0,m.request)(c.play_server.url+"/metadata",{query:{play_id:c.play_id}}).done(function(e){r||(r=!0,t({playServer:c,metadata:e}))}).always(function(){0==(a-=1)&&0==r&&n({code:2,message:"This episode is not on any of your play servers."})})}}catch(e){s=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw i}}})})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getPlayServer=i;var u=n(0),c=r(u),f=n(2),d=r(f),p=n(20),h=r(p),m=n(3),y=n(135),v=r(y),b=n(274),g=r(b),w=n(133),E=r(w),_=n(137),k=r(_),S=n(134),O=r(S),C=n(13),N=r(C),j=n(4);n(317);var P={playServerUrl:d.default.string,playId:d.default.string,session:d.default.string,startTime:d.default.number,metadata:d.default.object,info:d.default.object,nextInfo:d.default.object,backToInfo:d.default.object,currentInfo:d.default.object,onAudioChange:d.default.func,onSubtitleChange:d.default.func,audio_lang:d.default.string,subtitle_lang:d.default.string,onTimeUpdate:d.default.func},T={startTime:0,info:null,nextInfo:null},I=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPlayPauseClick=n.playPauseClick.bind(n),n.duration=parseInt(e.metadata.format.duration),n.pingTimer=null,n.onFullscreenClick=n.fullscreenClick.bind(n),n.onVolumeChange=n.volumeChange.bind(n),n.onAudioChange=n.audioChange.bind(n),n.onSubtitleChange=n.subtitleChange.bind(n),n.volume=1,n.hideControlsTimer=null,n.onSliderReturnCurrentTime=n.sliderReturnCurrentTime.bind(n),n.onSliderNewTime=n.sliderNewTime.bind(n),n.state={playing:!1,time:n.props.startTime,startTime:n.props.startTime,session:e.session,fullscreen:!1,showControls:!0,audio:n.props.audio_lang,subtitle:n.props.subtitle_lang,loading:!1},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.video.addEventListener("timeupdate",this.timeupdateEvent.bind(this)),this.video.addEventListener("pause",this.pauseEvent.bind(this)),this.video.addEventListener("play",this.playEvent.bind(this)),this.video.addEventListener("fullscreenchange",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("error",this.playError.bind(this)),this.video.addEventListener("waiting",this.playWaiting.bind(this)),this.video.addEventListener("click",this.playClick.bind(this)),this.video.addEventListener("touchstart",this.playClick.bind(this)),this.setPingTimer(),this.video.volume=this.volume,this.video.load(),document.onmousemove=this.mouseMove.bind(this),document.onkeypress=this.keypress.bind(this),document.onbeforeunload=this.beforeUnload.bind(this)}},{key:"keypress",value:function(e){"Space"==e.code&&this.playPauseClick()}},{key:"playClick",value:function(e){event.preventDefault(),this.video.paused||this.state.loading||(this.setState({showControls:!this.state.showControls}),this.setHideControlsTimer())}},{key:"setPingTimer",value:function(){var e=this;this.pingTimer=setTimeout(function(){(0,m.request)(e.getPlayUrl()+"&action=ping"),e.setPingTimer()},3e4)}},{key:"setHideControlsTimer",value:function(e){var t=this;void 0==e&&(e=6e3),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout(function(){t.video.paused||t.state.loading||t.setState({showControls:!1})},e)}},{key:"mouseMove",value:function(e){this.state.showControls||(this.setState({showControls:!0}),this.setHideControlsTimer())}},{key:"getPlayUrl",value:function(){return this.props.playServerUrl+"/play?play_id="+this.props.playId+"&session="+this.props.session+"&start_time="+this.state.startTime+"&subtitle_lang="+(this.state.subtitle||"")+"&audio_lang="+(this.state.audio||"")}},{key:"playPauseClick",value:function(){this.video.paused?(this.video.play(),this.setHideControlsTimer(2e3)):this.video.pause()}},{key:"fullscreenchangeEvent",value:function(){this.setState({fullscreen:document.fullScreen})}},{key:"pauseEvent",value:function(){this.setState({playing:!1,showControls:!0})}},{key:"playEvent",value:function(){this.setState({playing:!0,loading:!0})}},{key:"playError",value:function(){this.setState({loading:!1})}},{key:"playWaiting",value:function(){this.setState({loading:!0})}},{key:"timeupdateEvent",value:function(e){var t=this;if(this.setState({loading:!1}),!this.video.paused){var n=this.video.currentTime;(this.video.seekable.length<=1||this.video.seekable.end(0)<=1)&&(n+=this.state.startTime),this.setState({time:n,playing:!0},function(){t.props.onTimeUpdate&&t.props.onTimeUpdate(t.state.time)}),this.hideControlsTimer||this.setHideControlsTimer()}}},{key:"changeVideoState",value:function(e){var t=this;this.cancelPlayUrl().then(function(){t.setState(e,function(){t.video.load(),t.video.play()})})}},{key:"beforeUnload",value:function(){this.cancelPlayUrl()}},{key:"cancelPlayUrl",value:function(){var e=this;return new Promise(function(t,n){(0,m.request)(e.getPlayUrl()+"&action=cancel").done(function(){t()}).fail(function(e){n(e)})})}},{key:"fullscreenClick",value:function(e){this.state.fullscreen?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this.video.requestFullScreen?this.video.requestFullScreen():this.video.mozRequestFullScreen?this.video.mozRequestFullScreen():this.video.webkitRequestFullScreen?this.video.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this.video.webkitEnterFullscreen&&this.video.webkitEnterFullscreen(),this.setState({fullscreen:!this.state.fullscreen})}},{key:"getDurationText",value:function(){return(0,j.secondsToTime)(parseInt(this.duration))}},{key:"getCurrentTimeText",value:function(){return(0,j.secondsToTime)(parseInt(this.state.time))}},{key:"renderPlayNext",value:function(){if(this.props.nextInfo)return c.default.createElement(v.default,{title:this.props.nextInfo.title,url:this.props.nextInfo.url})}},{key:"volumeChange",value:function(e){this.volume=e,this.video&&(this.video.volume=e)}},{key:"audioChange",value:function(e){this.props.onAudioChange&&this.props.onAudioChange(e),this.changeVideoState({audio:e,startTime:this.state.time})}},{key:"subtitleChange",value:function(e){this.props.onSubtitleChange&&this.props.onSubtitleChange(e),this.changeVideoState({subtitle:e,startTime:this.state.time})}},{key:"sliderNewTime",value:function(e){this.video.pause(),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=null,this.changeVideoState({time:e,startTime:e})}},{key:"sliderReturnCurrentTime",value:function(){return this.state.time}},{key:"showControlsVisibility",value:function(){return this.state.showControls?"visible":"hidden"}},{key:"renderControlsTop",value:function(){return c.default.createElement("div",{className:"controls controls-top",style:{visibility:this.showControlsVisibility()}},c.default.createElement("div",{className:"control"},c.default.createElement("a",{className:"fa fa-times",href:this.props.backToInfo.url,title:this.props.backToInfo.title})),c.default.createElement("div",{className:"control-text control-text-title"},this.props.currentInfo.title),c.default.createElement("div",{className:"control-spacer"}),c.default.createElement("div",{className:"control"},c.default.createElement(O.default,null)),c.default.createElement("div",{className:"control"},c.default.createElement(E.default,{metadata:this.props.metadata,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),c.default.createElement("div",{className:"control"},c.default.createElement(g.default,{onChange:this.onVolumeChange})),c.default.createElement("div",{className:"control"},this.renderPlayNext()))}},{key:"renderControlsBottom",value:function(){var e=(0,h.default)({fa:!0,"fa-pause":this.state.playing,"fa-play":!this.state.playing}),t=(0,h.default)({fa:!0,"fa-expand":this.state.fullscreen,"fa-arrows-alt":!this.state.fullscreen});return c.default.createElement("div",{className:"controls",style:{visibility:this.showControlsVisibility()}},c.default.createElement("div",{className:"control"},c.default.createElement("span",{className:e,onClick:this.onPlayPauseClick})),c.default.createElement("div",{className:"control-text"},this.getCurrentTimeText()),c.default.createElement(k.default,{duration:this.duration,onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),c.default.createElement("div",{className:"control-text",title:"Timeleft"},this.getDurationText()),c.default.createElement("div",{className:"control"},c.default.createElement("span",{className:t,onClick:this.onFullscreenClick})))}},{key:"renderLoading",value:function(){return this.state.loading?c.default.createElement(N.default,{hcenter:!0}):null}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"player"},c.default.createElement("div",{className:"overlay"},c.default.createElement("video",{className:"video",preload:"none",autoPlay:!0,src:this.getPlayUrl(),controls:!1,ref:function(t){return e.video=t}}),this.renderControlsTop(),this.renderControlsBottom(),this.renderLoading()))}}]),t}(c.default.Component);I.propTypes=P,I.defaultProps=T,t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c);n(318);var d={duration:f.default.number.isRequired,onReturnCurrentTime:f.default.func.isRequired,onNewTime:f.default.func.isRequired},p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={currentTime:0},n.onSliderClick=n.sliderClick.bind(n),n.timerGetCurrentTime=null,n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getCurrentTime()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerGetCurrentTime),this.timerGetCurrentTime=null}},{key:"sliderClick",value:function(e){var t=this.getEventXOffset(e),n=this.props.duration/this.slider.offsetWidth,r=Math.trunc(n*t);this.setState({currentTime:r}),this.props.onNewTime(r)}},{key:"getCurrentTime",value:function(){var e=this;this.setState({currentTime:this.props.onReturnCurrentTime()}),this.timerGetCurrentTime=setTimeout(function(){e.getCurrentTime()},1e3)}},{key:"progressPercent",value:function(){return(this.state.currentTime/this.props.duration*100).toString()+"%"}},{key:"getEventXOffset",value:function(e){e.type.match("^touch")&&(e=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]);var t=0,n=this.slider;do{isNaN(n.offsetLeft)||(t+=n.offsetLeft)}while(n=n.offsetParent);var r=e.clientX-t;return r>this.slider.offsetWidth&&(r=this.slider.offsetWidth),r}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"player-slider-wrapper",onClick:this.onSliderClick},u.default.createElement("div",{className:"slider",ref:function(t){return e.slider=t}},u.default.createElement("div",{className:"progress",style:{width:this.progressPercent()}})))}}]),t}(u.default.Component);p.propTypes=d,t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return new Promise(function(n,r){(0,h.request)("/1/users/"+(0,p.getUserId)()+"/shows-countdown",{query:{per_page:e,page:t}}).done(function(e,t,r){n({items:e,jqXHR:r})}).fail(function(e){r(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getItems=i;var u=n(0),c=r(u),f=n(2),d=r(f),p=n(4),h=n(3),m={perPage:d.default.number,page:d.default.number,items:d.default.array},y={perPage:6,page:1,items:null},v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={items:[]},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;i(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderShow",value:function(e,t){return c.default.createElement("div",{key:e.id,className:"col-4 col-md-3 col-lg-2 col-margin"},c.default.createElement("div",{className:"text-nowrap-hide"},"In ",(0,p.dateInDays)(t.air_datetime)),c.default.createElement("a",{href:"/show/"+e.id},c.default.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?c.default.createElement("div",{className:"alert alert-info"},"None of the shows you follow have episodes airing! :("):c.default.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderShow(t.show,t.episode)}))}}]),t}(c.default.Component);v.propTypes=m,v.defaultProps=y,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(276),p=r(d),h=n(3),m={show:f.default.object},y=[{key:"imdb",title:"IMDb",required:!0,importer_info:!1,importer_episodes:!1},{key:"tvmaze",title:"TVMaze",required:!1,importer_info:!0,importer_episodes:!0},{key:"thetvdb",title:"TheTVDB",required:!1,importer_info:!0,importer_episodes:!0}],v=["info","episodes"],b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onImporterSelected=n.importerSelected.bind(n),n.onInputChange=n.inputChanged.bind(n);var r=e.show||{},s=r.externals||{},i=r.importers||{};n.state={"importers.info":i.info||"","importers.episodes":i.episodes||"",alternative_titles:r.alternative_titles?r.alternative_titles.slice():[],episode_type:r.episode_type||2};var l=!0,u=!1,c=void 0;try{for(var f,d=y[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=f.value;n.state["externals."+p.key]=s[p.key]||""}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}return n}return s(t,e),i(t,[{key:"importerSelected",value:function(e){var t={};t[e.target.name]=e.target.value;var n=!0,r=!1,a=void 0;try{for(var o,s=v[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;"importers."+i!=e.target.name&&(""===this.state["importers."+i]&&(t["importers."+i]=e.target.value))}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}this.setState(t)}},{key:"inputChanged",value:function(e){var t={},n=e.target.name,r=e.target.value;if(t[n]=r,this.setState(t),n.startsWith("externals.")&&""!=r){var a={};a[n.substring(n.indexOf(".")+1,n.length)]=r,this.lookupExternals(a)}}},{key:"lookupExternals",value:function(e){var t=this;(0,h.request)("/api/tvmaze-show-lookup",{localRequest:!0,query:e}).done(function(e){var n={"externals.tvmaze":e.id};for(var r in e.externals)"externals."+r in t.state&&(n["externals."+r]=e.externals[r]);t.setState(n)})}},{key:"renderImporter",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,s=y[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;i["importer_"+e]&&t.push(i)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return u.default.createElement("fieldset",{className:"form-group",key:e},u.default.createElement("label",null,"Import ",e," from"),u.default.createElement("select",{name:"importers."+e,className:"form-control importers",onChange:this.onImporterSelected,value:this.state["importers."+e]},u.default.createElement("option",{value:""}),t.map(function(e){return u.default.createElement("option",{key:e.key,value:e.key},e.title)})))}},{key:"renderExternals",value:function(){var e=this;return y.map(function(t){return u.default.createElement("fieldset",{key:t.key,className:"form-group"},u.default.createElement("label",null,t.title," ID ",t.required?u.default.createElement("b",null,"*"):""),u.default.createElement("input",{name:"externals."+t.key,className:"form-control",required:t.required,value:e.state["externals."+t.key],onChange:e.onInputChange}),t.required?u.default.createElement("small",{className:"text-muted"}," Required to prevent show duplication."):"")})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6"},u.default.createElement("h3",null,"Externals"),this.renderExternals(),u.default.createElement("h3",null,"Importers"),v.map(function(t){return e.renderImporter(t)})),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("h3",null,"General"),u.default.createElement("fieldset",{className:"form-group"},u.default.createElement("label",null,"Alternative titles"),u.default.createElement(p.default,{options:this.state.alternative_titles})),u.default.createElement("fieldset",{className:"form-group"},u.default.createElement("label",null,"Episode type"),u.default.createElement("select",{name:"episode_type",className:"form-control",defaultValue:this.state.episode_type},u.default.createElement("option",{value:"1"},"Absolute number"),u.default.createElement("option",{value:"2"},"Season episode"),u.default.createElement("option",{value:"3"},"Air date")))))}}]),t}(u.default.Component);b.propTypes=m,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return new Promise(function(n,r){(0,h.request)("/1/users/"+(0,p.getUserId)()+"/shows-etw",{query:{per_page:e,page:t}}).done(function(e,t,r){n({items:e,jqXHR:r})}).fail(function(e){r(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getItems=i;var u=n(0),c=r(u),f=n(2),d=r(f),p=n(4),h=n(3),m={perPage:d.default.number,page:d.default.number,items:d.default.array},y={perPage:6,page:1,items:null},v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={items:[]},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;i(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return c.default.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},c.default.createElement("a",{href:"/show/"+t.id},c.default.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})),c.default.createElement("div",null,(0,p.episodeNumber)(t,n)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?c.default.createElement("div",{className:"alert alert-info"},"You have zero episodes to watch! :("):c.default.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderItem(t)}))}}]),t}(c.default.Component);v.propTypes=m,v.defaultProps=y,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return new Promise(function(n,r){(0,h.request)("/1/users/"+(0,p.getUserId)()+"/shows-recently-aired",{query:{per_page:e,page:t}}).done(function(e,t,r){n({items:e,jqXHR:r})}).fail(function(e){r(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getItems=i;var u=n(0),c=r(u),f=n(2),d=r(f),p=n(4),h=n(3);n(143);var m={perPage:d.default.number,page:d.default.number,items:d.default.array},y={perPage:6,page:1,items:null},v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={items:[]},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;i(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return c.default.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},c.default.createElement("div",null,n.air_date),c.default.createElement("a",{href:"/show/"+t.id},c.default.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?c.default.createElement("div",{className:"alert alert-info"},"No recently aired episodes from shows you are a fan of."):c.default.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderItem(t)}))}}]),t}(c.default.Component);v.propTypes=m,v.defaultProps=y,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return new Promise(function(n,r){(0,h.request)("/1/users/"+(0,p.getUserId)()+"/shows-watched",{query:{per_page:e,page:t}}).done(function(e,t,r){n({items:e,jqXHR:r})}).fail(function(e){r(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getItems=i;var u=n(0),c=r(u),f=n(2),d=r(f),p=n(4),h=n(3),m=n(80),y=r(m),v={perPage:d.default.number,page:d.default.number,items:d.default.array},b={perPage:6,page:1,items:null},g=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={shows:[]},n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.items?this.setState({shows:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;i(this.props.perPage,this.props.page).then(function(t){e.setState({shows:t.items})})}},{key:"render",value:function(){return 0==this.state.shows.length?c.default.createElement("div",{className:"alert alert-info"},"You have not watched any shows yet!"):c.default.createElement(y.default,{shows:this.state.shows})}}]),t}(c.default.Component);g.propTypes=v,g.defaultProps=b,t.default=g},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(11),i=n(308),l=r(i),u=n(304),c=r(u),f=n(307),d=r(f),p=n(309),h=r(p),m=n(303),y=r(m),v=n(302),b=r(v),g=n(306),w=r(g),E=n(305),_=r(E),k=n(300),S=r(k),O=n(291),C=r(O),N=n(293),j=r(N),P=n(298),T=r(P),I=n(299),q=r(I),R=n(290),x=r(R),M=n(292),A=r(M),D=n(294),U=r(D),L=n(289),H=r(L),F=n(288),W=r(F),X=n(295),B=r(X),G=n(297),V=r(G),z=n(296),Y=r(z),J=n(301),K=r(J);t.default=o.default.createElement(s.Router,{history:s.browserHistory},o.default.createElement(s.Route,{path:"/sign-in",component:S.default}),o.default.createElement(s.Route,{path:"/create-user",component:C.default}),o.default.createElement(s.Route,{path:"/show/:showId",component:l.default},o.default.createElement(s.IndexRedirect,{to:"/show/:showId/main"}),o.default.createElement(s.Route,{path:"main",component:c.default}),o.default.createElement(s.Route,{path:"info",component:y.default}),o.default.createElement(s.Route,{path:"seasons",component:d.default}),o.default.createElement(s.Route,{path:"stats",component:h.default}),o.default.createElement(s.Route,{path:"edit",component:b.default})),o.default.createElement(s.Route,{path:"/show/:showId/episode/:number/play",component:w.default}),o.default.createElement(s.Route,{path:"/show-new",component:_.default}),o.default.createElement(s.Route,{path:"/fan-of",component:j.default}),o.default.createElement(s.Route,{path:"/recently-aired",component:T.default}),o.default.createElement(s.Route,{path:"/shows-watched",component:q.default}),o.default.createElement(s.Route,{path:"/countdown",component:x.default}),o.default.createElement(s.Route,{path:"/episodes-to-watch",component:A.default}),o.default.createElement(s.Route,{path:"/main",component:U.default}),o.default.createElement(s.Route,{path:"/air-dates",component:H.default}),o.default.createElement(s.Route,{path:"/account",component:W.default}),o.default.createElement(s.Route,{path:"/password",component:B.default}),o.default.createElement(s.Route,{path:"/play-servers",component:V.default}),o.default.createElement(s.Route,{path:"/play-server",component:Y.default}),o.default.createElement(s.Route,{path:"/user-shows-stats",component:K.default}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=(n(3),n(4)),f=n(272),d=r(f),p=n(134),h=r(p),m=n(273),y=r(m);n(312);var v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"renderShowDropdown",value:function(){return u.default.createElement("span",{className:"dropdown"},u.default.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},"Shows"),u.default.createElement("div",{className:"dropdown-menu"},u.default.createElement("a",{className:"dropdown-item",href:"/countdown"},"Countdown"),u.default.createElement("a",{className:"dropdown-item",href:"/fan-of"},"Fan of"),u.default.createElement("a",{className:"dropdown-item",href:"/episodes-to-watch"},"Episodes to Watch"),u.default.createElement("a",{className:"dropdown-item",href:"/recently-aired"},"Recently Aired"),u.default.createElement("a",{className:"dropdown-item",href:"/shows-watched"},"Watched"),u.default.createElement("a",{className:"dropdown-item",href:"/user-shows-stats"},"Stats"),u.default.createElement("div",{className:"dropdown-divider"}),u.default.createElement("a",{className:"dropdown-item",href:"/show-new"},"New show")))}},{key:"renderMain",value:function(){return u.default.createElement("a",{className:"link",href:"/main"},"Main")}},{key:"renderAirDates",value:function(){return u.default.createElement("a",{className:"link",href:"/air-dates"},"Air dates")}},{key:"renderUserMenu",value:function(){if((0,c.isAuthed)())return u.default.createElement("span",{className:"dropdown"},u.default.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},u.default.createElement("i",{className:"fa fa-user"})),u.default.createElement("div",{className:"dropdown-menu dropdown-menu-right"},u.default.createElement("a",{className:"dropdown-item",href:"/account"},"Account"),u.default.createElement("a",{className:"dropdown-item",href:"/play-servers"},"Play servers"),u.default.createElement("div",{className:"dropdown-divider"}),u.default.createElement("a",{className:"dropdown-item",href:"/sign-out"},"Sign out")))}},{key:"renderChromecast",value:function(){if((0,c.isAuthed)())return u.default.createElement("span",{className:"link"},u.default.createElement(y.default,null),u.default.createElement(h.default,null))}},{key:"renderSignIn",value:function(){if(!(0,c.isAuthed)())return u.default.createElement("a",{className:"link",href:"/sign-in"},"Sign in")}},{key:"renderCreateUser",value:function(){if(!(0,c.isAuthed)())return u.default.createElement("a",{className:"link",href:"/create-user"},"Create user")}},{key:"render",value:function(){return u.default.createElement("nav",{className:"navbar-seplis"},u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-auto"},this.renderMain(),this.renderAirDates(),this.renderShowDropdown()),u.default.createElement("div",{className:"col-auto ml-auto order-sm-2 order-md-12"},this.renderChromecast(),this.renderCreateUser(),this.renderSignIn(),this.renderUserMenu()),u.default.createElement("div",{className:"col-12 col-md-6 m-auto order-sm-12 order-md-2"},u.default.createElement(d.default,{key:"Search"})))))}}]),t}(u.default.Component);t.default=v},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.rel}function a(e,t){function n(n){e[n]=u(t,{rel:n})}return t.rel.split(/\s+/).forEach(n),e}function o(e,t){var n=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n&&(e[n[1]]=n[2]),e}function s(e){try{var t=e.split(";"),n=t.shift().replace(/[<>]/g,""),r=l.parse(n),a=i.parse(r.query),s=t.reduce(o,{});return s=u(a,s),s.url=n,s}catch(e){return null}}var i=n(96),l=n(269),u=n(271);e.exports=function(e){return e?e.split(/,\s*</).map(s).filter(r).reduce(a,{}):null}},,,,function(e,t,n){"use strict";(function(e,r){var a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){function i(e){throw new RangeError(A[e])}function l(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(M,"."),r+l(e.split("."),t).join(".")}function c(e){for(var t,n,r=[],a=0,o=e.length;a<o;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<o?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function f(e){return l(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:O}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?U(e/P):e>>1,e+=U(e/t);e>D*N>>1;r+=O)e=U(e/D);return U(r+(D+1)*e/(e+j))}function m(e){var t,n,r,a,o,s,l,u,c,p,m=[],y=e.length,v=0,b=I,g=T;for(n=e.lastIndexOf(q),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),m.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<y;){for(o=v,s=1,l=O;a>=y&&i("invalid-input"),u=d(e.charCodeAt(a++)),(u>=O||u>U((S-v)/s))&&i("overflow"),v+=u*s,c=l<=g?C:l>=g+N?N:l-g,!(u<c);l+=O)p=O-c,s>U(S/p)&&i("overflow"),s*=p;t=m.length+1,g=h(v-o,t,0==o),U(v/t)>S-b&&i("overflow"),b+=U(v/t),v%=t,m.splice(v++,0,b)}return f(m)}function y(e){var t,n,r,a,o,s,l,u,f,d,m,y,v,b,g,w=[];for(e=c(e),y=e.length,t=I,n=0,o=T,s=0;s<y;++s)(m=e[s])<128&&w.push(L(m));for(r=a=w.length,a&&w.push(q);r<y;){for(l=S,s=0;s<y;++s)(m=e[s])>=t&&m<l&&(l=m);for(v=r+1,l-t>U((S-n)/v)&&i("overflow"),n+=(l-t)*v,t=l,s=0;s<y;++s)if(m=e[s],m<t&&++n>S&&i("overflow"),m==t){for(u=n,f=O;d=f<=o?C:f>=o+N?N:f-o,!(u<d);f+=O)g=u-d,b=O-d,w.push(L(p(d+g%b,0))),u=U(g/b);w.push(L(p(u,0))),o=h(n,v,r==a),n=0,++r}++n,++t}return w.join("")}function v(e){return u(e,function(e){return R.test(e)?m(e.slice(4).toLowerCase()):e})}function b(e){return u(e,function(e){return x.test(e)?"xn--"+y(e):e})}var g="object"==o(t)&&t&&!t.nodeType&&t,w="object"==o(e)&&e&&!e.nodeType&&e,E="object"==(void 0===r?"undefined":o(r))&&r;E.global!==E&&E.window!==E&&E.self!==E||(s=E);var _,k,S=2147483647,O=36,C=1,N=26,j=38,P=700,T=72,I=128,q="-",R=/^xn--/,x=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=O-C,U=Math.floor,L=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:c,encode:f},decode:m,encode:y,toASCII:b,toUnicode:v},"object"==o(n(50))&&n(50))void 0!==(a=function(){return _}.call(t,n,t,e))&&(e.exports=a);else if(g&&w)if(e.exports==g)w.exports=_;else for(k in _)_.hasOwnProperty(k)&&(g[k]=_[k]);else s.punycode=_}(void 0)}).call(t,n(132)(e),n(131))},,function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var i=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,d,p,h,m=e[c].replace(i,"%20"),y=m.indexOf(n);y>=0?(f=m.substr(0,y),d=m.substr(y+1)):(f=m,d=""),p=decodeURIComponent(f),h=decodeURIComponent(d),r(s,p)?a(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){switch(void 0===e?"undefined":a(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":a(e))?r(i(e),function(a){var i=encodeURIComponent(o(a))+n;return s(e[a])?r(e[a],function(e){return i+encodeURIComponent(o(e))}).join(t):i+encodeURIComponent(o(e[a]))}).join(t):l?encodeURIComponent(o(l))+n+encodeURIComponent(o(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function o(e){return c.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return a(e,!1,!0).resolve(t)}function i(e,t){return e?a(e,!1,!0).resolveObject(t):t}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(173),c=n(270);t.parse=a,t.resolve=s,t.resolveObject=i,t.format=o,t.Url=r;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(h),y=["'"].concat(m),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(96);r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":l(e)));var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(a),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(a);var i=e;if(i=i.trim(),!n&&1===e.split("#").length){var d=p.exec(i);if(d)return this.path=i,this.href=i,this.pathname=d[1],d[2]?(this.search=d[2],this.query=t?S.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=f.exec(i);if(h){h=h[0];var m=h.toLowerCase();this.protocol=m,i=i.substr(h.length)}if(n||h||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===i.substr(0,2);!O||h&&_[h]||(i=i.substr(2),this.slashes=!0)}if(!_[h]&&(O||h&&!k[h])){for(var C=-1,N=0;N<b.length;N++){var j=i.indexOf(b[N]);-1!==j&&(-1===C||j<C)&&(C=j)}var P,T;T=-1===C?i.lastIndexOf("@"):i.lastIndexOf("@",C),-1!==T&&(P=i.slice(0,T),i=i.slice(T+1),this.auth=decodeURIComponent(P)),C=-1;for(var N=0;N<v.length;N++){var j=i.indexOf(v[N]);-1!==j&&(-1===C||j<C)&&(C=j)}-1===C&&(C=i.length),this.host=i.slice(0,C),i=i.slice(C),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var q=this.hostname.split(/\./),N=0,R=q.length;N<R;N++){var x=q[N];if(x&&!x.match(g)){for(var M="",A=0,D=x.length;A<D;A++)x.charCodeAt(A)>127?M+="x":M+=x[A];if(!M.match(g)){var U=q.slice(0,N),L=q.slice(N+1),H=x.match(w);H&&(U.push(H[1]),L.unshift(H[2])),L.length&&(i="/"+L.join(".")+i),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+F,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!E[m])for(var N=0,R=y.length;N<R;N++){var X=y[N];if(-1!==i.indexOf(X)){var B=encodeURIComponent(X);B===X&&(B=escape(X)),i=i.split(X).join(B)}}var G=i.indexOf("#");-1!==G&&(this.hash=i.substr(G),i=i.slice(0,G));var V=i.indexOf("?");if(-1!==V?(this.search=i.substr(V),this.query=i.substr(V+1),t&&(this.query=S.parse(this.query)),i=i.slice(0,V)):t&&(this.search="",this.query={}),i&&(this.pathname=i),k[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",z=this.search||"";this.path=F+z}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+a+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),o=0;o<a.length;o++){var s=a[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),l=0;l<i.length;l++){var u=i[l];"protocol"!==u&&(n[u]=e[u])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var p=f[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||_[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=b||v||n.host&&e.pathname,w=g,E=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!k[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),g=g&&(""===h[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=E.shift();var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=E.slice(-1)[0],N=(n.host||e.host||E.length>1)&&("."===C||".."===C)||""===C,j=0,P=E.length;P>=0;P--)C=E[P],"."===C?E.splice(P,1):".."===C?(E.splice(P,1),j++):j&&(E.splice(P,1),j--);if(!g&&!w)for(;j--;j)E.unshift("..");!g||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),N&&"/"!==E.join("/").substr(-1)&&E.push("");var T=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(S){n.hostname=n.host=T?"":E.length?E.shift():"";var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return g=g||n.host&&E.length,g&&!T&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)a.call(n,r)&&(e[r]=n[r])}return e}e.exports=r;var a=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(3);n(313);var c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputChanged=n.inputChanged.bind(n),n.onKeyDown=n.keyDown.bind(n),n.onMouseOver=n.mouseOver.bind(n),n.onMouseOut=n.mouseOut.bind(n),n.onSubmit=n.submit.bind(n),n.onClick=n.click.bind(n),n.state={results:[],show:!1,selectedResultId:null},n.requesting=null,n.selectedResultId=null,n.onDocumentClick=n.documentClick.bind(n),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.form.contains(e.target)||this.setState({show:!1})}},{key:"inputChanged",value:function(e){var t=this;if(this.requesting&&this.requesting.abort(),""==e.target.value.trim())return void this.setState({results:[],show:!1,selectedResultId:null});this.requesting=(0,u.request)("/1/shows",{query:{title_suggest:e.target.value.trim(),per_page:10,fields:"title,premiered,poster_image"}}).done(function(e){t.suggestNode.scrollTop=0,t.setState({results:e,show:!0,selectedResultId:null}),t.setNextSelectedId(0)})}},{key:"keyDown",value:function(e){switch(e.keyCode){case 38:this.setNextSelectedId(-1);break;case 40:this.setNextSelectedId(1);break;case 13:this.state.selectedResultId&&(location.href="/show/"+this.state.selectedResultId)}}},{key:"mouseOver",value:function(e){this.state.selectedResultId=parseInt(e.target.getAttribute("data-id")),this.setNextSelectedId(0,!0)}},{key:"mouseOut",value:function(e){this.setState({selectedResultId:null})}},{key:"setNextSelectedId",value:function(e,t){if(0!=this.state.results.length){var n=-1;if(this.state.selectedResultId){n=0;var r=!0,a=!1,o=void 0;try{for(var s,i=this.state.results[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){if(s.value.id==this.state.selectedResultId)break;n++}}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}}n+=e,n<0&&(n=0),n>this.state.results.length-1&&(n=this.state.results.length-1);var l=this.state.results[n].id;if(this.setState({selectedResultId:l}),!t){var u=document.getElementById("sresult-"+l).offsetHeight;if((n+1)*u>this.suggestNode.offsetHeight){var c=Math.floor(this.suggestNode.offsetHeight/u),f=n-c+1,d=this.suggestNode.offsetHeight%u;this.suggestNode.scrollTop=f*u+d}else this.suggestNode.scrollTop=0}}}},{key:"submit",value:function(e){e.preventDefault()}},{key:"click",value:function(e){this.state.selectedResultId&&(location.href="/show/"+this.state.selectedResultId)}},{key:"resultClassName",value:function(e){var t="result";return e.id==this.state.selectedResultId&&(t+=" selected"),t}},{key:"render",value:function(){var e=this;return l.default.createElement("form",{id:"search",className:"form-inline",onSubmit:this.onSubmit,ref:function(t){return e.form=t}},l.default.createElement("input",{className:"form-control",type:"text",placeholder:"Search",onChange:this.onInputChanged,onKeyDown:this.onKeyDown}),l.default.createElement("div",{className:"suggest",ref:function(t){return e.suggestNode=t},style:{display:this.state.show?"block":"none"}},this.state.results.map(function(t){return l.default.createElement("div",{key:t.id,id:"sresult-"+t.id,"data-id":t.id,href:"/show/"+t.id,className:e.resultClassName(t),onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut,onClick:e.onClick},l.default.createElement("div",{className:"img"},l.default.createElement("img",{src:null!=t.poster_image?t.poster_image.url+"@SY100":""})),l.default.createElement("div",{className:"title"},t.title," (",t.premiered?t.premiered.substring(0,4):"",")"))})))}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(20),f=r(c),d=n(40),p=r(d),h=n(137),m=r(h),y=n(133),v=r(y),b=n(135),g=r(b),w=n(4),E=n(3);n(315);var _=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={connected:!1,deviceName:"",playing:!1,info:null,currentTime:0,loading:!1},n.cast=null,n.onSliderReturnCurrentTime=n.sliderReturnCurrentTime.bind(n),n.onSliderNewTime=n.sliderNewTime.bind(n),n.onPlayPauseClick=n.playPauseClick.bind(n),n.onAudioChange=n.audioChange.bind(n),n.onSubtitleChange=n.subtitleChange.bind(n),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.cast=new p.default,this.cast.load(this.initCast.bind(this))}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("anyChanged",this.castStateChanged.bind(this));var e=this.cast.getSession();e&&e.removeMessageListener("urn:x-cast:net.seplis.cast.info",this.receiveCastInfo.bind(this))}},{key:"audioChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({subtitle_lang:e})}},{key:"subAudioSubSave",value:function(e){var t=this,n=this.state.info.show,r=this.state.info.episode;(0,E.request)("/1/users/"+(0,w.getUserId)()+"/subtitle-lang/shows/"+n.id,{method:"PATCH",data:e}).done(function(){t.cast.playEpisode(n.id,r.number,t.state.currentTime)})}},{key:"initCast",value:function(){this.cast.addEventListener("anyChanged",this.castStateChanged.bind(this))}},{key:"playPauseClick",value:function(e){this.cast.playOrPause()}},{key:"castStateChanged",value:function(e){switch(e.field){case"playerState":this.playerStateChanged(e);break;case"isConnected":this.connectedChanged();break;case"currentTime":this.currentTimeChanged(e)}}},{key:"connectedChanged",value:function(){var e=this.cast.isConnected();this.setState({connected:e,deviceName:e?this.cast.getFriendlyName():""}),e?(this.setState({loading:!1}),this.cast.getSession().addMessageListener("urn:x-cast:net.seplis.cast.info",this.receiveCastInfo.bind(this)),this.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.sendinfo",{})):this.setState({info:null})}},{key:"receiveCastInfo",value:function(e,t){var n=this;this.setState({info:JSON.parse(t),playNextEpisode:null},function(){n.cast.getMediaSession()&&n.currentTimeChanged({value:n.cast.getMediaSession().getEstimatedTime()}),n.getPlayNextEpisode()})}},{key:"playerStateChanged",value:function(e){this.setState({playing:"PLAYING"==e.value,loading:"BUFFERING"==e.value||"IDLE"==e.value}),"IDLE"==e.value&&this.setState({info:null,loading:!1}),"BUFFERING"!=e.value&&"PLAYING"!=e.value||this.state.info||this.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.sendinfo",{})}},{key:"getPlayNextEpisode",value:function(){var e=this;if(this.state.info){var t=parseInt(this.state.info.episode.number)+1,n=this.state.info.show.id;(0,E.request)("/1/shows/"+n+"/episodes/"+t).done(function(t){e.setState({nextEpisode:t})})}}},{key:"currentTimeChanged",value:function(e){var t=e.value;if(this.cast.getMediaSession()&&this.cast.getMediaSession().items&&1==this.cast.getMediaSession().items.length){0==this.cast.getMediaSession().items[0].startTime&&this.state.info&&(t+=this.state.info.startTime),this.setState({currentTime:t})}}},{key:"sliderNewTime",value:function(e){var t=this;this.cast.pause(function(){t.setState({loading:!0,currentTime:e}),t.cast.playEpisode(t.state.info.show.id,t.state.info.episode.number,e)})}},{key:"sliderReturnCurrentTime",value:function(){return this.state.currentTime}},{key:"renderPlayControl",value:function(){if(this.state.loading)return u.default.createElement("div",{className:"control"},u.default.createElement("img",{src:"/static/img/spinner.svg"}));var e=(0,f.default)({fa:!0,"fa-pause":this.state.playing,"fa-play":!this.state.playing});return u.default.createElement("div",{className:"control"},u.default.createElement("span",{className:e,onClick:this.onPlayPauseClick}))}},{key:"getDuration",value:function(){return this.state.info?parseInt(this.state.info.metadata.format.duration):0}},{key:"getPlayNextInfo",value:function(){if(!this.state.info||!this.state.info.show||!this.state.nextEpisode)return null;var e=this.state.info.show,t=this.state.nextEpisode;return{title:(0,w.episodeTitle)(e,t),url:"/show/"+e.id+"/episode/"+t.number+"/play"}}},{key:"renderPlayNext",value:function(){var e=this.getPlayNextInfo();if(e)return u.default.createElement("div",{className:"control"},u.default.createElement(g.default,{title:e.title,url:e.url}))}},{key:"renderPlaying",value:function(){var e=this.state.info.show,t=this.state.info.episode;return u.default.createElement("div",{id:"castbar"},u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"text"},u.default.createElement("b",null,"Playing on ",this.state.deviceName,":"),"  ",e.title," - ",(0,w.episodeTitle)(e,t)),u.default.createElement("div",{className:"controls"}),u.default.createElement("div",{className:"controls"},this.renderPlayControl(),u.default.createElement("div",{className:"control-text"},(0,w.secondsToTime)(this.state.currentTime)),u.default.createElement(m.default,{duration:this.getDuration(),onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),u.default.createElement("div",{className:"control-text"},(0,w.secondsToTime)(this.getDuration())),u.default.createElement("div",{className:"control"},u.default.createElement(v.default,{metadata:this.state.info.metadata,bottom:!0,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),this.renderPlayNext())))}},{key:"renderLoading",value:function(){if(this.state.loading)return u.default.createElement("img",{src:"/static/img/spinner.svg"})}},{key:"renderReadyToPlay",value:function(){return u.default.createElement("div",{id:"castbar"},u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"text"},u.default.createElement("b",null,"Ready to cast on ",this.state.deviceName)," ",u.default.createElement("br",null),this.renderLoading())))}},{key:"render",value:function(){return this.cast&&this.state.connected?this.state.info?this.renderPlaying():this.renderReadyToPlay():null}}]),t}(u.default.Component);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(20),p=r(d);n(319);var h={onChange:f.default.func},m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSliderMouseMove=n.sliderMouseMove.bind(n),n.onSliderClick=n.sliderClick.bind(n),n.onIconClick=n.iconClick.bind(n),n.state={percent:100*(localStorage.getItem("volume")||1),show:!1,muted:!1},n.onDocumentClick=n.documentClick.bind(n),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("volume")||1;this.props.onChange&&this.props.onChange(e),document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.icon.contains(e.target)||this.setState({show:!1})}},{key:"sliderMouseMove",value:function(e){1==e.buttons&&this.onSliderClick(e)}},{key:"sliderClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target.querySelector(".scrubber"),n=e.clientY;n-=e.target.offsetTop+t.offsetTop,n=t.offsetHeight-n,n>t.offsetHeight&&(n=t.offsetHeight),n<0&&(n=0);var r=1/t.offsetHeight,a=r*n;a<0&&(a=0),this.setState({percent:100*a}),this.props.onChange&&this.props.onChange(a),localStorage.setItem("volume",a)}},{key:"iconClick",value:function(e){this.setState({show:!this.state.show})}},{key:"renderBar",value:function(){if(this.state.show)return u.default.createElement("div",{className:"volume-slider",onMouseMove:this.onSliderMouseMove,onClick:this.onSliderClick},u.default.createElement("div",{className:"scrubber"},u.default.createElement("div",{className:"scrubber-percentage",style:{height:this.state.percent+"%"}}),u.default.createElement("div",{className:"scrubber-head",style:{bottom:this.state.percent+"%"}})))}},{key:"render",value:function(){var e=this,t=(0,p.default)({fa:!0,"fa-volume-up":this.state.percent>=50&&!this.state.muted,"fa-volume-down":this.state.percent<50&&this.state.percent>=1&&!this.state.muted,"fa-volume-off":this.state.percent<1||this.state.muted});return u.default.createElement("span",{className:t,onClick:this.onIconClick,ref:function(t){return e.icon=t}},this.renderBar())}}]),t}(u.default.Component);m.propTypes=h,t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(3),f=n(4),d=n(13),p=r(d),h=n(80),m=r(h),y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={loading:!0,data:[]},n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;(0,c.request)("/1/users/"+(0,f.getUserId)()+"/air-dates").done(function(t){e.setState({loading:!1,data:t})})}},{key:"renderWeekday",value:function(e){var t=new Date(e);return y[t.getDay()]}},{key:"renderHeaderDate",value:function(e){var t=Date.parse(e),n=Date.now();switch(Math.round(Math.ceil((t-n)/864e5))){case-1:return u.default.createElement("span",null,"Yesterday ",u.default.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 0:return u.default.createElement("span",null,"Today ",u.default.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 1:return u.default.createElement("span",null,"Tomorrow ",u.default.createElement("small",{className:"text-muted"},this.renderWeekday(e)));default:return this.renderWeekday(e)}}},{key:"renderMain",value:function(){var e=this;return 0==this.state.data.length?u.default.createElement("div",{className:"alert alert-info"},u.default.createElement("h1",null,"There's nothing to watch this week!"),"But, how can this be?",u.default.createElement("br",null),"Well, you're properly not a fan of any shows that has episodes airing this week."):u.default.createElement("span",null,this.state.data.map(function(t){return u.default.createElement("span",{key:t.air_date},u.default.createElement("h3",{className:"header",title:t.air_date},e.renderHeaderDate(t.air_date)),u.default.createElement(m.default,{shows:t.shows}))}))}},{key:"render",value:function(){return this.state.loading?u.default.createElement(p.default,null):this.renderMain()}}]),t}(u.default.Component);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(14),p=r(d);n(85),n(310);var h={options:f.default.arrayOf(f.default.string)},m={options:[]},y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"componentDidMount",value:function(){(0,p.default)("select#alternative-titles").select2({tags:!0})}},{key:"render",value:function(){return u.default.createElement("span",{style:{color:"#000000"}},u.default.createElement("select",{name:"alternative_titles",id:"alternative-titles",className:"form-control",defaultValue:this.props.options,multiple:!0},this.props.options.map(function(e){return u.default.createElement("option",{key:e,value:e},e)})))}}]),t}(u.default.Component);y.propTypes=h,y.defaultProps=m,t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(20),p=r(d),h=n(4),m=n(3);n(320);var y={showId:f.default.number.isRequired,isFan:f.default.bool.isRequired},v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFan:e.isFan},n.onClick=n.onClick.bind(n),n}return s(t,e),i(t,[{key:"onClick",value:function(e){var t=this;e.preventDefault(),this.setState({isFan:!this.state.isFan}),(0,m.request)("/1/users/"+(0,h.getUserId)()+"/fan-of/"+this.props.showId,{method:this.state.isFan?"DELETE":"PUT"}).fail(function(){t.setState({isFan:!t.state.isFan})})}},{key:"render",value:function(){var e=(0,p.default)({btn:!0,"btn-fan":!0,"btn-fan__is-fan":this.state.isFan});return u.default.createElement("button",{className:e,onClick:this.onClick,title:this.state.isFan?"Unfan":"Become a Fan","aria-label":this.state.isFan?"Unfan":"Become a Fan"},this.state.isFan?u.default.createElement("span",{className:"fa fa-star"}):u.default.createElement("span",{className:"fa fa-star-o"}))}}]),t}(u.default.Component);v.propTypes=y,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(11);n(321);var p={showId:f.default.number.isRequired},h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("ul",{className:"nav nav-tabs col-margin nav-seplis"},u.default.createElement("li",{className:"nav-item"},u.default.createElement(d.Link,{className:"nav-link",to:"/show/"+this.props.showId+"/main",activeClassName:"active"},"Main")),u.default.createElement("li",{className:"nav-item"},u.default.createElement(d.Link,{className:"nav-link",to:"/show/"+this.props.showId+"/info",activeClassName:"active"},"Info")),u.default.createElement("li",{className:"nav-item"},u.default.createElement(d.Link,{className:"nav-link",to:"/show/"+this.props.showId+"/seasons",activeClassName:"active"},"Seasons")),u.default.createElement("li",{className:"nav-item"},u.default.createElement(d.Link,{className:"nav-link",to:"/show/"+this.props.showId+"/stats",activeClassName:"active"},"Stats")),u.default.createElement("li",{className:"nav-item ml-auto"},u.default.createElement(d.Link,{className:"nav-link",to:"/show/"+this.props.showId+"/edit",activeClassName:"active"},u.default.createElement("i",{className:"fa fa-cog"}))))}}]),t}(u.default.Component);h.propTypes=p,t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(3),p=n(4),h=n(81),m=r(h),y=n(82),v={showId:f.default.number.isRequired},b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={episode:null},n.eventGet=n.get.bind(n),document.addEventListener(y.EVENT_EPISODE_WATCHED_STATUS,n.eventGet),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(y.EVENT_EPISODE_WATCHED_STATUS,this.eventGet)}},{key:"get",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,p.isAuthed)()&&(0,d.request)("/1/shows/"+this.props.showId+"/episodes/last-watched").done(function(t){e.setState({episode:t})})}},{key:"render",value:function(){return this.state.episode?u.default.createElement(m.default,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0}):u.default.createElement("p",{className:"text-muted"},"No episodes has been watched")}}]),t}(u.default.Component);b.propTypes=v,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(84),p=r(d),h=n(3),m=n(4);n(323);var y={showId:f.default.number.isRequired,numberOfEpisodes:f.default.number},v={numberOfEpisodes:3},b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={episodes:[]},n.getEpisodes(),n}return s(t,e),i(t,[{key:"renderEpisodeNumber",value:function(e){return e.episode?u.default.createElement("span",null,"S",e.season," · E",e.episode,"  (",e.number,")"):u.default.createElement("span",null,"Episode ",e.number)}},{key:"getEpisodes",value:function(){var e=this,t=p.default.format((new Date).getTime(),"YYYY-MM-DD");(0,h.request)("/1/shows/"+this.props.showId+"/episodes",{query:{q:"air_date:["+t+" TO *]",per_page:this.props.numberOfEpisodes,sort:"number:asc"}}).done(function(t){e.setState({episodes:t})})}},{key:"renderCountdown",value:function(e){return e.air_datetime?new Date(e.air_datetime)-(new Date).getTime()>0?" · In "+(0,m.dateInDays)(e.air_datetime):" · "+(0,m.dateInDays)(e.air_datetime)+" ago":""}},{key:"render",value:function(){var e=this;return 0==this.state.episodes.length?u.default.createElement("p",{className:"text-muted"},"No ETA for new episodes."):u.default.createElement("div",{className:"latest-episodes-side-bar"},this.state.episodes.map(function(t,n){return u.default.createElement("div",{key:t.number,className:"item"},u.default.createElement("p",null,t.title),u.default.createElement("p",null,e.renderEpisodeNumber(t)),u.default.createElement("p",null,t.air_date," ",e.renderCountdown(t)))}))}}]),t}(u.default.Component);b.propTypes=y,b.defaultProps=v,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(3),p=n(4),h=n(81),m=r(h),y=n(82),v={showId:f.default.number.isRequired},b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={episode:null},n.eventGet=n.get.bind(n),document.addEventListener(y.EVENT_EPISODE_WATCHED_STATUS,n.eventGet),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(y.EVENT_EPISODE_WATCHED_STATUS,this.eventGet)}},{key:"get",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(0,p.isAuthed)())return void(0,d.request)("/1/shows/"+this.props.showId+"/episodes/1").done(function(t){e.setState({episode:t})});(0,d.request)("/1/shows/"+this.props.showId+"/episodes/to-watch").done(function(t){e.setState({episode:t})})}},{key:"render",value:function(){return null==this.state.episode?u.default.createElement("p",{className:"text-muted"},"No episodes to watch"):u.default.createElement(m.default,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0})}}]),t}(u.default.Component);b.propTypes=v,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(41),p=(r(d),n(3)),h=n(4),m=n(14),y=r(m),v=n(81),b=r(v),g=n(286),w=r(g),E=n(283),_=r(E),k={showId:f.default.number.isRequired,seasons:f.default.array.isRequired,seasonNumber:f.default.number.isRequired,onSeasonChange:f.default.func},S=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={episodes:[],seasonNumber:n.props.seasonNumber},n.onSeasonChange=n.onSeasonChange.bind(n),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getEpisodes()}},{key:"getEpisodes",value:function(){var e=this;if(!(this.props.seasons.length<1)){var t=(0,y.default)(window).scrollTop();this.setState({episodes:[]});var n=this.seasonEpisodeNumbers(this.state.seasonNumber),r={};r.q="number:["+n.from+" TO "+n.to+"]",r.per_page=n.total,(0,h.isAuthed)()&&(r.append="user_watched"),(0,p.request)("/1/shows/"+this.props.showId+"/episodes",{query:r}).done(function(n){e.setState({episodes:n},function(){(0,y.default)(window).scrollTop(t)})})}}},{key:"seasonEpisodeNumbers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=this.props.seasons[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.season==e)return s}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"onSeasonChange",value:function(e){var t=this,n=parseInt(e.target.value);this.setState({seasonNumber:n},function(){t.props.onSeasonChange?t.props.onSeasonChange(n):t.getEpisodes()})}},{key:"render",value:function(){var e=this;return this.props.seasons.length<1?u.default.createElement("div",{className:"alert alert-warning"},u.default.createElement("strong",null,"This show has 0 episodes.")):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-auto ml-auto order-md-12 mb-2 mb-md-0"},u.default.createElement("div",{className:"float-right"},u.default.createElement(w.default,{showId:this.props.showId,seasons:this.props.seasons}))),u.default.createElement("div",{className:"col-12 col-md-4"},u.default.createElement(_.default,{seasons:this.props.seasons,selectedSeason:this.state.seasonNumber,onChange:this.onSeasonChange}))),u.default.createElement("div",{className:"row show-season-list"},u.default.createElement("div",{className:"col-12 d-md-none col-margin"}),u.default.createElement("div",{className:"col-12"},u.default.createElement("div",{className:"row"},this.state.episodes.map(function(t,n){return u.default.createElement("div",{key:t.number,className:"col-12 col-md-6 col-lg-4"},u.default.createElement("div",{className:"d-none d-md-block col-margin"}),u.default.createElement(b.default,{showId:e.props.showId,episode:t}))})))))}}]),t}(u.default.Component);S.propTypes=k,t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d={seasons:f.default.array.isRequired,selectedSeason:f.default.number,onChange:f.default.func},p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("select",{className:"form-control",value:this.props.selectedSeason,onChange:this.props.onChange},this.props.seasons.map(function(e,t){return u.default.createElement("option",{key:e.season,value:e.season},"Season ",e.season)}))}}]),t}(u.default.Component);p.propTypes=d,t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d={seasons:f.default.array.isRequired,selectedNumber:f.default.number,onChange:f.default.func,name:f.default.string},p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"renderSeason",value:function(e){for(var t=[],n=e.from;n<=e.to;n++)t.push(u.default.createElement("option",{key:n,value:n},"S",e.season,": Episode ",n-e.from+1));return u.default.createElement("optgroup",{key:e.season,label:"Season "+e.season},t)}},{key:"render",value:function(){var e=this;return u.default.createElement("select",{name:this.props.name,className:"form-control",onChange:this.props.onChange,value:this.props.selectedNumber},this.props.seasons.map(function(t,n){return e.renderSeason(t)}))}}]),t}(u.default.Component);p.propTypes=d,t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(20),p=r(d),h=(n(4),n(3)),m=n(82);n(51),n(324);var y={showId:f.default.number.isRequired,episodeNumber:f.default.number.isRequired,watched:f.default.object},v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setWatchedState(),n.onWatchedIncr=n.onWatchedIncr.bind(n),n.onWatchedDecr=n.onWatchedDecr.bind(n),n.onWatchedClick=n.onWatchedClick.bind(n),n}return s(t,e),i(t,[{key:"setWatchedState",value:function(){this.props.watched?this.state=this.props.watched:this.state={times:0,position:0}}},{key:"watchedApiEndpoint",value:function(){return"/1/shows/"+this.props.showId+"/episodes/"+this.props.episodeNumber+"/watched"}},{key:"onWatchedIncr",value:function(e){var t=this;this.setState({times:++this.state.times}),(0,h.request)(this.watchedApiEndpoint(),{method:"PUT"}).done(function(e){(0,m.trigger_episode_watched_status)("incr",t.props.showId,t.props.episodeNumber),t.setState(e)}).fail(function(){t.setState({times:--t.state.times})})}},{key:"onWatchedDecr",value:function(e){var t=this;0!==this.state.times&&(this.setState({times:--this.state.times}),(0,h.request)(this.watchedApiEndpoint(),{data:{times:-1},method:"PUT"}).done(function(e){(0,m.trigger_episode_watched_status)("decr",t.props.showId,t.props.episodeNumber),t.setState(e)}).fail(function(){t.setState({times:++t.state.times})}))}},{key:"onWatchedClick",value:function(e){0===this.state.times&&this.onWatchedIncr(e)}},{key:"renderDropdown",value:function(){return u.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu"},u.default.createElement("li",{onClick:this.onWatchedIncr},u.default.createElement("i",{className:"fa fa-plus"})),u.default.createElement("li",{onClick:this.onWatchedDecr},u.default.createElement("i",{className:"fa fa-minus"})))}},{key:"render",value:function(){var e=(0,p.default)({btn:!0,"btn-watched":!0,watched:this.state.times>0,watching:this.state.position>0});return u.default.createElement("div",{className:"btn-group btn-episode-watched-group dropdown"},this.renderDropdown(),u.default.createElement("button",{className:e,"data-toggle":this.state.times>0?"dropdown":"",onClick:this.onWatchedClick},"Watched"),u.default.createElement("button",{className:"btn btn-times"},this.state.times))}}]),t}(u.default.Component);v.propTypes=y,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(284),p=r(d),h=n(3);n(4);n(54),n(51),n(325);var m={showId:f.default.number.isRequired,seasons:f.default.array.isRequired},y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showForm:!1,fromNumber:1,toNumber:1,saving:!1},n.dropdownButtonClick=n.dropdownButtonClick.bind(n),n.selectChange=n.selectChange.bind(n),n.formSubmit=n.formSubmit.bind(n),n}return s(t,e),i(t,[{key:"selectChange",value:function(e){this.state[e.target.name]=parseInt(e.target.value),this.state.fromNumber>this.state.toNumber&&(this.state.toNumber=this.state.fromNumber),this.setState(this.state)}},{key:"dropdownButtonClick",value:function(e){this.getNextToWatch()}},{key:"getNextToWatch",value:function(){var e=this;(0,h.request)("/1/shows/"+this.props.showId+"/episodes/to-watch").done(function(t){!1===e.state.showForm&&e.setState({showForm:!0}),e.setState({fromNumber:t.number,toNumber:t.number})}).fail(function(t){1301===t.responseJSON.code&&e.setState({showForm:!0})})}},{key:"formSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({saving:!0});var n=this.props.showId,r=this.state.fromNumber,a=this.state.toNumber;(0,h.request)("/1/shows/"+n+"/episodes/"+r+"-"+a+"/watched",{method:"PUT"}).fail(function(){t.setState({saving:!1})}).done(function(){location.reload()})}},{key:"renderForm",value:function(){return u.default.createElement("form",{onSubmit:this.formSubmit},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",null,"From episode"),u.default.createElement(p.default,{seasons:this.props.seasons,name:"fromNumber",onChange:this.selectChange,selectedNumber:this.state.fromNumber})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",null,"To episode"),u.default.createElement(p.default,{seasons:this.props.seasons,name:"toNumber",onChange:this.selectChange,selectedNumber:this.state.toNumber})),u.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.saving},this.state.saving?"Please wait...":"Watched"))}},{key:"render",value:function(){return u.default.createElement("div",{className:"dropdown watched-progression"},u.default.createElement("button",{className:"btn btn-dark btn-transparent dropdown-toggle","data-toggle":"dropdown",onClick:this.dropdownButtonClick},"Set progression"),u.default.createElement("div",{className:"dropdown-menu dropdown-menu-right"},this.state.showForm?this.renderForm():""))}}]),t}(u.default.Component);y.propTypes=m,t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(147),n(148);var r=n(3),a=n(40),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={React:n(0),ReactDOM:n(41),$:n(14),seplis:{Routes:n(145),apiClientSettings:r.apiClientSettings,Navbar:n(146),Chromecast:o.default}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(4),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,u.requireAuthed)(),n}return o(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12"},l.default.createElement("h1",null,"Account")),l.default.createElement("div",{className:"col-12"},l.default.createElement("a",{href:"/password"},"Change password")))}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(275),f=r(c),d=n(4),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,d.requireAuthed)(),n}return s(t,e),i(t,[{key:"render",value:function(){return u.default.createElement(f.default,null)}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=(n(3),n(13)),d=r(f),p=n(39),h=r(p),m=n(138),y=r(m),v=n(4),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,v.requireAuthed)(),n.onPageChange=n.pageChange.bind(n),n.state={loading:!0,items:[],jqXHR:null,page:n.props.location.query.page||1},n}return s(t,e),i(t,[{key:"setBrowserPath",value:function(){c.browserHistory.push({pathname:this.props.location.pathname,query:{page:this.state.page}})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){this.getItems()}},{key:"getItems",value:function(){var e=this;(0,m.getItems)(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?u.default.createElement("span",null,u.default.createElement("h2",null,"Countdown"),u.default.createElement(d.default,null)):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-9 col-md-10"},u.default.createElement("h2",null,"Countdown")),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),u.default.createElement(y.default,{items:this.state.items}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-9 col-md-10"}),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}]),t}(u.default.Component);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(3),c=n(11);n(144);var f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:null},n.onSubmit=n.onSubmit.bind(n),n}return o(t,e),s(t,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null});var n=e.target.email.value,r=e.target.password.value;(0,u.request)("/1/users",{data:{name:e.target.name.value,email:n,password:r}}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),t.signin(n,r)})}},{key:"signin",value:function(e,t){var n=this;(0,u.request)("/1/token",{data:{client_id:u.apiClientSettings.clientId,grant_type:"password",email:e,password:t}}).fail(function(e){n.setState({error:e.responseJSON})}).done(function(e){localStorage.setItem("access_token",e.access_token),location.href="/"})}},{key:"renderForm",value:function(){return l.default.createElement("form",{onSubmit:this.onSubmit},l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"Username"),this.renderFieldError("name"),l.default.createElement("input",{name:"name",type:"text",className:"form-control dark-form-control",autoFocus:!0,required:!0})),l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"Email"),this.renderFieldError("email"),l.default.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"test@example.net",required:!0})),l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"Password"),this.renderFieldError("password"),l.default.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Minimum 6 chars",required:!0})),l.default.createElement("a",{className:"btn",href:"/sign-in"},"Sign in"),l.default.createElement("button",{type:"submit",className:"btn btn-primary pull-right"},"Create user"))}},{key:"renderError",value:function(){if(this.state.error)return l.default.createElement("div",{className:"alert alert-warning capitalize-first-letter"},l.default.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,r=void 0;try{for(var a,o=this.state.error.errors[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.field==e)return l.default.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"render",value:function(){return l.default.createElement("div",{className:"standard-form"},l.default.createElement("div",{className:"logo"},"SEPLIS"),l.default.createElement("div",{className:"title"},"Create user"),this.renderError(),this.renderForm())}}]),t}(l.default.Component);t.default=(0,c.withRouter)(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=(n(3),n(13)),d=r(f),p=n(39),h=r(p),m=n(140),y=r(m),v=n(4),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,v.requireAuthed)(),n.onPageChange=n.pageChange.bind(n),n.state={loading:!0,items:[],jqXHR:null,page:n.props.location.query.page||1},n}return s(t,e),i(t,[{key:"setBrowserPath",value:function(){c.browserHistory.push({pathname:this.props.location.pathname,query:{page:this.state.page}})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){this.getItems()}},{key:"getItems",value:function(){var e=this;(0,m.getItems)(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?u.default.createElement("span",null,u.default.createElement("h2",null,"Episodes to Watch"),u.default.createElement(d.default,null)):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-9 col-md-10"},u.default.createElement("h2",null,"Episodes to Watch")),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),u.default.createElement(y.default,{items:this.state.items}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-9 col-md-10"}),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}]),t}(u.default.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=n(3),d=n(4),p=n(13),h=r(p),m=n(39),y=r(m),v=n(80),b=r(v),g=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,d.requireAuthed)(),n.onPageChange=n.pageChange.bind(n),n.state={loading:!0,shows:[],jqXHR:null,totalCount:"...",page:n.props.location.query.page||1},n}return s(t,e),i(t,[{key:"setBrowserPath",value:function(){c.browserHistory.push({pathname:this.props.location.pathname,query:{page:this.state.page}})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getShows()})}},{key:"componentDidMount",value:function(){this.getShows()}},{key:"getShows",value:function(){var e=this,t=(0,d.getUserId)();(0,f.request)("/1/users/"+t+"/fan-of",{query:{page:this.state.page,per_page:60}}).done(function(t,n,r){e.setState({shows:t,loading:!1,jqXHR:r,totalCount:r.getResponseHeader("X-Total-Count")})})}},{key:"render",value:function(){return 1==this.state.loading?u.default.createElement("span",null,u.default.createElement("h2",null,"Fan of ",this.state.totalCount," shows"),u.default.createElement(h.default,null)):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-9 col-md-10"},u.default.createElement("h2",null,"Fan of ",this.state.totalCount," shows")),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(y.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),u.default.createElement(b.default,{shows:this.state.shows}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-9 col-md-10"}),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(y.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}]),t}(u.default.Component);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(142),f=r(c),d=n(138),p=r(d),h=n(141),m=r(h),y=n(140),v=r(y),b=n(4),g=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,b.requireAuthed)(),n}return s(t,e),i(t,[{key:"render",value:function(){return u.default.createElement("span",null,u.default.createElement("h2",{className:"header"},u.default.createElement("a",{href:"/shows-watched"},"Recently watched")),u.default.createElement("div",{className:"slider col-margin"},u.default.createElement(f.default,{perPage:6})),u.default.createElement("h2",{className:"header"},u.default.createElement("a",{href:"/countdown"},"Countdown")),u.default.createElement("div",{className:"slider col-margin"},u.default.createElement(p.default,{perPage:6})),u.default.createElement("h2",{className:"header"},u.default.createElement("a",{href:"/recently-aired"},"Recently Aired")),u.default.createElement("div",{className:"slider col-margin"},u.default.createElement(m.default,{perPage:6})),u.default.createElement("h2",{className:"header"},u.default.createElement("a",{href:"/episodes-to-watch"},"Episodes To Watch")),u.default.createElement("div",{className:"slider col-margin"},u.default.createElement(v.default,{perPage:6})))}}]),t}(u.default.Component);t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(4),c=n(3),f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,u.requireAuthed)(),n.state={error:null,success:null,loading:!1},n.onSubmit=n.onSubmit.bind(n),n}return o(t,e),s(t,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null,success:null,loading:!0}),(0,c.request)("/1/users/current/change-password",{data:{password:this.password.value,new_password:this.newPassword.value}}).fail(function(e){t.password.focus(),t.setState({error:e.responseJSON,loading:!1})}).done(function(){t.setState({success:!0,loading:!1})}).always(function(){t.password.value="",t.newPassword.value=""})}},{key:"renderError",value:function(){if(this.state.error)return l.default.createElement("div",{className:"alert alert-warning capitalize-first-letter"},l.default.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,r=void 0;try{for(var a,o=this.state.error.errors[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.field==e)return l.default.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"renderSuccess",value:function(){if(this.state.success)return l.default.createElement("div",{className:"alert alert-success"},l.default.createElement("strong",null,"Your password was successfully changed."))}},{key:"renderButton",value:function(){return 0==this.state.loading?l.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"):1==this.state.loading?l.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!0},"Changing your password..."):void 0}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12"},l.default.createElement("h1",{className:"col-margin"},"Change password")),l.default.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderSuccess(),this.renderError(),l.default.createElement("form",{method:"post",onSubmit:this.onSubmit},l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"Current password"),this.renderFieldError("password"),l.default.createElement("input",{ref:function(t){return e.password=t},type:"password",name:"password",className:"form-control dark-form-control"})),l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,"New password"),this.renderFieldError("new_password"),l.default.createElement("input",{ref:function(t){return e.newPassword=t},type:"password",name:"new_password",className:"form-control dark-form-control"})),this.renderButton())))}}]),t}(l.default.Component);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(11),p=n(13),h=r(p),m=n(4),y=n(3),v={location:f.default.object.isRequired},b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,m.requireAuthed)(),n.onSubmit=n.onSubmit.bind(n),n.onDelete=n.onDelete.bind(n),n.onGiveAccess=n.onGiveAccess.bind(n),n.onRemoveUserAccess=n.onRemoveUserAccess.bind(n),n.state={loading:0,error:null,success:!1,playServer:{name:"",url:"",secret:""},users:[]},n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.location.query.id&&(this.getPlayServer(),this.getUsersWithAccess())}},{key:"incLoading",value:function(e){this.setState(function(t){return{loading:t.loading+e}})}},{key:"getPlayServer",value:function(){var e=this;this.incLoading(1),(0,y.request)("/1/users/"+(0,m.getUserId)()+"/play-servers/"+this.props.location.query.id).fail(function(e){}).done(function(t){e.setState({playServer:t})}).always(function(){e.incLoading(-1)})}},{key:"getUsersWithAccess",value:function(){var e=this;this.incLoading(1),(0,y.request)("/1/users/"+(0,m.getUserId)()+"/play-servers/"+this.props.location.query.id+"/users").fail(function(e){}).done(function(t){e.setState({users:t})}).always(function(){e.incLoading(-1)})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n="/1/users/"+(0,m.getUserId)()+"/play-servers";this.props.location.query.id&&(n+="/"+this.props.location.query.id),(0,y.request)(n,{method:this.props.location.query.id?"PUT":"POST",data:{name:this.name.value,url:this.url.value,secret:this.secret.value}}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(e){t.props.router.push("/play-server?id="+e.id)})}},{key:"onDelete",value:function(e){var t=this;e.preventDefault(),confirm("Are you sure you wan't to delete this play server?")&&(0,y.request)("/1/users/"+(0,m.getUserId)()+"/play-servers/"+this.props.location.query.id,{method:"DELETE"}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(){t.props.router.push("/play-servers")})}},{key:"onGiveAccess",value:function(e){var t=this;e.preventDefault();var n=e.target.name.value;(0,y.request)("/1/users",{query:{username:n}}).fail(function(e){alert(e.message)}).done(function(e){if(1!=e.length)return void alert("Unknown user: "+n);var r=t.props.location.query.id;(0,y.request)("/1/users/"+(0,m.getUserId)()+"/play-servers/"+r+"/users/"+e[0].id,{method:"PUT"}).fail(function(e){alert(e.message)}).done(function(){t.getUsersWithAccess()})})}},{key:"onRemoveUserAccess",value:function(e){var t=this;e.preventDefault();var n=this.props.location.query.id;(0,y.request)("/1/users/"+(0,m.getUserId)()+"/play-servers/"+n+"/users/"+e.target.userId.value,{method:"DELETE"}).fail(function(e){alert(e.message)}).done(function(){t.getUsersWithAccess()})}},{key:"renderUsers",value:function(){var e=this;return 0==this.state.users.length?u.default.createElement("div",{className:"alert alert-info"},"No one has access to this play server."):u.default.createElement("table",{className:"table"},u.default.createElement("tbody",null,this.state.users.map(function(t){return u.default.createElement("tr",{key:t.id},u.default.createElement("td",null,t.name),u.default.createElement("td",{width:"10px",className:"text-xs-right"},u.default.createElement("form",{onSubmit:e.onRemoveUserAccess},u.default.createElement("input",{type:"hidden",name:"userId",value:t.id}),u.default.createElement("button",{type:"submit",className:"btn-link"},u.default.createElement("i",{className:"fa fa-times"})))))})))}},{key:"renderGiveAccessForm",value:function(){return u.default.createElement("form",{className:"col-margin row",onSubmit:this.onGiveAccess},u.default.createElement("div",{className:"col-6"},u.default.createElement("input",{type:"text",name:"name",className:"form-control dark-form-control",placeholder:"Username"})),u.default.createElement("div",{className:"col-4"},u.default.createElement("button",{className:"btn btn-success"},"Give access")))}},{key:"renderUsersWithAccess",value:function(){if(this.props.location.query.id)return u.default.createElement("span",null,u.default.createElement("h2",{className:"col-margin"},"Users with access"),this.renderGiveAccessForm(),this.renderUsers())}},{key:"renderDeleteButton",value:function(){if(this.props.location.query.id)return u.default.createElement("button",{className:"btn btn-danger",onClick:this.onDelete},"Delete")}},{key:"renderError",value:function(){if(this.state.error)return u.default.createElement("div",{className:"alert alert-warning capitalize-first-letter col-margin"},u.default.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,r=void 0;try{for(var a,o=this.state.error.errors[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.field==e)return u.default.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"render2",value:function(){var e=this;return this.state.loading>0?u.default.createElement(h.default,null):u.default.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderError(),u.default.createElement("form",{method:"post",className:"col-margin",onSubmit:this.onSubmit},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",null,"Name"),this.renderFieldError("name"),u.default.createElement("input",{ref:function(t){return e.name=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.name,placeholder:"My play server"})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",null,"URL"),this.renderFieldError("url"),u.default.createElement("input",{ref:function(t){return e.url=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.url,placeholder:"https://example.net"})),u.default.createElement("div",{className:"form-group"},u.default.createElement("label",null,"Secret"),this.renderFieldError("secret"),u.default.createElement("input",{ref:function(t){return e.secret=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.secret,placeholder:"A super long secret"})),u.default.createElement("button",{type:"submit",className:"btn btn-primary m-r-1"},"Save"),this.renderDeleteButton()),this.renderUsersWithAccess())}},{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12"},u.default.createElement("h1",{className:"col-margin"},"Play server")),this.render2())}}]),t}(u.default.Component);b.propTypes=v,t.default=(0,d.withRouter)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=n(13),d=r(f),p=n(4),h=n(3),m=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,p.requireAuthed)(),n.state={loading:!0,playServers:[]},n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getPlayServers()}},{key:"getPlayServers",value:function(){var e=this;this.setState({loading:!0}),(0,h.request)("/1/users/"+(0,p.getUserId)()+"/play-servers",{body:{per_page:100}}).done(function(t){e.setState({playServers:t,loading:!1})})}},{key:"renderPlayServers",value:function(){return 0==this.state.playServers.length?u.default.createElement("div",{className:"alert alert-info"},"You have no play servers."):u.default.createElement("table",{className:"table"},u.default.createElement("tbody",null,this.state.playServers.map(function(e){return u.default.createElement("tr",{key:e.id},u.default.createElement("td",null,e.name),u.default.createElement("td",null,e.url),u.default.createElement("td",{width:"10px"},u.default.createElement(c.Link,{to:"/play-server?id="+e.id},u.default.createElement("i",{className:"fa fa-pencil-square-o"}))))})))}},{key:"render2",value:function(){return this.state.loading?u.default.createElement(d.default,null):u.default.createElement("div",{className:"col-12 col-sm-7 col-md-5"},u.default.createElement(c.Link,{to:"/play-server",className:"btn btn-success col-margin"},"New play server"),this.renderPlayServers())}},{key:"render",value:function(){return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12"},u.default.createElement("h1",{className:"col-margin"},"Play servers")),this.render2())}}]),t}(u.default.Component);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=(n(3),n(13)),d=r(f),p=n(39),h=r(p),m=n(141),y=r(m),v=n(4),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,v.requireAuthed)(),n.onPageChange=n.pageChange.bind(n),n.state={loading:!0,items:[],jqXHR:null,page:n.props.location.query.page||1},n}return s(t,e),i(t,[{key:"setBrowserPath",value:function(){c.browserHistory.push({pathname:this.props.location.pathname,query:{page:this.state.page}})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){this.getItems()}},{key:"getItems",value:function(){var e=this;(0,m.getItems)(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?u.default.createElement("span",null,u.default.createElement("h2",null,"Recently aired"),u.default.createElement(d.default,null)):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-9 col-md-10"},u.default.createElement("h2",null,"Recently aired")),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),u.default.createElement(y.default,{items:this.state.items}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-9 col-md-10"}),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}]),t}(u.default.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=(n(3),n(13)),d=r(f),p=n(39),h=r(p),m=n(142),y=r(m),v=n(4),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,v.requireAuthed)(),n.onPageChange=n.pageChange.bind(n),n.state={loading:!0,items:[],jqXHR:null,page:n.props.location.query.page||1,totalCount:"..."},n}return s(t,e),i(t,[{key:"setBrowserPath",value:function(){c.browserHistory.push({pathname:this.props.location.pathname,query:{page:this.state.page}})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){this.getItems()}},{key:"getItems",value:function(){var e=this;(0,m.getItems)(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1,totalCount:t.jqXHR.getResponseHeader("X-Total-Count")})})}},{key:"render",value:function(){return 1==this.state.loading?u.default.createElement("span",null,u.default.createElement("h2",null,"Watched ",this.state.totalCount," shows"),u.default.createElement(d.default,null)):u.default.createElement("span",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-sm-9 col-md-10"},u.default.createElement("h2",null,"Watched ",this.state.totalCount," shows")),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),u.default.createElement(y.default,{items:this.state.items}),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-9 col-md-10"}),u.default.createElement("div",{className:"col-sm-3 col-md-2"},u.default.createElement(h.default,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}]),t}(u.default.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(14),f=(r(c),n(3));n(144);var d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:"",email:"",password:""},n.onSignIn=n.onSignIn.bind(n),n.onDataChange=n.onDataChange.bind(n),n}return s(t,e),i(t,[{key:"onSignIn",value:function(e){var t=this;e.preventDefault(),(0,f.request)("/1/token",{data:{client_id:f.apiClientSettings.clientId,grant_type:"password",email:this.state.email,password:this.state.password}}).fail(function(e){t.setState({error:e.responseJSON.message,password:""})}).done(function(e){localStorage.setItem("access_token",e.access_token),t.saveUserIdAndRedirect()})}},{key:"saveUserIdAndRedirect",value:function(){(0,f.request)("/1/users/current").done(function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),location.href="/"})}},{key:"onDataChange",value:function(e){this.state[e.target.name]=e.target.value,this.setState({error:""})}},{key:"renderForm",value:function(){return u.default.createElement("form",{onSubmit:this.onSignIn},u.default.createElement("div",{className:"form-group"},u.default.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"Email or name",onChange:this.onDataChange,value:this.state.email,autoFocus:!0,required:!0})),u.default.createElement("div",{className:"form-group"},u.default.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Password",onChange:this.onDataChange,value:this.state.password,required:!0})),u.default.createElement("a",{className:"btn",href:"/create-user"},"Create user"),u.default.createElement("button",{type:"submit",className:"btn btn-primary pull-right"},"Sign in"))}},{key:"renderError",value:function(){if(this.state.error)return u.default.createElement("div",{className:"alert alert-warning capitalize-first-letter",role:"alert"},u.default.createElement("strong",null,this.state.error))}},{key:"render",value:function(){return u.default.createElement("div",{className:"standard-form"},u.default.createElement("div",{className:"logo"},"SEPLIS"),u.default.createElement("div",{className:"title"},"Sign in"),this.renderError(),this.renderForm())}}]),t}(u.default.Component);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(13),f=r(c),d=n(4),p=n(3),h=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,d.requireAuthed)(),n.state={loading:!0,stats:null},n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getStats()}},{key:"getStats",value:function(){var e=this,t=(0,d.getUserId)();(0,p.request)("/1/users/"+t+"/show-stats").done(function(t){e.setState({loading:!1,stats:t})})}},{key:"render",value:function(){return this.state.loading?u.default.createElement("span",null,u.default.createElement(f.default,null),u.default.createElement("center",null,u.default.createElement("h2",null,"Loading your stats"))):u.default.createElement("span",null,u.default.createElement("h2",null,"Your TV show stats"),u.default.createElement("table",{className:"table table-striped"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"220px"},"Fan of"),u.default.createElement("td",null,this.state.stats.fan_of," shows")),u.default.createElement("tr",null,u.default.createElement("th",null,"Time spent watching"),u.default.createElement("td",null,Math.round(this.state.stats.episodes_watched_minutes/60*10)/10," hours")),u.default.createElement("tr",null,u.default.createElement("th",null,"Episodes watched"),u.default.createElement("td",null,this.state.stats.episodes_watched)),u.default.createElement("tr",null,u.default.createElement("th",null,"Watched episodes from"),u.default.createElement("td",null,this.state.stats.shows_watched," shows")))))}}]),t}(u.default.Component);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(139),p=r(d),h=n(53),m=r(h),y=n(52),v=n(3),b={show:f.default.object},g=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.submit.bind(n),n.state={error:null,success:null,loading:!1},n}return s(t,e),i(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0});var n=(0,y.unflatten)((0,m.default)(e.target,{hash:!0}));(0,v.request)("/1/shows/"+this.props.show.id,{data:n,method:"PUT"}).done(function(e){t.setState({success:e}),(0,v.request)("/1/shows/"+t.props.show.id+"/update",{method:"POST"})}).fail(function(e){t.setState({error:e.responseJSON})}).always(function(){t.setState({loading:!1})})}},{key:"renderError",value:function(){return this.state.error?u.default.createElement("div",{className:"alert alert-danger"},this.state.error.message):""}},{key:"renderSuccess",value:function(){return this.state.success?u.default.createElement("div",{className:"alert alert-success"},"The show was successfully updated."):""}},{key:"render",value:function(){return u.default.createElement("form",{method:"post",onSubmit:this.onSubmit},u.default.createElement(p.default,{show:this.props.show}),this.renderError(),this.renderSuccess(),u.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Saving...":"Save"))}}]),t}(u.default.Component);g.propTypes=b,t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"statusToText",value:function(e){switch(e){case 1:return"Running";case 2:return"Ended";default:return"Unknown"}}},{key:"renderGeneral",value:function(){var e=this.props.show;return l.default.createElement("div",{className:"col-12"},l.default.createElement("table",{className:"table table-sm borderless"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Status"),l.default.createElement("td",null,this.statusToText(e.status))),l.default.createElement("tr",null,l.default.createElement("th",{width:"100"},"Premiered"),l.default.createElement("td",null,e.premiered||"unknown")),l.default.createElement("tr",null,l.default.createElement("th",null,"Runtime"),l.default.createElement("td",null,e.runtime?e.runtime+" minutes":"Unknown")),l.default.createElement("tr",null,l.default.createElement("th",null,"Genres"),l.default.createElement("td",null,e.genres.join(", "))))))}},{key:"renderDescription",value:function(){var e=this.props.show.description;return l.default.createElement("div",{className:"col-12 col-md-12"},l.default.createElement("p",{className:"text-justify"},e.text,l.default.createElement("br",null),l.default.createElement("font",{className:"text-muted"},"Source:")," ",l.default.createElement("a",{href:e.url,target:"_blank"},e.title)))}},{key:"render",value:function(){return l.default.createElement("div",{className:"row"},this.renderGeneral(),this.renderDescription())}}]),t}(l.default.Component);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(281),p=r(d),h=n(280),m=r(h),y=n(279),v=r(y),b=(f.default.object.isRequired,function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),i(t,[{key:"renderAirDates",value:function(){if(!(this.props.show.status>1))return u.default.createElement("div",{className:"col-12 col-lg-4 col-margin"},u.default.createElement("h4",{className:"header"},"Next to air"),u.default.createElement(m.default,{showId:parseInt(this.props.show.id)}))}},{key:"renderNextToWatch",value:function(){return u.default.createElement("div",{className:"col-12 col-lg-8 col-margin"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 col-margin"},u.default.createElement("h4",{className:"header"},"To watch"),u.default.createElement(p.default,{showId:parseInt(this.props.show.id),numberOfEpisodes:2})),u.default.createElement("div",{className:"col-12"},u.default.createElement("h4",{className:"header"},"Previous watched"),u.default.createElement(v.default,{showId:parseInt(this.props.show.id)}))))}},{key:"render",value:function(){return u.default.createElement("div",{className:"row"},this.renderNextToWatch(),this.renderAirDates())}}]),t}(u.default.Component));t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(139),f=r(c),d=n(53),p=r(d),h=n(52),m=n(3),y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.submit.bind(n),n.state={success:null,error:null,loading:!1},n}return s(t,e),i(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0});var n=(0,h.unflatten)((0,p.default)(e.target,{hash:!0}));(0,m.request)("/1/shows",{data:n,method:"POST"}).done(function(e){t.setState({success:e})}).fail(function(e){t.setState({error:e.responseJSON})}).always(function(){t.setState({loading:!1})})}},{key:"renderError",value:function(){if(!this.state.error)return"";switch(this.state.error.code){case 1403:var e=this.state.error.extra.show.title||"the show";return u.default.createElement("div",{className:"alert alert-danger"},this.state.error.message,".",u.default.createElement("br",null),u.default.createElement("a",{href:"/show/"+this.state.error.extra.show.id},"Go to ",e),".");default:return u.default.createElement("div",{className:"alert alert-danger"},this.state.error.message)}}},{key:"renderSuccess",value:function(){return u.default.createElement("span",null,u.default.createElement("h1",null,"Show successfully created"),u.default.createElement("div",{className:"alert alert-success"},"The show has been created. It will be imported shortly.",u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement("a",{href:"/show/"+this.state.success.id},"Go to the show")),u.default.createElement("li",null,u.default.createElement("a",{href:"/show-new"},"Create another show")))))}},{key:"render",value:function(){return null!=this.state.success?this.renderSuccess():u.default.createElement("form",{method:"post",onSubmit:this.onSubmit},u.default.createElement("h1",null,"New show"),u.default.createElement(f.default,null),this.renderError(),u.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Creating...":"Create"))}}]),t}(u.default.Component);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(136),f=r(c),d=n(13),p=r(d),h=n(40),m=r(h),y=n(3),v=(n(3),n(4)),b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loadingPlayServers:!0,loadingShow:!0,loadingEpisode:!0,loadingNextEpisode:!0,loadingLang:!0,loadingStartTime:!0,playServer:null,playServerError:null,show:null,episode:null,nextEpisode:null,audio_lang:null,subtitle_lang:null,metadata:null,startTime:0},n.onAudioChange=n.audioChange.bind(n),n.onSubtitleChange=n.subtitleChange.bind(n),n.onTimeUpdate=n.timeUpdate.bind(n),n.showId=n.props.params.showId,n.number=n.props.params.number,n.session=(0,v.guid)(),n.lastPos=0,n.cast=null,n.markedAsWatched=!1,n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){this.getShow(),this.getEpisode(),this.getPlayServers(),this.getNextEpisode(),this.getLanguage(),this.getStartTime()}},{key:"timeUpdate",value:function(e){var t=this;if((e=Math.floor(e))!=this.lastPos&&(this.lastPos=e,!(e<10)&&e%10==0)){e/100*10>parseInt(this.state.metadata.format.duration)-e?this.markedAsWatched||(0,y.request)("/1/shows/"+this.showId+"/episodes/"+this.number+"/watched",{method:"PUT"}).done(function(){t.markedAsWatched=!0}):(this.markedAsWatched=!1,(0,y.request)("/1/shows/"+this.showId+"/episodes/"+this.number+"/watching",{method:"PUT",data:{position:e}}))}}},{key:"getPlayServers",value:function(){var e=this,t="/1/shows/"+this.showId+"/episodes/"+this.number+"/play-servers";(0,c.getPlayServer)(t).then(function(t){e.setState({loadingPlayServers:!1,playServer:t.playServer,metadata:t.metadata})}).catch(function(t){e.setState({loadingPlayServers:!1,playServerError:t})})}},{key:"getShow",value:function(){var e=this;(0,y.request)("/1/shows/"+this.showId).done(function(t){e.setState({show:t})}).always(function(){e.setState({loadingShow:!1})})}},{key:"getEpisode",value:function(){var e=this,t=parseInt(this.number);(0,y.request)("/1/shows/"+this.showId+"/episodes/"+t).done(function(t){e.setState({episode:t})}).always(function(){e.setState({loadingEpisode:!1})})}},{key:"getNextEpisode",value:function(){var e=this,t=parseInt(this.number)+1;(0,y.request)("/1/shows/"+this.showId+"/episodes/"+t).done(function(t){e.setState({nextEpisode:t})}).always(function(){e.setState({loadingNextEpisode:!1})})}},{key:"getLanguage",value:function(){var e=this;(0,y.request)("/1/users/"+(0,v.getUserId)()+"/subtitle-lang/shows/"+this.showId).done(function(t){t||(t={}),e.setState({audio_lang:t.audio_lang||null,subtitle_lang:t.subtitle_lang||null})}).always(function(){e.setState({loadingLang:!1})})}},{key:"getStartTime",value:function(){var e=this;(0,y.request)("/1/shows/"+this.showId+"/episodes/"+this.number+"/watched").done(function(t){t?e.setState({startTime:t.position}):e.setState({startTime:0})}).always(function(){e.setState({loadingStartTime:!1})})}},{key:"audioChange",value:function(e){""==e&&(e=null),this.saveSub({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.saveSub({subtitle_lang:e})}},{key:"saveSub",value:function(e){(0,y.request)("/1/users/"+(0,v.getUserId)()+"/subtitle-lang/shows/"+this.showId,{method:"PATCH",data:e})}},{key:"getInfo",value:function(){return this.state.show?{title:this.state.show.title}:null}},{key:"episodeTitle",value:function(e,t){return(0,v.episodeTitle)(e,t)}},{key:"getPlayNextInfo",value:function(){if(!this.state.show||!this.state.nextEpisode)return null;var e=this.state.show,t=this.state.nextEpisode;return{title:this.episodeTitle(e,t),url:"/show/"+e.id+"/episode/"+t.number+"/play"}}},{key:"getBackToInfo",value:function(){return this.state.show?{title:"Back to: "+this.state.show.title,url:"/show/"+this.showId}:null}},{key:"getCurrentInfo",value:function(){if(!this.state.show||!this.state.episode)return null;var e=this.state.show,t=e.title+" - ";return t+=this.episodeTitle(e,this.state.episode),{title:t}}},{key:"initCast",value:function(){var e=this;this.cast.addEventListener("isConnected",function(t){t.value&&confirm("Play "+e.getCurrentInfo().title+" on "+e.cast.getFriendlyName()+"?")&&((0,y.request)(e.getPlayUrl()+"&action=cancel"),e.cast.playEpisode(e.showId,e.number).then(function(){location.href="/show/"+e.showId}))})}},{key:"loadCast",value:function(){this.cast||(this.cast=new m.default,this.cast.load(this.initCast.bind(this)))}},{key:"getPlayUrl",value:function(){return this.state.playServer.play_server.url+"/play?play_id="+this.state.playServer.play_id+"&session="+this.session}},{key:"renderPlayServerErrorMessage",value:function(){return 2==this.state.playServerError.code?u.default.createElement("span",null,u.default.createElement("b",null,this.state.show.title," ",(0,v.episodeTitle)(this.state.show,this.state.episode))," is not on any of your play servers."):this.state.playServerError.message}},{key:"renderPlayServerError",value:function(){return u.default.createElement("div",{className:"alert alert-warning",style:{width:"75%",margin:"auto",marginTop:"100px"}},u.default.createElement("h3",null,this.renderPlayServerErrorMessage()),"Go back to ",u.default.createElement("a",{href:"/show/"+this.showId},this.state.show.title))}},{key:"render",value:function(){return this.state.loadingPlayServers||this.state.loadingShow||this.state.loadingEpisode||this.state.loadingNextEpisode||this.state.loadingLang||this.state.loadingStartTime?u.default.createElement(p.default,null):this.state.playServerError?this.renderPlayServerError():(this.loadCast(),u.default.createElement(f.default,{playServerUrl:""+this.state.playServer.play_server.url,playId:this.state.playServer.play_id,metadata:this.state.metadata,info:this.getInfo(),nextInfo:this.getPlayNextInfo(),backToInfo:this.getBackToInfo(),currentInfo:this.getCurrentInfo(),onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange,audio_lang:this.state.audio_lang,subtitle_lang:this.state.subtitle_lang,onTimeUpdate:this.onTimeUpdate,startTime:this.state.startTime,session:this.session}))}}]),t}(u.default.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(11),f=n(282),d=r(f),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onSeasonChange=n.seasonChange.bind(n);var r=parseInt(n.props.location.query.season)||null;return r||n.props.show.seasons.length>0&&(r=n.props.show.seasons.slice(-1)[0].season),n.state={season:r},n}return s(t,e),i(t,[{key:"seasonChange",value:function(e){this.setState({season:e}),c.browserHistory.push({pathname:this.props.location.pathname,query:{season:e}})}},{key:"render",value:function(){return u.default.createElement(d.default,{key:this.state.season,showId:this.props.show.id,seasons:this.props.show.seasons,seasonNumber:this.state.season,onSeasonChange:this.onSeasonChange})}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),f=r(c),d=n(3),p=n(4),h=n(13),m=r(h),y=n(277),v=r(y),b=n(278),g=r(b);n(326);var w={params:f.default.object.isRequired},E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={show:null},n.getShow(),n}return s(t,e),i(t,[{key:"getShow",value:function(){var e=this,t={};(0,p.isAuthed)()&&(t.append="is_fan"),(0,d.request)("/1/shows/"+parseInt(this.props.params.showId),{query:t}).done(function(t){e.setState({show:t})})}},{key:"renderShow",value:function(){var e=this.state.show;return u.default.createElement("div",null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-12 show-header"},u.default.createElement("div",{className:"btn-fan__pull-left"},u.default.createElement(v.default,{showId:e.id,isFan:e.is_fan||!1})),u.default.createElement("div",{className:"title"},e.title," ",u.default.createElement("small",{className:"text-muted"},null!=e.premiered?e.premiered.substring(0,4):""))),u.default.createElement("div",{className:"col-4 col-sm-4 col-md-4 col-margin d-none d-sm-block"},u.default.createElement("img",{src:null!=e.poster_image?e.poster_image.url+"@SX360":"",width:"100%"})),u.default.createElement("div",{className:"col-4 d-sm-none"}),u.default.createElement("div",{className:"col-12 col-sm-8"},u.default.createElement(g.default,{showId:parseInt(this.state.show.id)}),u.default.cloneElement(this.props.children,{show:e}))))}},{key:"renderShowImporting",value:function(){var e=this;return setTimeout(function(){e.getShow()},5e3),u.default.createElement("center",null,u.default.createElement("h1",null,"The show is currently in the import queue"),u.default.createElement("h2",null,"Check back later!"),u.default.createElement("a",{className:"btn btn-warning",href:"/show/"+this.state.show.id+"/edit"},"Edit show"),u.default.createElement(m.default,null))}},{key:"render",value:function(){return this.state.show?0!=this.state.show.status||this.props.location.pathname.endsWith("/edit")||null==this.state.show.importers.info?this.renderShow():this.renderShowImporting():u.default.createElement(m.default,null)}}]),t}(u.default.Component);E.propTypes=w,t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(3),c=n(4),f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={userStats:null},n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){(0,c.isAuthed)()&&this.getUserStats()}},{key:"getUserStats",value:function(){var e=this;(0,u.request)("/1/shows/"+this.props.show.id+"/user-stats").done(function(t){e.setState({userStats:t})})}},{key:"countEpisodes",value:function(){if(!this.props.show.seasons)return 0;var e=0,t=!0,n=!1,r=void 0;try{for(var a,o=this.props.show.seasons[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){e+=a.value.total}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"renderUserStats",value:function(){return this.state.userStats?l.default.createElement("span",null,l.default.createElement("h2",{className:"mb-1 mt-3"},"Your stats"),l.default.createElement("table",{className:"table table-striped"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",{width:"200px"},"Episodes watched"),l.default.createElement("td",null,this.state.userStats.episodes_watched)),l.default.createElement("tr",null,l.default.createElement("th",null,"Time spent watching"),l.default.createElement("td",null,Math.round(this.state.userStats.episodes_watched_minutes/60*10)/10," hours"))))):null}},{key:"render",value:function(){var e=this.countEpisodes();return l.default.createElement("span",null,this.renderUserStats(),l.default.createElement("h2",{className:"mb-1"},"Show stats"),l.default.createElement("table",{className:"table table-striped"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",{width:"200px"},"Total episodes"),l.default.createElement("td",null,e)),l.default.createElement("tr",null,l.default.createElement("th",null,"Hours worth of content"),l.default.createElement("td",null,Math.round(this.props.show.runtime*e/60*10)/10," hours")))))}}]),t}(l.default.Component);t.default=f},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}],[287]);
//# sourceMappingURL=app.js.map