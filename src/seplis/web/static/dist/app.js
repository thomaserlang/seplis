var exports=function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],f=0,p=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonpexports=window.webpackJsonpexports||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;return a.push([68,1]),n()}({22:function(e,t,n){},23:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(17),i=n.n(a),s=n(3),c=n(4),u=n(2),l=n.n(u);function f(e){401===e.status&&1009===e.responseJSON.code&&(localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),localStorage.removeItem("accessLevel"),location.href="/sign-in")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.a.param(t.query||"",!0),r=t.method||(t.data?"POST":"GET"),o=t.data,a=t.localRequest||!1;void 0===o||"GET"===r||o instanceof FormData||(o=JSON.stringify(o)),e.startsWith("http")||a||(e=seplisBaseUrl+e),n&&(-1===e.indexOf("?")?e+="?"+n:e+="&"+n);var i={Accept:"application/json; charset=utf-8"};if(e.startsWith(seplisBaseUrl)){var s=localStorage.getItem("access_token");s&&(i.Authorization="Bearer ".concat(s))}return l.a.ajax({url:e,method:r,data:o,contentType:"application/json",headers:i,error:f})}var d=n(11),h=n.n(d);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){return null!==localStorage.getItem("access_token")}function v(){if(!b())throw location.href="/sign-in","Not authed!";return!0}function g(){return v(),localStorage.getItem("user_id")||0}function w(){return localStorage.getItem("user_level")||null}function E(e,t){return(e=e.toString()).length<t?E("0"+e,t):e}function S(e,t){switch(e.episode_type){case 1:return"Episode ".concat(t.number);case 2:return"S".concat(E(t.season,2)," Â· E").concat(E(t.episode,2)," (").concat(t.number,")");case 3:return"Airdate: ".concat(t.air_date)}}function O(e,t){switch(e.episode_type){case 1:return"".concat(t.number,": ").concat(t.title);case 2:return"S".concat(E(t.season,2),"E").concat(E(t.episode,2),": ").concat(t.title);case 3:return"".concat(t.air_date,": ").concat(t.title)}}function k(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function j(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),(t>0?t+":":"")+n+":"+r}function P(e){"string"==typeof e&&(e=new Date(e));var t,n,r,o=Math.abs(e-(new Date).getTime())/1e3,a=[],i=y(N(o,60),2);t=i[0],o=i[1];var s=y(N(t,60),2);n=s[0],t=s[1];var c=y(N(n,24),2);return r=c[0],n=c[1],r>0&&a.push(C(r,"day")),n>0&&a.push(C(n,"hour")),t>0&&n<1&&r<1&&a.push(C(t,"minute")),a.join(" ")}function _(e,t){var n,r,o,a,i,s=Math.round(e/60/60*10)/10;if(e<60)return C(e,"second");var c=y(N(e,60),2);n=c[0],e=c[1];var u=y(N(n,60),2);r=u[0],n=u[1];var l=y(N(r,24),2);o=l[0],r=l[1];var f=y(N(o,30.42),2);a=f[0],o=f[1];var p=y(N(a,12),2);i=p[0],a=p[1];var d=[];i>0&&d.push(C(Math.round(i),"year")),a>0&&d.push(C(Math.round(a),"month")),o>0&&d.push(C(Math.round(o),"day")),r>0&&d.push(C(Math.round(r),"hour")),n>0&&d.push(C(Math.round(n),"minute"));var h=d.join(", ");if(t&&s>=24){var m=C(s,"hour");h+=" (".concat(m,")")}return h}function C(e,t){return 1!=e&&(t+="s"),"".concat(e," ").concat(t)}function N(e,t){return[Math.floor(e/t),e%t]}function R(){return h.a.parse(location.search)}n(36);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,n,r,a=M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onInputChanged=t.inputChanged.bind(L(t)),t.onKeyDown=t.keyDown.bind(L(t)),t.onMouseOver=t.mouseOver.bind(L(t)),t.onMouseOut=t.mouseOut.bind(L(t)),t.onSubmit=t.submit.bind(L(t)),t.onClick=t.click.bind(L(t)),t.state={results:[],show:!1,selectedResultId:null},t.requesting=null,t.selectedResultId=null,t.onDocumentClick=t.documentClick.bind(L(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.form.contains(e.target)||this.setState({show:!1})}},{key:"inputChanged",value:function(e){var t=this;this.requesting&&this.requesting.abort(),""!=e.target.value.trim()?this.requesting=p("/1/shows",{query:{title_suggest:e.target.value.trim(),per_page:10,fields:"title,premiered,poster_image"}}).done((function(e){t.suggestNode.scrollTop=0,t.setState({results:e,show:!0,selectedResultId:null}),t.setNextSelectedId(0)})):this.setState({results:[],show:!1,selectedResultId:null})}},{key:"keyDown",value:function(e){switch(e.keyCode){case 38:this.setNextSelectedId(-1);break;case 40:this.setNextSelectedId(1);break;case 13:this.state.selectedResultId&&(location.href="/show/".concat(this.state.selectedResultId))}}},{key:"mouseOver",value:function(e){this.state.selectedResultId=parseInt(e.target.getAttribute("data-id")),this.setNextSelectedId(0,!0)}},{key:"mouseOut",value:function(e){this.setState({selectedResultId:null})}},{key:"setNextSelectedId",value:function(e,t){if(0!=this.state.results.length){var n=-1;if(this.state.selectedResultId){n=0;var r,o=I(this.state.results);try{for(o.s();!(r=o.n()).done&&r.value.id!=this.state.selectedResultId;)n++}catch(e){o.e(e)}finally{o.f()}}(n+=e)<0&&(n=0),n>this.state.results.length-1&&(n=this.state.results.length-1);var a=this.state.results[n].id;if(this.setState({selectedResultId:a}),!t){var i=document.getElementById("sresult-"+a).offsetHeight;if((n+1)*i>this.suggestNode.offsetHeight){var s=n-Math.floor(this.suggestNode.offsetHeight/i)+1,c=this.suggestNode.offsetHeight%i;this.suggestNode.scrollTop=s*i+c}else this.suggestNode.scrollTop=0}}}},{key:"submit",value:function(e){e.preventDefault()}},{key:"click",value:function(e){this.state.selectedResultId&&(location.href="/show/".concat(this.state.selectedResultId))}},{key:"resultClassName",value:function(e){var t="result";return e.id==this.state.selectedResultId&&(t+=" selected"),t}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{id:"search",className:"form-inline",onSubmit:this.onSubmit,ref:function(t){return e.form=t}},o.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search",onChange:this.onInputChanged,onKeyDown:this.onKeyDown}),o.a.createElement("div",{className:"suggest",ref:function(t){return e.suggestNode=t},style:{display:this.state.show?"block":"none"}},this.state.results.map((function(t){return o.a.createElement("div",{key:t.id,id:"sresult-".concat(t.id),"data-id":t.id,href:"/show/".concat(t.id),className:e.resultClassName(t),onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut,onClick:e.onClick},o.a.createElement("div",{className:"img"},o.a.createElement("img",{src:null!=t.poster_image?t.poster_image.url+"@SY100":""})),o.a.createElement("div",{className:"title"},t.title," (",t.premiered?t.premiered.substring(0,4):"",")"))}))))}}])&&D(t.prototype,n),r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component),F=n(1),H=n.n(F),W=n(5),X=n.n(W);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q={title:H.a.string,description:H.a.string,url:H.a.string},Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(i,e);var t,n,r,a=Y(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onNextClick=t.nextClick.bind($(t)),t}return t=i,(n=[{key:"nextClick",value:function(e){location.href=this.props.url}},{key:"render",value:function(){return o.a.createElement("a",{className:"fas fa-step-forward",title:this.props.title,href:this.props.url})}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Z.propTypes=Q;var ee=Z;n(39);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ie(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce={onChange:H.a.func},ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(i,e);var t,n,r,a=oe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onSliderMouseMove=t.sliderMouseMove.bind(ie(t)),t.onSliderClick=t.sliderClick.bind(ie(t)),t.onIconClick=t.iconClick.bind(ie(t)),t.state={percent:100*(localStorage.getItem("volume")||1),show:!1,muted:!1},t.onDocumentClick=t.documentClick.bind(ie(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=localStorage.getItem("volume")||1;this.props.onChange&&this.props.onChange(e),document.addEventListener("click",this.onDocumentClick),document.addEventListener("ontouchstart",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("ontouchstart",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.icon.contains(e.target)||this.setState({show:!1})}},{key:"sliderMouseMove",value:function(e){1==e.buttons&&this.onSliderClick(e)}},{key:"sliderClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target.querySelector(".scrubber"),n=e.clientY;n-=e.target.offsetTop+t.offsetTop,(n=t.offsetHeight-n)>t.offsetHeight&&(n=t.offsetHeight),n<0&&(n=0);var r=1/t.offsetHeight*n;r<0&&(r=0),this.setState({percent:100*r}),this.props.onChange&&this.props.onChange(r),localStorage.setItem("volume",r)}},{key:"iconClick",value:function(e){this.setState({show:!this.state.show})}},{key:"renderBar",value:function(){if(this.state.show)return o.a.createElement("div",{className:"volume-slider",onMouseMove:this.onSliderMouseMove,onClick:this.onSliderClick},o.a.createElement("div",{className:"scrubber"},o.a.createElement("div",{className:"scrubber-percentage",style:{height:this.state.percent+"%"}}),o.a.createElement("div",{className:"scrubber-head",style:{bottom:this.state.percent+"%"}})))}},{key:"render",value:function(){var e=this,t=X()({fa:!0,"fa-volume-up":this.state.percent>=50&&!this.state.muted,"fa-volume-down":this.state.percent<50&&this.state.percent>=1&&!this.state.muted,"fa-volume-off":this.state.percent<1||this.state.muted});return o.a.createElement("span",{className:t,onClick:this.onIconClick,ref:function(t){return e.icon=t}},this.renderBar())}}])&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);ue.propTypes=ce;var le=ue;n(40);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we={metadata:H.a.object,onAudioChange:H.a.func,onSubtitleChange:H.a.func,bottom:H.a.bool},Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(i,e);var t,n,r,a=me(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={show:!1},t.audio=[],t.subtitles=[],t.parseMetadata(),t.onClick=t.click.bind(ve(t)),t.onAudioClick=t.audioClick.bind(ve(t)),t.onSubtitleClick=t.subtitleClick.bind(ve(t)),t.onDocumentClick=t.documentClick.bind(ve(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){null!=this.icon&&(this.icon.contains(e.target)||this.setState({show:!1}))}},{key:"parseMetadata",value:function(){var e,t=pe(this.props.metadata.streams);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("tags"in n){var r=null;if("title"in n.tags&&(r=n.tags.title),"language"in n.tags&&(r=n.tags.language),r){var o={language:r,title:n.tags.title||r,index:n.index};if("subtitle"==n.codec_type){if(["dvd_subtitle","hdmv_pgs_subtitle"].includes(n.codec_name))continue;this.subtitles.push(o)}else"audio"==n.codec_type&&this.audio.push(o)}}}}catch(e){t.e(e)}finally{t.f()}}},{key:"click",value:function(e){this.setState({show:!this.state.show})}},{key:"subtitleClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onSubtitleChange&&this.props.onSubtitleChange(e.target.getAttribute("data-data"))}},{key:"audioClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onAudioChange&&this.props.onAudioChange(e.target.getAttribute("data-data"))}},{key:"renderSubtitles",value:function(){var e=this;if(0!=this.subtitles.length)return o.a.createElement("span",null,o.a.createElement("p",{className:"title"},"Subtitles"),o.a.createElement("p",null,o.a.createElement("a",{href:"#",onClick:this.onSubtitleClick,"data-data":""},"None")),this.subtitles.map((function(t){return o.a.createElement("p",{key:t.index},o.a.createElement("a",{href:"#",onClick:e.onSubtitleClick,"data-data":"".concat(t.language,":").concat(t.index)},t.title))})))}},{key:"renderAudio",value:function(){var e=this;if(!(this.audio.length<=1))return o.a.createElement("span",null,o.a.createElement("p",{className:"title"},"Audio"),this.audio.map((function(t){return o.a.createElement("p",{key:t.index},o.a.createElement("a",{href:"#",onClick:e.onAudioClick,"data-data":"".concat(t.language,":").concat(t.index)},t.title))})))}},{key:"renderAudioSubtitles",value:function(){var e=this;if(!this.state.show)return null;var t=X()({"audio-subtitles":!0,"audio-subtitles-bottom":this.props.bottom});return o.a.createElement("div",{className:t,ref:function(t){return e.audioSubtitlesElem=t}},this.renderSubtitles(),this.renderAudio())}},{key:"render",value:function(){var e=this;return this.audio.length<=1&&0==this.subtitles.length?null:o.a.createElement("span",{ref:function(t){return e.icon=t}},o.a.createElement("span",{className:"fas fa-closed-captioning",onClick:this.onClick}),this.renderAudioSubtitles())}}])&&he(t.prototype,n),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Ee.propTypes=we;var Se=Ee;n(41);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _e(this,n)}}function _e(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ce(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te={duration:H.a.number.isRequired,onReturnCurrentTime:H.a.func.isRequired,onNewTime:H.a.func.isRequired},Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(i,e);var t,n,r,a=Pe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Re(Ce(t=a.call(this,e)),"sliderClick",(function(e){var n=t.getEventXOffset(e),r=t.props.duration/t.slider.offsetWidth,o=Math.trunc(r*n);t.setState({currentTime:o,hoverTime:null,drag:!1}),t.props.onNewTime(o)})),Re(Ce(t),"mouseMove",(function(e){var n=t.getEventXOffset(e),r=t.props.duration/t.slider.offsetWidth,o=Math.trunc(r*n);o>t.props.duration&&(o=t.props.duration),t.setState({hoverTime:o,drag:1==e.buttons})})),Re(Ce(t),"touchMove",(function(e){t.mouseMove(e),t.setState({drag:!0})})),Re(Ce(t),"mouseLeave",(function(e){t.setState({hoverTime:null,drag:!1})})),Re(Ce(t),"touchEnd",(function(e){t.props.onNewTime(t.state.hoverTime),t.setState({currentTime:t.state.hoverTime,hoverTime:null,drag:!1})})),t.state={currentTime:0,hoverTime:null,drag:!1},t.timerGetCurrentTime=null,t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getCurrentTime()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerGetCurrentTime),this.timerGetCurrentTime=null}},{key:"getCurrentTime",value:function(){var e=this;this.setState({currentTime:this.props.onReturnCurrentTime()}),this.timerGetCurrentTime=setTimeout((function(){e.getCurrentTime()}),1e3)}},{key:"progressPercent",value:function(){var e=this.state.currentTime;return null!==this.state.hoverTime&&this.state.drag&&(e=this.state.hoverTime),(e/this.props.duration*100).toString()+"%"}},{key:"getEventXOffset",value:function(e){e.type.match("^touch")&&(e.originalEvent&&(e=e.originalEvent),e=e.touches[0]||e.changedTouches[0]);var t=0,n=this.slider;do{isNaN(n.offsetLeft)||(t+=n.offsetLeft)}while(n=n.offsetParent);var r=e.clientX-t;return r>this.slider.offsetWidth&&(r=this.slider.offsetWidth),r<-1?0:r+1}},{key:"renderHoverTime",value:function(){return null===this.state.hoverTime?null:o.a.createElement("div",{className:"hover-time",style:{left:(this.state.hoverTime/this.props.duration*100).toString()+"%"}},o.a.createElement("div",{className:"hover-time-box"},j(parseInt(this.state.hoverTime))))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"player-slider-wrapper",onClick:this.sliderClick,onMouseMove:this.mouseMove,onMouseLeave:this.mouseLeave,onTouchStart:this.mouseMove,onTouchMove:this.touchMove,onTouchCancel:this.mouseLeave,onTouchEnd:this.touchEnd},this.renderHoverTime(),o.a.createElement("div",{className:"slider",ref:function(t){return e.slider=t}},o.a.createElement("div",{className:"progress",style:{width:this.progressPercent()}})))}}])&&ke(t.prototype,n),r&&ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Ie.propTypes=Te;var xe=Ie;n(42);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe={hcenter:H.a.bool},He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(i,e);var t,n,r,a=Le(i);function i(){return Ae(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=X()({loader:!0,"loader-hcenter":this.props.hcenter});return o.a.createElement("div",{className:e})}}])&&Me(t.prototype,n),r&&Me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);He.propTypes=Fe,He.defaultProps={hcenter:!1};var We=He;n(43);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze={playServerUrl:H.a.string,playId:H.a.string,session:H.a.string,startTime:H.a.number,metadata:H.a.object,info:H.a.object,nextInfo:H.a.object,backToInfo:H.a.object,currentInfo:H.a.object,onAudioChange:H.a.func,onSubtitleChange:H.a.func,audio_lang:H.a.string,subtitle_lang:H.a.string,onTimeUpdate:H.a.func},et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(i,e);var t,n,r,a=Ve(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onPlayPauseClick=t.playPauseClick.bind(Ke(t)),t.duration=parseInt(e.metadata.format.duration),t.pingTimer=null,t.hls=null,t.onFullscreenClick=t.fullscreenClick.bind(Ke(t)),t.onVolumeChange=t.volumeChange.bind(Ke(t)),t.onAudioChange=t.audioChange.bind(Ke(t)),t.onSubtitleChange=t.subtitleChange.bind(Ke(t)),t.volume=1,t.hideControlsTimer=null,t.onSliderReturnCurrentTime=t.sliderReturnCurrentTime.bind(Ke(t)),t.onSliderNewTime=t.sliderNewTime.bind(Ke(t)),t.state={playing:!1,time:t.props.startTime,startTime:t.props.startTime,session:e.session,fullscreen:!1,showControls:!0,audio:t.props.audio_lang,subtitle:t.props.subtitle_lang,loading:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.currentInfo.title," | SEPLIS"),this.video.addEventListener("timeupdate",this.timeupdateEvent.bind(this)),this.video.addEventListener("pause",this.pauseEvent.bind(this)),this.video.addEventListener("play",this.playEvent.bind(this)),document.addEventListener("fullscreenchange",this.fullscreenchangeEvent.bind(this)),document.addEventListener("webkitfullscreenchange",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("webkitendfullscreen",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("webkitenterfullscreen",this.fullscreenchangeEvent.bind(this)),document.addEventListener("mozfullscreenchange",this.fullscreenchangeEvent.bind(this)),document.addEventListener("msfullscreenchange",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("error",this.playError.bind(this)),this.video.addEventListener("waiting",this.playWaiting.bind(this)),this.video.addEventListener("click",this.playClick.bind(this)),this.video.addEventListener("touchstart",this.playClick.bind(this)),this.video.addEventListener("loadeddata",this.loadedEvent.bind(this)),this.setPingTimer(),this.video.volume=this.volume,this.loadStream(this.getPlayUrl()),document.onmousemove=this.mouseMove.bind(this),document.ontouchmove=this.mouseMove.bind(this),document.onkeypress=this.keypress.bind(this),document.onbeforeunload=this.beforeUnload.bind(this)}},{key:"loadedEvent",value:function(e){this.setState({loading:!1})}},{key:"loadStream",value:function(e){var t=this;if(this.setState({loading:!0}),!Hls.isSupported())return this.video.src=e,this.video.load(),void this.video.play();this.hls&&(this.hls.destroy(),this.hls.bufferTimer&&(clearInterval(this.hls.bufferTimer),this.hls.bufferTimer=void 0),this.hls=null),this.hls=new Hls({startLevel:0,manifestLoadingTimeOut:3e4,debug:!1}),this.hls.loadSource(e),this.hls.attachMedia(this.video),this.hls.on(Hls.Events.MANIFEST_PARSED,(function(){t.video.play()})),this.hls.on(Hls.Events.ERROR,this.hlsError.bind(this))}},{key:"hlsError",value:function(e,t){if(console.warn(t),t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("hls.js fatal network error encountered, try to recover"),this.hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("hls.js fatal media error encountered, try to recover"),this.hls.swapAudioCodec(),this.handleMediaError();break;default:console.log("hls.js could not recover"),this.hls.destroy()}}},{key:"handleMediaError",value:function(){this.setState({loading:!0}),this.hls.recoverMediaError(),this.video.play()}},{key:"keypress",value:function(e){"Space"==e.code&&this.playPauseClick()}},{key:"playClick",value:function(e){e.preventDefault(),this.video.paused||this.state.loading||(this.setState({showControls:!this.state.showControls}),this.setHideControlsTimer())}},{key:"setPingTimer",value:function(){var e=this;clearTimeout(this.pingTimer),this.pingTimer=setTimeout((function(){p(e.getPlayUrl()+"&action=ping"),e.setPingTimer()}),2e3)}},{key:"setHideControlsTimer",value:function(e){var t=this;null==e&&(e=3e3),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout((function(){t.video.paused||t.state.loading||t.setState({showControls:!1})}),e)}},{key:"mouseMove",value:function(e){this.setState({showControls:!0}),this.setHideControlsTimer()}},{key:"getPlayUrl",value:function(){return"".concat(this.props.playServerUrl,"/play")+"?play_id=".concat(this.props.playId)+"&session=".concat(this.props.session)+"&start_time=".concat(this.state.startTime)+"&subtitle_lang=".concat(this.state.subtitle||"")+"&audio_lang=".concat(this.state.audio||"")}},{key:"playPauseClick",value:function(){this.video.paused?(this.video.play(),this.setHideControlsTimer(2e3)):this.video.pause()}},{key:"fullscreenchangeEvent",value:function(){this.setState({fullscreen:!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)})}},{key:"pauseEvent",value:function(){this.setState({playing:!1,showControls:!0})}},{key:"playEvent",value:function(){this.setState({playing:!0,loading:!0}),this.setHideControlsTimer()}},{key:"playError",value:function(e){this.setState({loading:!1}),console.warn(e.currentTarget.error),e.currentTarget.error.code==e.currentTarget.error.MEDIA_ERR_DECODE&&this.handleMediaError()}},{key:"playWaiting",value:function(){this.setState({loading:!0})}},{key:"timeupdateEvent",value:function(e){var t=this;if(!this.video.paused){this.setState({loading:!1});var n=this.video.currentTime;(this.video.seekable.length<=1||this.video.seekable.end(0)<=1)&&(n+=this.state.startTime),this.setState({time:n,playing:!0},(function(){t.props.onTimeUpdate&&t.props.onTimeUpdate(t.state.time)})),this.hideControlsTimer||this.setHideControlsTimer()}}},{key:"changeVideoState",value:function(e){var t=this;e.loading=!0,this.setState(e),this.cancelPlayUrl().then((function(){t.loadStream(t.getPlayUrl()),t.setPingTimer()}))}},{key:"beforeUnload",value:function(){this.cancelPlayUrl()}},{key:"cancelPlayUrl",value:function(){var e=this;return new Promise((function(t,n){p(e.getPlayUrl()+"&action=cancel").done((function(){t()})).fail((function(e){n(e)}))}))}},{key:"fullscreenClick",value:function(e){if(this.state.fullscreen)document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();else{var t=document.getElementById("player");t.enterFullscreen?t.enterFullscreen():t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.webkitEnterFullscreen?t.webkitEnterFullscreen():this.video.webkitEnterFullscreen&&this.video.webkitEnterFullscreen()}this.setState({fullscreen:!this.state.fullscreen})}},{key:"getDurationText",value:function(){return j(parseInt(this.duration))}},{key:"getCurrentTimeText",value:function(){return j(parseInt(this.state.time))}},{key:"renderPlayNext",value:function(){if(this.props.nextInfo)return o.a.createElement(ee,{title:this.props.nextInfo.title,url:this.props.nextInfo.url})}},{key:"volumeChange",value:function(e){this.volume=e,this.video&&(this.video.volume=e)}},{key:"audioChange",value:function(e){this.props.onAudioChange&&this.props.onAudioChange(e),this.changeVideoState({audio:e,startTime:this.state.time})}},{key:"subtitleChange",value:function(e){this.props.onSubtitleChange&&this.props.onSubtitleChange(e),this.changeVideoState({subtitle:e,startTime:this.state.time})}},{key:"sliderNewTime",value:function(e){this.video.pause(),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=null,this.changeVideoState({time:e,startTime:e})}},{key:"sliderReturnCurrentTime",value:function(){return this.state.time}},{key:"showControlsVisibility",value:function(){return this.state.showControls?"visible":"hidden"}},{key:"renderControlsTop",value:function(){return o.a.createElement("div",{className:"controls controls-top",style:{visibility:this.showControlsVisibility()}},o.a.createElement("div",{className:"control"},o.a.createElement("a",{className:"fas fa-times",href:this.props.backToInfo.url,title:this.props.backToInfo.title})),o.a.createElement("div",{className:"control-text control-text-title"},this.props.currentInfo.title),o.a.createElement("div",{className:"control-spacer"}),o.a.createElement("div",{className:"control"},o.a.createElement(St,null)),o.a.createElement("div",{className:"control"},o.a.createElement(Se,{metadata:this.props.metadata,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),o.a.createElement("div",{className:"control"},o.a.createElement(le,{onChange:this.onVolumeChange})),o.a.createElement("div",{className:"control"},this.renderPlayNext()))}},{key:"renderControlsBottom",value:function(){var e=X()({fa:!0,"fa-pause":this.state.playing,"fa-play":!this.state.playing}),t=X()({fa:!0,"fa-expand":this.state.fullscreen,"fa-arrows-alt":!this.state.fullscreen});return o.a.createElement("div",{className:"controls",style:{visibility:this.showControlsVisibility()}},o.a.createElement("div",{className:"control"},o.a.createElement("span",{className:e,onClick:this.onPlayPauseClick})),o.a.createElement("div",{className:"control-text"},this.getCurrentTimeText()),o.a.createElement(xe,{duration:this.duration,onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),o.a.createElement("div",{className:"control-text",title:"Timeleft"},this.getDurationText()),o.a.createElement("div",{className:"control"},o.a.createElement("span",{className:t,onClick:this.onFullscreenClick})))}},{key:"renderLoading",value:function(){return this.state.loading?o.a.createElement(We,{hcenter:!0}):null}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"player"},o.a.createElement("div",{className:"overlay"},o.a.createElement("video",{className:"video",preload:"none",autoPlay:!1,controls:!1,ref:function(t){return e.video=t}}),this.renderControlsTop(),this.renderControlsBottom(),this.renderLoading()))}}])&&Je(t.prototype,n),r&&Je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);et.propTypes=Ze,et.defaultProps={startTime:0,info:null,nextInfo:null};var tt=et;function nt(e){return new Promise((function(t,n){p(e).done((function(e){var r=!1,o=0;if(0!=e.length){var a,i=Ge(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;o+=1,p(s.play_url+"/metadata",{query:{play_id:s.play_id}}).done((function(e){r||(r=!0,t({playServer:s,metadata:e}))})).always((function(){0==(o-=1)&&0==r&&n({code:2,message:"This episode is not on any of your play servers."})}))}}catch(e){i.e(e)}finally{i.f()}}else n({code:1,message:"No play servers."})})).fail((function(e){n(e)}))}))}function rt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var it={ANY_CHANGED:"anyChanged",AVAILABLE:"isAvailable",IS_CONNECTED:"isConnected",PLAYER_STATE:"playerState",CURRENT_TIME:"currentTime"},st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1}var t,n,r;return t=e,(n=[{key:"load",value:function(t){this.onInit=t,e.initialized?this.initCast(!0):this.loadCastScript()}},{key:"loadCastScript",value:function(){if(e.initList.push(this),!e.loaded){e.loaded=!0,window.__onGCastApiAvailable=function(t){setTimeout((function(){var n=new chrome.cast.SessionRequest(seplisChromecastAppId),r=new chrome.cast.ApiConfig(n,ct,pt,chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(r,(function(){e.initialized=!0;var n,r=rt(e.initList);try{for(r.s();!(n=r.n()).done;)n.value.initCast(t)}catch(e){r.e(e)}finally{r.f()}}))}),500)};var t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",document.head.appendChild(t)}}},{key:"initCast",value:function(e){this.loaded=e,e&&this.onInit&&this.onInit(this)}},{key:"requestSession",value:function(){chrome.cast.requestSession(ct)}},{key:"isConnected",value:function(){return!!e.session&&"connected"==e.session.status}},{key:"getSession",value:function(){return e.session}},{key:"getMediaSession",value:function(){return e.mediaSession}},{key:"getFriendlyName",value:function(){return e.session.receiver.friendlyName}},{key:"getCurrentTime",value:function(){return e.mediaSession.getEstimatedTime()}},{key:"playOrPause",value:function(t,n){"PLAYING"==e.mediaSession.playerState?this.pause(t,n):this.play(t,n)}},{key:"play",value:function(t,n){e.mediaSession.play(null,t,n)}},{key:"pause",value:function(t,n){e.mediaSession.pause(null,t,n)}},{key:"playEpisode",value:function(t,n,r){var o=this;return new Promise((function(a,i){if(!o.isConnected())return alert("Not connected to a cast device."),void i();var s="/1/shows/".concat(t,"/episodes/").concat(n,"/play-servers");Promise.all([nt(s),p("/1/progress-token"),p("/1/shows/".concat(t)),p("/1/shows/".concat(t,"/episodes/").concat(n)),p("/1/shows/".concat(t,"/episodes/").concat(n,"/watched")),p("/1/shows/".concat(t,"/user-subtitle-lang"))]).then((function(t){r||(r=t[4]?t[4].position:0);var n,s=[],c=rt(t[0].metadata.streams);try{for(c.s();!(n=c.n()).done;){var u=n.value,l={index:u.index,codec_name:u.codec_name,codec_type:u.codec_type,tags:{}};u.tags&&(l.tags.language=u.tags.language,l.tags.title=u.tags.title),s.push(l)}}catch(e){c.e(e)}finally{c.f()}var f={play:t[0].playServer,metadata:{format:{duration:t[0].metadata.format.duration},streams:s},token:t[1].token,type:"episode",show:{id:t[2].id,title:t[2].title,episode_type:t[2].episode_type},episode:{number:t[3].number,title:t[3].title,season:t[3].season,episode:t[3].episode},startTime:r,apiUrl:seplisBaseUrl},p=t[0].playServer.play_url+"/play?play_id="+t[0].playServer.play_id;p+="&session=".concat(k()),p+="&device=chromecast",r&&(p+="&start_time=".concat(r)),t[5]&&(p+="&subtitle_lang=".concat(t[5].subtitle_lang||""),p+="&audio_lang=".concat(t[5].audio_lang||""));var d=new chrome.cast.media.LoadRequest(o._playEpisodeMediaInfo(p,t[2],t[3]));d.customData=f,o.getSession().loadMedia(d,(function(e){lt(e),a(e)}),(function(e){i(e)}),e)})).catch((function(e){i(e)}))}))}},{key:"_playEpisodeMediaInfo",value:function(e,t,n){var r=new chrome.cast.media.MediaInfo(e);return r.metadata=new chrome.cast.media.TvShowMediaMetadata,r.metadata.seriesTitle=t.title,r.metadata.title=n.title,r.metadata.episode=n.episode||n.number,r.metadata.season=n.season,r.metadata.originalAirdate=n.air_date,r.metadata.metadataType=chrome.cast.media.MetadataType.TV_SHOW,r.metadata.images=[{url:null!=t.poster_image?t.poster_image.url+"@SX180.jpg":""}],r}},{key:"addEventListener",value:function(t,n){t in e.eventListener||(e.eventListener[t]=[]),e.eventListener[t],e.eventListener[t].includes(n)||e.eventListener[t].push(n)}},{key:"removeEventListener",value:function(t,n){var r=e.eventListener[t]||[],o=r.indexOf(n);o>0&&r.splice(o,1)}}])&&at(t.prototype,n),r&&at(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ct(e){st.session=e,0!=e.media.length&&lt(e.media[0]),st.timerGetCurrentTime=setInterval((function(){st.mediaSession&&"PLAYING"==st.mediaSession.playerState&&dt(it.CURRENT_TIME,st.mediaSession.getEstimatedTime())}),1e3),e.addMediaListener(lt),e.addUpdateListener(ut),dt(it.IS_CONNECTED,!0)}function ut(e){st.session.status!==chrome.cast.SessionStatus.CONNECTED&&(st.session=null,st.mediaSession=null,dt(it.IS_CONNECTED,!1))}function lt(e){st.mediaSession=e,e.addUpdateListener(ft),dt(it.CURRENT_TIME,st.mediaSession.getEstimatedTime()),ft()}function ft(){dt(it.PLAYER_STATE,st.mediaSession.playerState)}function pt(e){dt(it.AVAILABLE,"available"==e)}function dt(e,t){var n={field:e,value:t};ht("anyChanged",n),ht(e,n)}function ht(e,t){(st.eventListener[e]||[]).forEach((function(e){try{e(t)}catch(e){console.log(e)}}))}st.initialized=!1,st.loaded=!1,st.initList=[],st.session=null,st.mediaSession=null,st.eventListener={},st.events=it,st.timerGetCurrentTime=null;var yt=st;n(44);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Et(e);if(t){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(i,e);var t,n,r,a=gt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={connected:!1,available:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.onConnected=this.connected.bind(this),this.onDeviceAvailable=this.deviceAvailable.bind(this),this.cast=new yt,this.cast.load(this.onCastInit.bind(this)),this.iconClick=this.castIconClick.bind(this)}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("isConnected",this.onConnected)}},{key:"onCastInit",value:function(){this.cast.addEventListener("isConnected",this.onConnected),this.cast.addEventListener("isAvailable",this.onDeviceAvailable)}},{key:"deviceAvailable",value:function(e){this.setState({available:e.value})}},{key:"connected",value:function(e){this.setState({connected:e.value})}},{key:"castIconClick",value:function(e){this.cast.requestSession()}},{key:"render",value:function(){if(!this.state.available)return null;var e="/static/img/chromecast.svg";return this.state.connected&&(e="/static/img/chromecast_connected.svg"),o.a.createElement("img",{onClick:this.iconClick,title:"Chromecast",className:"castbutton",src:e})}}])&&bt(t.prototype,n),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Ot(e,t,n){var r=new Event("episode_watched_status",{method:e,show_id:t,episode_number:n});document.dispatchEvent(r)}n(45);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rt(e);if(t){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ct(this,n)}}function Ct(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(i,e);var t,n,r,a=_t(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={connected:!1,deviceName:"",playerState:"",info:null,currentTime:0,loading:!1,changingTime:!1},t.cast=null,t.onSliderReturnCurrentTime=t.sliderReturnCurrentTime.bind(Nt(t)),t.onSliderNewTime=t.sliderNewTime.bind(Nt(t)),t.onPlayPauseClick=t.playPauseClick.bind(Nt(t)),t.onAudioChange=t.audioChange.bind(Nt(t)),t.onSubtitleChange=t.subtitleChange.bind(Nt(t)),t.clickPlayNextEpisode=t.playNextEpisode.bind(Nt(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.cast=new yt,this.cast.load(this.initCast.bind(this))}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("anyChanged",this.castStateChanged.bind(this));var e=this.cast.getSession();e&&e.removeMessageListener("urn:x-cast:net.seplis.cast.get_custom_data",this.receiveCastInfo.bind(this))}},{key:"audioChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({subtitle_lang:e})}},{key:"subAudioSubSave",value:function(e){var t=this,n=this.state.info.show,r=this.state.info.episode;p("/1/shows/".concat(n.id,"/user-subtitle-lang"),{method:"PATCH",data:e}).done((function(){t.cast.playEpisode(n.id,r.number,t.state.currentTime)})).catch((function(e){alert(e.message)}))}},{key:"initCast",value:function(){this.cast.addEventListener("anyChanged",this.castStateChanged.bind(this))}},{key:"playPauseClick",value:function(e){this.cast.playOrPause()}},{key:"castStateChanged",value:function(e){switch(e.field){case"playerState":this.playerStateChanged(e);break;case"isConnected":this.connectedChanged();break;case"currentTime":this.currentTimeChanged(e)}}},{key:"connectedChanged",value:function(){var e=this.cast.isConnected();this.setState({connected:e,deviceName:e?this.cast.getFriendlyName():""}),e?(this.setState({loading:!1}),this.cast.getSession().addMessageListener("urn:x-cast:net.seplis.cast.get_custom_data",this.receiveCastInfo.bind(this))):this.setState({info:null})}},{key:"receiveCastInfo",value:function(e,t){var n=this;this.setState({info:JSON.parse(t),playNextEpisode:null},(function(){n.cast.getMediaSession()&&n.currentTimeChanged({value:n.cast.getMediaSession().getEstimatedTime()}),n.getPlayNextEpisode()}))}},{key:"playerStateChanged",value:function(e){this.setState({playerState:e.value,loading:"BUFFERING"==e.value||this.changingTime}),this.state.info||this.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),"IDLE"==e.value&&Ot("refresh",0,0)}},{key:"getPlayNextEpisode",value:function(){var e=this;if(this.state.info){var t=parseInt(this.state.info.episode.number)+1,n=this.state.info.show.id;p("/1/shows/".concat(n,"/episodes/").concat(t)).done((function(t){e.setState({nextEpisode:t})}))}}},{key:"playNextEpisode",value:function(){var e=this;if(this.state.nextEpisode&&this.state.info){var t=this.state.info;t.episode=this.state.nextEpisode,t.startTime=0,this.setState({nextEpisode:null,info:t,playerState:"",loading:!0,changingTime:!0,currentTime:0}),this.cast.playEpisode(this.state.info.show.id,this.state.nextEpisode.number,0).catch((function(t){alert(t.message),e.setState({changingTime:!1})})).then((function(){e.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),e.setState({changingTime:!1})}))}}},{key:"currentTimeChanged",value:function(e){var t=e.value;this.cast.getMediaSession()&&this.cast.getMediaSession().items&&1==this.cast.getMediaSession().items.length&&(this.state.changingTime||(0==this.cast.getMediaSession().items[0].startTime&&this.state.info&&(t+=this.state.info.startTime),this.setState({currentTime:t})))}},{key:"sliderNewTime",value:function(e){var t=this;this.state.info.startTime=e,this.setState({loading:!0,currentTime:e,changingTime:!0}),this.cast.pause((function(){t.cast.playEpisode(t.state.info.show.id,t.state.info.episode.number,e).catch((function(e){t.setState({changingTime:!1}),alert(e.message)})).then((function(){t.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),t.setState({changingTime:!1})}))}),(function(){t.setState({changingTime:!1})}))}},{key:"sliderReturnCurrentTime",value:function(){return this.state.currentTime}},{key:"renderPlayControl",value:function(){if(this.state.loading)return o.a.createElement("div",{className:"control"},o.a.createElement("img",{src:"/static/img/spinner.svg"}));var e=X()({fa:!0,"fa-pause":"PLAYING"==this.state.playerState,"fa-play":"PLAYING"!=this.state.playerState});return o.a.createElement("div",{className:"control"},o.a.createElement("span",{className:e,onClick:this.onPlayPauseClick}))}},{key:"getDuration",value:function(){return this.state.info?parseInt(this.state.info.metadata.format.duration):0}},{key:"getPlayNextInfo",value:function(){if(!this.state.info||!this.state.info.show||!this.state.nextEpisode)return null;var e=this.state.info.show,t=this.state.nextEpisode;return{title:O(e,t),url:"/show/".concat(e.id,"/episode/").concat(t.number,"/play")}}},{key:"renderPlayNext",value:function(){if(this.getPlayNextInfo())return o.a.createElement("div",{className:"control"},o.a.createElement("span",{className:"fas fa-step-forward",onClick:this.clickPlayNextEpisode}))}},{key:"renderPlaying",value:function(){var e=this.state.info.show,t=this.state.info.episode;return o.a.createElement("div",{id:"castbar"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"text"},o.a.createElement("b",null,e.title," - ",O(e,t)),"Â  on ",this.state.deviceName),o.a.createElement("div",{className:"controls"}),o.a.createElement("div",{className:"controls"},this.renderPlayControl(),o.a.createElement("div",{className:"control-text"},j(this.state.currentTime)),o.a.createElement(xe,{duration:this.getDuration(),onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),o.a.createElement("div",{className:"control-text"},j(this.getDuration())),o.a.createElement("div",{className:"control"},o.a.createElement(Se,{metadata:this.state.info.metadata,bottom:!0,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),this.renderPlayNext())))}},{key:"renderFinished",value:function(){var e=this.state.info.show,t=(this.state.info.episode,this.getPlayNextInfo());return t?o.a.createElement("div",{id:"castbar"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"text"},o.a.createElement("b",null,this.state.deviceName),o.a.createElement("br",null),o.a.createElement("b",null,"Play next episode:"),"Â  ",o.a.createElement("a",{onClick:this.clickPlayNextEpisode},e.title," - ",t.title)))):null}},{key:"renderLoading",value:function(){if(this.state.loading)return o.a.createElement("img",{src:"/static/img/spinner.svg"})}},{key:"renderReadyToPlay",value:function(){return o.a.createElement("div",{id:"castbar"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"text"},o.a.createElement("b",null,"Ready to cast on ",this.state.deviceName)," ",o.a.createElement("br",null),this.renderLoading(),this.renderPlayNext())))}},{key:"render",value:function(){return this.cast&&this.state.connected?this.state.info&&"IDLE"==this.state.playerState&&!this.state.changingTime?this.renderFinished():this.state.info?this.renderPlaying():this.renderReadyToPlay():null}}])&&jt(t.prototype,n),r&&jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(46);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(i,e);var t,n,r,a=Mt(i);function i(){return xt(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"renderShowDropdown",value:function(){return o.a.createElement("span",{className:"dropdown"},o.a.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},"Shows"),o.a.createElement("div",{className:"dropdown-menu"},o.a.createElement(s.b,{className:"dropdown-item",to:"/countdown"},"Countdown"),o.a.createElement(s.b,{className:"dropdown-item",to:"/following"},"Following"),o.a.createElement(s.b,{className:"dropdown-item",to:"/episodes-to-watch"},"Episodes to Watch"),o.a.createElement(s.b,{className:"dropdown-item",to:"/recently-aired"},"Recently Aired"),o.a.createElement(s.b,{className:"dropdown-item",to:"/shows-watched"},"Watched"),o.a.createElement(s.b,{className:"dropdown-item",to:"/user-shows-stats"},"Stats"),o.a.createElement("div",{className:"dropdown-divider"}),o.a.createElement(s.b,{className:"dropdown-item",to:"/show-new"},"New show")))}},{key:"renderMain",value:function(){return o.a.createElement(s.b,{className:"link",to:"/"},"Main")}},{key:"renderAirDates",value:function(){return o.a.createElement(s.b,{className:"link",to:"/air-dates"},"Air dates")}},{key:"renderUserMenu",value:function(){if(b())return o.a.createElement("span",{className:"dropdown"},o.a.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},o.a.createElement("i",{className:"fas fa-user"})),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},o.a.createElement(s.b,{className:"dropdown-item",to:"/account"},"Account"),o.a.createElement(s.b,{className:"dropdown-item",to:"/play-servers"},"Play servers"),o.a.createElement("div",{className:"dropdown-divider"}),o.a.createElement(s.b,{className:"dropdown-item",to:"/sign-out"},"Sign out")))}},{key:"renderChromecast",value:function(){if(b())return o.a.createElement("span",{className:"link"},o.a.createElement(Tt,null),o.a.createElement(St,null))}},{key:"renderSignIn",value:function(){if(!b())return o.a.createElement(s.b,{className:"link",to:"/sign-in"},"Sign in")}},{key:"renderCreateUser",value:function(){if(!b())return o.a.createElement(s.b,{className:"link",to:"/create-user"},"Create user")}},{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar-seplis"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-auto"},this.renderMain(),this.renderAirDates(),this.renderShowDropdown()),o.a.createElement("div",{className:"col-auto ml-auto order-sm-2 order-md-12"},this.renderChromecast(),this.renderCreateUser(),this.renderSignIn(),this.renderUserMenu()),o.a.createElement("div",{className:"col-12 col-md-6 m-auto order-sm-12 order-md-2"},o.a.createElement(U,{key:"Search"})))))}}])&&Dt(t.prototype,n),r&&Dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(49);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var o=zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gt(e)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jt={showId:H.a.number.isRequired,following:H.a.bool},Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(i,e);var t,n,r,a=Wt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={following:e.following},t.onClick=t.onClick.bind(Gt(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){null==this.props.following&&this.get()}},{key:"onClick",value:function(e){var t=this;e.target.blur(),e.preventDefault(),this.setState({following:!this.state.following}),p("/1/users/".concat(g(),"/shows-following/").concat(this.props.showId),{method:this.state.following?"DELETE":"PUT"}).fail((function(){t.setState({following:!t.state.following})}))}},{key:"get",value:function(){var e=this;b()&&p("/1/users/".concat(g(),"/shows-following/").concat(parseInt(this.props.showId))).done((function(t){e.setState({following:t.following})}))}},{key:"render",value:function(){var e=X()({btn:!0,"btn-fan":!0,"btn-fan__is-fan":this.state.following});return o.a.createElement("button",{className:e,onClick:this.onClick,title:this.state.following?"Unfollow":"Follow","aria-label":this.state.following?"Unfollow":"Follow"},this.state.following?"Following":"Follow")}}])&&Ft(t.prototype,n),r&&Ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Yt.propTypes=Jt;var Vt=Yt;function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nn(e);if(t){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tn(e)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rn={showId:H.a.number.isRequired,rating:H.a.number},on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(i,e);var t,n,r,a=Zt(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=tn(t),o=function(e){if(e.preventDefault(),e.target.blur(),""==e.target.value)t.setState({rating:""}),p("/1/shows/".concat(t.props.showId,"/user-rating"),{method:"DELETE"});else{var n=parseInt(e.target.value);t.setState({rating:n}),p("/1/shows/".concat(t.props.showId,"/user-rating"),{data:{rating:n},method:"PUT"})}},(r="handleChange")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={rating:e.rating},t}return t=i,(n=[{key:"componentDidMount",value:function(){null==this.props.rating&&this.getRating()}},{key:"getRating",value:function(){var e=this;b()&&p("/1/shows/".concat(this.props.showId,"/user-rating")).done((function(t){e.setState({rating:t.rating?t.rating:""})}))}},{key:"render",value:function(){return o.a.createElement("select",{className:"form-control dark-input",value:this.state.rating,onChange:this.handleChange,style:{width:"auto",textAlignLast:"right"}},Array(10).fill(1).map((function(e,t){return o.a.createElement("option",{key:"user-rating-".concat(11-(t+1)),value:11-(t+1)},11-(t+1),"/10")})),o.a.createElement("option",{value:""},"â Not rated"))}}])&&Kt(t.prototype,n),r&&Kt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);on.propTypes=rn;var an=on;function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dn(e);if(t){var o=dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(e,t){if(t&&("object"===sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hn={showId:H.a.number.isRequired},yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(i,e);var t,n,r,a=fn(i);function i(){return cn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"renderSettings",value:function(){if(!(w()<2))return o.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/edit"),activeClassName:"active"},o.a.createElement("i",{className:"fas fa-cog"}))}},{key:"renderRating",value:function(e){if(b())return o.a.createElement("div",{className:"ml-auto"},o.a.createElement(an,{showId:this.props.showId}))}},{key:"render",value:function(){return o.a.createElement("nav",{className:"nav nav-pills mb-3",style:{borderBottom:"1px solid #007bff"}},o.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/show/".concat(this.props.showId),activeClassName:"active"},"Main"),o.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/info"),activeClassName:"active"},"Info"),o.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/seasons"),activeClassName:"active"},"Seasons"),o.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/images"),activeClassName:"active"},"Images"),o.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/stats"),activeClassName:"active"},"Stats"),this.renderRating(),this.renderSettings())}}])&&un(t.prototype,n),r&&un(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);yn.propTypes=hn;var mn=yn;n(24),n(50);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=On(e);if(t){var o=On(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(e,t){if(t&&("object"===bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kn={showId:H.a.number.isRequired,episodeNumber:H.a.number.isRequired,watched:H.a.object},jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gn(e,t)}(i,e);var t,n,r,a=wn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).setWatchedState(),t.onWatchedIncr=t.onWatchedIncr.bind(Sn(t)),t.onWatchedDecr=t.onWatchedDecr.bind(Sn(t)),t.onWatchedClick=t.onWatchedClick.bind(Sn(t)),t}return t=i,(n=[{key:"setWatchedState",value:function(){this.props.watched?this.state=this.props.watched:this.state={times:0,position:0}}},{key:"watchedApiEndpoint",value:function(){var e=this.props.showId,t=this.props.episodeNumber;return"/1/shows/".concat(e,"/episodes/").concat(t,"/watched")}},{key:"onWatchedIncr",value:function(e){var t=this;this.setState({times:++this.state.times}),p(this.watchedApiEndpoint(),{method:"PUT"}).done((function(e){Ot("incr",t.props.showId,t.props.episodeNumber),t.setState(e)})).fail((function(){t.setState({times:--t.state.times})}))}},{key:"onWatchedDecr",value:function(e){var t=this;this.state.position>0?p(this.watchedApiEndpoint().replace("watched","position"),{method:"DELETE"}).done((function(e){Ot("decr",t.props.showId,t.props.episodeNumber),t.setState({position:0})})):this.state.times>0&&(this.setState({times:--this.state.times}),p(this.watchedApiEndpoint(),{data:{times:-1},method:"PUT"}).done((function(e){Ot("decr",t.props.showId,t.props.episodeNumber),e?t.setState(e):t.setState({times:0,position:0})})).fail((function(){t.setState({times:++t.state.times})})))}},{key:"onWatchedClick",value:function(e){this.state.times>0||this.state.position>0||this.onWatchedIncr(e)}},{key:"renderDropdown",value:function(){return o.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu"},o.a.createElement("li",{onClick:this.onWatchedIncr},o.a.createElement("i",{className:"fas fa-plus"})),o.a.createElement("li",{onClick:this.onWatchedDecr},o.a.createElement("i",{className:"fas fa-minus"})))}},{key:"render",value:function(){var e=this.state.times>0||this.state.position>0,t=X()({btn:!0,"btn-watched":!0,watched:this.state.times>0,watching:this.state.position>0,"watching-watched":this.state.position>0&&this.state.times>0});return o.a.createElement("div",{className:"btn-group btn-episode-watched-group dropdown"},this.renderDropdown(),o.a.createElement("button",{className:t,"data-toggle":e?"dropdown":"none",onClick:this.onWatchedClick},"Watched"),o.a.createElement("button",{className:"btn btn-times"},this.state.times))}}])&&vn(t.prototype,n),r&&vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);jn.propTypes=kn;var Pn=jn;n(51);function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xn(e);if(t){var o=xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tn(this,n)}}function Tn(e,t){if(t&&("object"===_n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return In(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dn={showId:H.a.number.isRequired,episode:H.a.object.isRequired,displaySeason:H.a.bool},An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(i,e);var t,n,r,a=Rn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onPlayClick=t.playClick.bind(In(t)),t}return t=i,(n=[{key:"playClick",value:function(e){yt.session&&"connected"==yt.session.status?(new yt).playEpisode(this.props.showId,this.props.episode.number).catch((function(e){console.log(e),alert("Error occurred trying to play the episode on your Chrome Cast")})):location.href=this.getPlayUrl()}},{key:"renderEpisodeNumber",value:function(){return this.props.episode.episode?o.a.createElement("span",null,this.props.displaySeason?"S".concat(this.props.episode.season," "):"","Episode ",this.props.episode.episode,"Â ",o.a.createElement("font",{color:"grey"},"(",this.props.episode.number,")")):o.a.createElement("span",null,"Episode ",this.props.episode.number)}},{key:"renderAirDate",value:function(){return this.props.episode.air_date?o.a.createElement("span",{className:"air-date",title:this.props.episode.air_date},this.props.episode.air_date):o.a.createElement("span",null,"Unknown air date.")}},{key:"getPlayUrl",value:function(){return"/show/".concat(this.props.showId,"/episode/").concat(this.props.episode.number,"/play")}},{key:"render",value:function(){return o.a.createElement("div",{className:"episode-box-list-item"},o.a.createElement("div",{className:"title",title:this.props.episode.title},this.props.episode.title?this.props.episode.title:"TBA"),o.a.createElement("div",{className:"meta"},this.renderEpisodeNumber(),o.a.createElement("strong",null," Â· "),this.renderAirDate()),o.a.createElement("div",{className:"button-bar"},o.a.createElement(Pn,{showId:this.props.showId,episodeNumber:this.props.episode.number,watched:this.props.episode.user_watched}),o.a.createElement("div",{className:"play-button float-right",onClick:this.onPlayClick},o.a.createElement("i",{className:"fas fa-play-circle"}))))}}])&&Cn(t.prototype,n),r&&Cn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);An.propTypes=Dn,An.defaultProps={displaySeason:!0};var Mn=An;function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wn(e);if(t){var o=Wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fn(this,n)}}function Fn(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xn={showId:H.a.number.isRequired},Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(i,e);var t,n,r,a=Un(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={episode:null},t.eventGet=t.get.bind(Hn(t)),document.addEventListener("episode_watched_status",t.eventGet),document.addEventListener("visibilitychange",t.eventGet),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("episode_watched_status",this.eventGet),document.removeEventListener("visibilitychange",this.eventGet)}},{key:"get",value:function(){var e=this;document.hidden||(b()?p("/1/shows/".concat(this.props.showId,"/episodes/to-watch")).done((function(t){e.setState({episode:t})})):p("/1/shows/".concat(this.props.showId,"/episodes/1")).done((function(t){e.setState({episode:t})})))}},{key:"render",value:function(){return null==this.state.episode?o.a.createElement("p",{className:"text-muted"},"No episodes to watch"):o.a.createElement(Mn,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0})}}])&&Ln(t.prototype,n),r&&Ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Gn.propTypes=Xn;var zn=Gn,Jn=n(27),Yn=n.n(Jn);n(52);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=er(e);if(t){var o=er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){if(t&&("object"===Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tr={showId:H.a.number.isRequired,numberOfEpisodes:H.a.number},nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(i,e);var t,n,r,a=Qn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={episodes:[]},t.getEpisodes(),t}return t=i,(n=[{key:"renderEpisodeNumber",value:function(e){return e.episode?o.a.createElement("span",null,"S",e.season," Â· E",e.episode,"Â  (",e.number,")"):o.a.createElement("span",null,"Episode ",e.number)}},{key:"getEpisodes",value:function(){var e=this,t=Yn.a.format((new Date).getTime(),"YYYY-MM-DD");p("/1/shows/".concat(this.props.showId,"/episodes"),{query:{q:"air_datetime:[".concat(t,"T00:00:00 TO *]"),per_page:this.props.numberOfEpisodes,sort:"number:asc"}}).done((function(t){e.setState({episodes:t})}))}},{key:"renderCountdown",value:function(e){return e.air_datetime?new Date(e.air_datetime)-(new Date).getTime()>0?" Â· In "+P(e.air_datetime):" Â· "+P(e.air_datetime)+" ago":""}},{key:"render",value:function(){var e=this;return 0==this.state.episodes.length?o.a.createElement("p",{className:"text-muted"},"No ETA for new episodes."):o.a.createElement("div",{className:"latest-episodes-side-bar"},this.state.episodes.map((function(t,n){return o.a.createElement("div",{key:t.number,className:"item"},o.a.createElement("p",null,t.title),o.a.createElement("p",null,e.renderEpisodeNumber(t)),o.a.createElement("p",null,t.air_date," ",e.renderCountdown(t)))})))}}])&&$n(t.prototype,n),r&&$n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);nr.propTypes=tr,nr.defaultProps={numberOfEpisodes:3};var rr=nr;function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lr(e);if(t){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ur(e)}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr={showId:H.a.number.isRequired},pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(i,e);var t,n,r,a=sr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={episode:null},t.eventGet=t.get.bind(ur(t)),document.addEventListener("episode_watched_status",t.eventGet),document.addEventListener("visibilitychange",t.eventGet),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("episode_watched_status",this.eventGet),document.removeEventListener("visibilitychange",this.eventGet)}},{key:"get",value:function(){var e=this;document.hidden||b()&&p("/1/shows/".concat(this.props.showId,"/episodes/last-watched")).done((function(t){e.setState({episode:t})}))}},{key:"render",value:function(){return this.state.episode?o.a.createElement(Mn,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0}):o.a.createElement("p",{className:"text-muted"},"No episodes has been watched")}}])&&ar(t.prototype,n),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);pr.propTypes=fr;var dr=pr;function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gr(e);if(t){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vr(this,n)}}function vr(e,t){if(t&&("object"===hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}H.a.object.isRequired;var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(i,e);var t,n,r,a=br(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," | SEPLIS")}},{key:"renderAirDates",value:function(){if(!(this.props.show.status>1))return o.a.createElement("div",{className:"col-12 col-lg-4 col-margin"},o.a.createElement("h4",{className:"header"},"Next to air"),o.a.createElement(rr,{showId:parseInt(this.props.show.id)}))}},{key:"renderNextToWatch",value:function(){return o.a.createElement("div",{className:"col-12 col-lg-8 col-margin"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-margin"},o.a.createElement("h4",{className:"header"},"To watch"),o.a.createElement(zn,{showId:parseInt(this.props.show.id),numberOfEpisodes:2})),o.a.createElement("div",{className:"col-12"},o.a.createElement("h4",{className:"header"},"Previous watched"),o.a.createElement(dr,{showId:parseInt(this.props.show.id)}))))}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},this.renderNextToWatch(),this.renderAirDates())}}])&&yr(t.prototype,n),r&&yr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t){return(kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_r(e);if(t){var o=_r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pr(this,n)}}function Pr(e,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cr={seasons:H.a.array.isRequired,selectedNumber:H.a.number,onChange:H.a.func,name:H.a.string},Nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kr(e,t)}(i,e);var t,n,r,a=jr(i);function i(){return Sr(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"renderSeason",value:function(e){for(var t=[],n=e.from;n<=e.to;n++)t.push(o.a.createElement("option",{key:n,value:n},"S",e.season,": Episode ",n-e.from+1));return o.a.createElement("optgroup",{key:e.season,label:"Season ".concat(e.season)},t)}},{key:"render",value:function(){var e=this;return o.a.createElement("select",{name:this.props.name,className:"form-control",onChange:this.props.onChange,value:this.props.selectedNumber},this.props.seasons.map((function(t,n){return e.renderSeason(t)})))}}])&&Or(t.prototype,n),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Nr.propTypes=Cr;var Rr=Nr;n(53);function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Br(e);if(t){var o=Br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}function Ar(e,t){if(t&&("object"===Tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mr(e)}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lr={showId:H.a.number.isRequired,seasons:H.a.array.isRequired},qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xr(e,t)}(i,e);var t,n,r,a=Dr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={showForm:!1,fromNumber:1,toNumber:1,saving:!1},t.dropdownButtonClick=t.dropdownButtonClick.bind(Mr(t)),t.selectChange=t.selectChange.bind(Mr(t)),t.formSubmit=t.formSubmit.bind(Mr(t)),t}return t=i,(n=[{key:"selectChange",value:function(e){this.state[e.target.name]=parseInt(e.target.value),this.state.fromNumber>this.state.toNumber&&(this.state.toNumber=this.state.fromNumber),this.setState(this.state)}},{key:"dropdownButtonClick",value:function(e){this.getNextToWatch()}},{key:"getNextToWatch",value:function(){var e=this;p("/1/shows/".concat(this.props.showId,"/episodes/to-watch")).done((function(t){!1===e.state.showForm&&e.setState({showForm:!0}),e.setState({fromNumber:t.number,toNumber:t.number})})).fail((function(t){1301===t.responseJSON.code&&e.setState({showForm:!0})}))}},{key:"formSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({saving:!0});var n=this.props.showId,r=this.state.fromNumber,o=this.state.toNumber;p("/1/shows/".concat(n,"/episodes/").concat(r,"-").concat(o,"/watched"),{method:"PUT"}).fail((function(){t.setState({saving:!1})})).done((function(){location.reload()}))}},{key:"renderForm",value:function(){return o.a.createElement("form",{onSubmit:this.formSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"From episode"),o.a.createElement(Rr,{seasons:this.props.seasons,name:"fromNumber",onChange:this.selectChange,selectedNumber:this.state.fromNumber})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"To episode"),o.a.createElement(Rr,{seasons:this.props.seasons,name:"toNumber",onChange:this.selectChange,selectedNumber:this.state.toNumber})),o.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.saving},this.state.saving?"Please wait...":"Watched"))}},{key:"render",value:function(){return o.a.createElement("div",{className:"dropdown watched-progression"},o.a.createElement("button",{className:"btn btn-dark btn-transparent dropdown-toggle","data-toggle":"dropdown",onClick:this.dropdownButtonClick},"Set progression"),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},this.state.showForm?this.renderForm():""))}}])&&Ir(t.prototype,n),r&&Ir(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);qr.propTypes=Lr;var Ur=qr;function Fr(e){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jr(e);if(t){var o=Jr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zr(this,n)}}function zr(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr={seasons:H.a.array.isRequired,selectedSeason:H.a.number,onChange:H.a.func},Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(i,e);var t,n,r,a=Gr(i);function i(){return Hr(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("select",{className:"form-control",value:this.props.selectedSeason,onChange:this.props.onChange},this.props.seasons.map((function(e,t){return o.a.createElement("option",{key:e.season,value:e.season},"Season ",e.season)})))}}])&&Wr(t.prototype,n),r&&Wr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Vr.propTypes=Yr;var $r=Vr;function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return(to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function no(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ao(e);if(t){var o=ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oo(e)}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var io={showId:H.a.number.isRequired,seasons:H.a.array.isRequired,seasonNumber:H.a.number.isRequired,onSeasonChange:H.a.func},so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&to(e,t)}(i,e);var t,n,r,a=no(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={episodes:[],seasonNumber:t.props.seasonNumber},t.onSeasonChange=t.onSeasonChange.bind(oo(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getEpisodes()}},{key:"getEpisodes",value:function(){var e=this;if(!(this.props.seasons.length<1)){var t=l()(window).scrollTop();this.setState({episodes:[]});var n=this.seasonEpisodeNumbers(this.state.seasonNumber),r={};r.q="number:[".concat(n.from," TO ").concat(n.to,"]"),r.per_page=n.total,b()&&(r.append="user_watched"),p("/1/shows/".concat(this.props.showId,"/episodes"),{query:r}).done((function(n){e.setState({episodes:n},(function(){l()(window).scrollTop(t)}))}))}}},{key:"seasonEpisodeNumbers",value:function(e){var t,n=Qr(this.props.seasons);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.season==e)return r}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"onSeasonChange",value:function(e){var t=this,n=parseInt(e.target.value);this.setState({seasonNumber:n},(function(){t.props.onSeasonChange?t.props.onSeasonChange(n):t.getEpisodes()}))}},{key:"render",value:function(){var e=this;return this.props.seasons.length<1?o.a.createElement("div",{className:"alert alert-warning"},o.a.createElement("strong",null,"This show has 0 episodes.")):o.a.createElement("span",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-auto ml-auto order-md-12 mb-2 mb-md-0"},o.a.createElement("div",{className:"float-right"},o.a.createElement(Ur,{showId:this.props.showId,seasons:this.props.seasons}))),o.a.createElement("div",{className:"col-12 col-md-4"},o.a.createElement($r,{seasons:this.props.seasons,selectedSeason:this.state.seasonNumber,onChange:this.onSeasonChange}))),o.a.createElement("div",{className:"row show-season-list"},o.a.createElement("div",{className:"col-12 d-md-none col-margin"}),o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row"},this.state.episodes.map((function(t,n){return o.a.createElement("div",{key:t.number,className:"col-12 col-md-6 col-lg-4"},o.a.createElement("div",{className:"d-none d-md-block col-margin"}),o.a.createElement(Mn,{showId:e.props.showId,episode:t}))}))))))}}])&&eo(t.prototype,n),r&&eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);so.propTypes=io;var co=so;function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fo(e,t){return(fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mo(e);if(t){var o=mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ho(this,n)}}function ho(e,t){if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yo(e)}function yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fo(e,t)}(i,e);var t,n,r,a=po(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onSeasonChange=t.seasonChange.bind(yo(t)),t.state={season:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Seasons | SEPLIS"),this.setQuerySeason()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.setQuerySeason()}},{key:"setQuerySeason",value:function(){var e=this,t=h.a.parse(location.search),n=parseInt(t.season)||null;n?this.setSeason(n):(this.props.show.seasons.length>0&&(n=this.props.show.seasons[0].season),b()?p("/1/shows/".concat(this.props.show.id,"/episodes/to-watch")).done((function(t){e.setSeason(t?t.season:n)})).fail((function(){e.setSeason(n)})):this.setSeason(n))}},{key:"setSeason",value:function(e){document.title="".concat(this.props.show.title," - Season ").concat(e," | SEPLIS"),this.setState({season:e})}},{key:"seasonChange",value:function(e){this.setState({season:e}),this.props.history.push("".concat(this.props.location.pathname,"?season=").concat(e))}},{key:"render",value:function(){return this.state.season?o.a.createElement(co,{key:this.state.season,showId:this.props.show.id,seasons:this.props.show.seasons,seasonNumber:this.state.season,onSeasonChange:this.onSeasonChange}):null}}])&&lo(t.prototype,n),r&&lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jo(e);if(t){var o=jo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ko(this,n)}}function ko(e,t){if(t&&("object"===vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&So(e,t)}(i,e);var t,n,r,a=Oo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={userStats:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Stats | SEPLIS"),b()&&this.getUserStats()}},{key:"getUserStats",value:function(){var e=this;p("/1/shows/".concat(this.props.show.id,"/user-stats")).done((function(t){e.setState({userStats:t})}))}},{key:"countEpisodes",value:function(){if(!this.props.show.seasons)return 0;var e,t=0,n=go(this.props.show.seasons);try{for(n.s();!(e=n.n()).done;)t+=e.value.total}catch(e){n.e(e)}finally{n.f()}return t}},{key:"renderUserStats",value:function(){return this.state.userStats?o.a.createElement("span",null,o.a.createElement("h2",{className:"mb-1 mt-3"},"Your stats"),o.a.createElement("table",{className:"table table-striped"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{width:"200px"},"Episodes watched"),o.a.createElement("td",null,this.state.userStats.episodes_watched)),o.a.createElement("tr",null,o.a.createElement("th",null,"Time spent watching"),o.a.createElement("td",null,_(60*this.state.userStats.episodes_watched_minutes,!0)))))):null}},{key:"render",value:function(){var e=this.countEpisodes();return o.a.createElement("span",null,this.renderUserStats(),o.a.createElement("h2",{className:"header"},"Show stats"),o.a.createElement("table",{className:"table table-striped"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{width:"200px"},"Total episodes"),o.a.createElement("td",null,e)),o.a.createElement("tr",null,o.a.createElement("th",null,"Total watchtime"),o.a.createElement("td",null,_(this.props.show.runtime*e*60,!0))))))}}])&&Eo(t.prototype,n),r&&Eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function To(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xo(e);if(t){var o=xo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(i,e);var t,n,r,a=To(i);function i(){return Co(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Info | SEPLIS")}},{key:"statusToText",value:function(e){switch(e){case 1:return"Running";case 2:return"Ended";default:return"Unknown"}}},{key:"renderGeneral",value:function(){var e=this.props.show;return o.a.createElement("div",{className:"col-12"},o.a.createElement("table",{className:"table table-sm borderless"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Status"),o.a.createElement("td",null,this.statusToText(e.status))),o.a.createElement("tr",null,o.a.createElement("th",{width:"100"},"Premiered"),o.a.createElement("td",null,e.premiered||"unknown")),o.a.createElement("tr",null,o.a.createElement("th",null,"Runtime"),o.a.createElement("td",null,e.runtime?e.runtime+" minutes":"Unknown")),o.a.createElement("tr",null,o.a.createElement("th",null,"Genres"),o.a.createElement("td",null,e.genres.join(", "))),o.a.createElement("tr",null,o.a.createElement("th",null,"Language"),o.a.createElement("td",null,e.language?e.language:"Unknown")))))}},{key:"renderDescription",value:function(){var e=this.props.show.description;return o.a.createElement("div",{className:"col-12 col-md-12"},o.a.createElement("p",{className:"text-justify"},e.text,o.a.createElement("br",null),o.a.createElement("font",{className:"text-muted"},"Source:"),"Â ",o.a.createElement("a",{href:e.url,target:"_blank"},e.title)))}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},this.renderGeneral(),this.renderDescription())}}])&&No(t.prototype,n),r&&No(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(54),n(55);function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fo(e);if(t){var o=Fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Uo(this,n)}}function Uo(e,t){if(t&&("object"===Ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ho={options:H.a.arrayOf(H.a.string)},Wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lo(e,t)}(i,e);var t,n,r,a=qo(i);function i(){return Mo(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){l()("select#alternative-titles").select2({tags:!0})}},{key:"render",value:function(){return o.a.createElement("span",{style:{color:"#000000"}},o.a.createElement("select",{name:"alternative_titles",id:"alternative-titles",className:"form-control",defaultValue:this.props.options,multiple:!0},this.props.options.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))))}}])&&Bo(t.prototype,n),r&&Bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Wo.propTypes=Ho,Wo.defaultProps={options:[]};var Xo=Wo;function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zo(e);if(t){var o=Zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ko(this,n)}}function Ko(e,t){if(t&&("object"===Go(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qo(e)}function Qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zo(e){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ea={show:H.a.object},ta=[{key:"imdb",title:"IMDb",required:!0,importer_info:!1,importer_episodes:!1},{key:"tvmaze",title:"TVMaze",required:!1,importer_info:!0,importer_episodes:!0},{key:"thetvdb",title:"TheTVDB",required:!1,importer_info:!0,importer_episodes:!0}],na=["info","episodes"],ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}(i,e);var t,n,r,a=$o(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onImporterSelected=t.importerSelected.bind(Qo(t)),t.onInputChange=t.inputChanged.bind(Qo(t));var n=e.show||{},r=n.externals||{},o=n.importers||{};t.state={"importers.info":o.info||"","importers.episodes":o.episodes||"",alternative_titles:n.alternative_titles?n.alternative_titles.slice():[],episode_type:n.episode_type||2};var s,c=zo(ta);try{for(c.s();!(s=c.n()).done;){var u=s.value;t.state["externals.".concat(u.key)]=r[u.key]||""}}catch(e){c.e(e)}finally{c.f()}return t}return t=i,(n=[{key:"importerSelected",value:function(e){var t={};t[e.target.name]=e.target.value;var n,r=zo(na);try{for(r.s();!(n=r.n()).done;){var o=n.value;"importers.".concat(o)!=e.target.name&&""===this.state["importers.".concat(o)]&&(t["importers.".concat(o)]=e.target.value)}}catch(e){r.e(e)}finally{r.f()}this.setState(t)}},{key:"inputChanged",value:function(e){var t={},n=e.target.name,r=e.target.value;if(t[n]=r,this.setState(t),n.startsWith("externals.")&&""!=r){var o={};o[n.substring(n.indexOf(".")+1,n.length)]=r,this.lookupExternals(o)}}},{key:"lookupExternals",value:function(e){var t=this;p("/api/tvmaze-show-lookup",{localRequest:!0,query:e}).done((function(e){var n={"externals.tvmaze":e.id};for(var r in e.externals)"externals.".concat(r)in t.state&&(n["externals.".concat(r)]=e.externals[r]);t.setState(n)}))}},{key:"renderImporter",value:function(e){var t,n=[],r=zo(ta);try{for(r.s();!(t=r.n()).done;){var a=t.value;a["importer_"+e]&&n.push(a)}}catch(e){r.e(e)}finally{r.f()}return o.a.createElement("fieldset",{className:"form-group",key:e},o.a.createElement("label",null,"Import ",e," from"),o.a.createElement("select",{name:"importers."+e,className:"form-control importers",onChange:this.onImporterSelected,value:this.state["importers.".concat(e)]},o.a.createElement("option",{value:""}),n.map((function(e){return o.a.createElement("option",{key:e.key,value:e.key},e.title)}))))}},{key:"renderExternals",value:function(){var e=this;return ta.map((function(t){return o.a.createElement("fieldset",{key:t.key,className:"form-group"},o.a.createElement("label",null,t.title," ID ",t.required?o.a.createElement("b",null,"*"):""),o.a.createElement("input",{name:"externals.".concat(t.key),className:"form-control",required:t.required,value:e.state["externals.".concat(t.key)],onChange:e.onInputChange}),t.required?o.a.createElement("small",{className:"text-muted"}," Required to prevent show duplication."):"")}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("h3",null,"Externals"),this.renderExternals(),o.a.createElement("h3",null,"Importers"),na.map((function(t){return e.renderImporter(t)}))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("h3",null,"General"),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Alternative titles"),o.a.createElement(Xo,{options:this.state.alternative_titles})),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Episode type"),o.a.createElement("select",{name:"episode_type",className:"form-control",defaultValue:this.state.episode_type},o.a.createElement("option",{value:"1"},"Absolute number"),o.a.createElement("option",{value:"2"},"Season episode"),o.a.createElement("option",{value:"3"},"Air date")))))}}])&&Yo(t.prototype,n),r&&Yo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);ra.propTypes=ea;var oa=ra,aa=n(13),ia=n.n(aa),sa=n(14);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e,t){return(la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ha(e);if(t){var o=ha(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pa(this,n)}}function pa(e,t){if(t&&("object"===ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return da(e)}function da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ha(e){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ya={show:H.a.object},ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(i,e);var t,n,r,a=fa(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=da(t),o=function(e){e.preventDefault(),confirm("Sure you want to delete this show?")&&(t.setState({deleting:!0}),p("/1/shows/".concat(t.props.show.id),{method:"DELETE"}).done((function(){location.href="/"})).fail((function(e){t.setState({error:e.responseJSON})})).always((function(){t.setState({deleting:!1})})))},(r="deleteClick")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.onSubmit=t.submit.bind(da(t)),t.state={error:null,success:null,loading:!1,deleting:!1,deleteSuccess:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Edit | SEPLIS")}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0});var n=Object(sa.unflatten)(ia()(e.target,{hash:!0}));p("/1/shows/".concat(this.props.show.id),{data:n,method:"PUT"}).done((function(e){t.setState({success:e}),p("/1/shows/".concat(t.props.show.id,"/update"),{method:"POST"})})).fail((function(e){t.setState({error:e.responseJSON})})).always((function(){t.setState({loading:!1})}))}},{key:"renderError",value:function(){if(this.state.error)return o.a.createElement("div",{className:"alert alert-danger"},this.state.error.message)}},{key:"renderSuccess",value:function(){if(this.state.success)return o.a.createElement("div",{className:"alert alert-success"},"The show was successfully updated.")}},{key:"renderDelete",value:function(){if(!(w()<3))return o.a.createElement("button",{className:"btn btn-warning mr-2",disabled:this.state.deleting,onClick:this.deleteClick},this.state.deleting?"Deleting...":"Delete")}},{key:"render",value:function(){return o.a.createElement("form",{method:"post",onSubmit:this.onSubmit},o.a.createElement(oa,{show:this.props.show}),this.renderError(),this.renderSuccess(),this.renderDelete(),o.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Saving...":"Save"))}}])&&ua(t.prototype,n),r&&ua(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);ma.propTypes=ya;var ba=ma;n(57);function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wa(e,t){return(wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ka(e);if(t){var o=ka(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sa(this,n)}}function Sa(e,t){if(t&&("object"===va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oa(e)}function Oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ja={jqXHR:H.a.object.isRequired,onPageChange:H.a.func},Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t)}(i,e);var t,n,r,a=Ea(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.parseJqXHR(),t.onPageChange=t.pageChange.bind(Oa(t)),t}return t=i,(n=[{key:"componentWillReceiveProps",value:function(e){this.setState(this.parseJqXHR(e.jqXHR))}},{key:"pageChange",value:function(e){this.state.page=e.target.value,null!=this.props.onPageChange&&this.props.onPageChange(e)}},{key:"parseJqXHR",value:function(e){return{pages:this.props.jqXHR.getResponseHeader("X-Total-Pages"),page:this.props.jqXHR.getResponseHeader("X-Page")}}},{key:"renderOptions",value:function(){for(var e=[],t=1;t<=this.state.pages;t++)e.push(o.a.createElement("option",{key:t,value:t},"Page ",t));return e}},{key:"render",value:function(){return 0==this.props.jqXHR.getResponseHeader("X-Total-Pages")?null:o.a.createElement("select",{className:"form-control",onChange:this.onPageChange,value:this.state.page},this.renderOptions())}}])&&ga(t.prototype,n),r&&ga(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Pa.propTypes=ja;var _a=Pa;function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Da(e);if(t){var o=Da(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ia(this,n)}}function Ia(e,t){if(t&&("object"===Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xa(e)}function xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ra(e,t)}(i,e);var t,n,r,a=Ta(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Aa(xa(t=a.call(this,e)),"pageChange",(function(e){t.setState({page:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.get()}))})),Aa(xa(t),"setDefault",(function(e){e.preventDefault();var n=t.props.show;p("/1/shows/".concat(n.id),{data:{poster_image_id:e.target.getAttribute("image-id")},method:"PATCH"}).done((function(){location.reload()})).fail((function(e){alert(e.message)}))})),t.state={images:null,loading:!0,jqXHR:null,page:R().page||1},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Images | SEPLIS"),this.get()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,loading:!0},(function(){t.get()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"get",value:function(){var e=this,t=this.props.show;p("/1/shows/".concat(t.id,"/images"),{query:{page:this.state.page,per_page:8}}).done((function(t,n,r){e.setState({images:t,jqXHR:r,loading:!1})}))}},{key:"renderSetDefault",value:function(e){if(!(w()<2)){var t=this.props.show.poster_image;return t&&t.hash==e.hash?o.a.createElement("div",{className:"black-box"},"Is Default"):o.a.createElement("div",{className:"black-box"},o.a.createElement("a",{href:"#","image-id":e.id,onClick:this.setDefault},"Set as Default"))}}},{key:"renderNewImageButton",value:function(){if(!(w()<2))return o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"ml-auto"},o.a.createElement(s.b,{className:"btn btn-secondary",to:"/show/".concat(this.props.show.id,"/new-image")},"New image")))}},{key:"render",value:function(){var e=this;return this.state.loading?o.a.createElement(We,null):o.a.createElement(o.a.Fragment,null,this.renderNewImageButton(),o.a.createElement("div",{className:"d-flex flex-wrap"},0==this.state.images.length?o.a.createElement("div",{className:"text-center w-100"},"No images"):"",this.state.images.map((function(t){return o.a.createElement("div",{key:t.hash,className:"mr-3 mb-3",style:{width:"170px"}},o.a.createElement("a",{href:t.url+"@.jpg",target:"_blank"},o.a.createElement("img",{title:e.props.show.title,alt:e.props.show.title,src:t.url+"@SX180",className:"img-fluid"})),e.renderSetDefault(t))}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"}),o.a.createElement("div",{className:"col-sm-3 col-md-2"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))}}])&&Na(t.prototype,n),r&&Na(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wa(e);if(t){var o=Wa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fa(this,n)}}function Fa(e,t){if(t&&("object"===Ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ha(e)}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qa(e,t)}(i,e);var t,n,r,a=Ua(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Xa(Ha(t=a.call(this,e)),"onUpload",(function(){var e=t.props.show;p("/1/shows/".concat(e.id,"/images"),{data:{source_title:"User upload",type:1}}).done((function(n){var r=new FormData;r.append("file",t.state.selectedFile,t.state.selectedFile.name),p("/1/shows/".concat(e.id,"/images/").concat(n.id,"/data"),{data:r}).done((function(){location.href="/show/".concat(e.id,"/images")})).fail((function(e){alert(e.responseJSON.message)}))})).fail((function(e){alert(e.responseJSON.message)}))})),Xa(Ha(t),"onFileChange",(function(e){t.setState({selectedFile:e.target.files[0]})})),t.state={selectedFile:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="New Image | SEPLIS"}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"New Image"),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",null,o.a.createElement("input",{type:"file",className:"form-control",onChange:this.onFileChange})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary ml-2",onClick:this.onUpload},"Upload"))))}}])&&La(t.prototype,n),r&&La(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(65);function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(){return(Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qa(e);if(t){var o=Qa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ka(this,n)}}function Ka(e,t){if(t&&("object"===za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qa(e){return(Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Za=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Va(e,t)}(i,e);var t,n,r,a=$a(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={show:document.seplis_tv_show},t}return t=i,(n=[{key:"renderShow",value:function(){var e=this,t=this.state.show;return o.a.createElement("div",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-4 col-sm-4 col-md-4 col-margin d-none d-sm-block"},o.a.createElement("img",{src:null!=t.poster_image?t.poster_image.url+"@SX360":"",width:"100%"})),o.a.createElement("div",{className:"col-4 d-sm-none"}),o.a.createElement("div",{className:"col-12 col-sm-8"},o.a.createElement("div",{className:"show-header mb-2"},o.a.createElement("h1",{className:"title"},t.title,"Â ",o.a.createElement("small",{className:"text-muted"},null!=t.premiered?t.premiered.substring(0,4):"")),o.a.createElement("div",{className:"ml-auto"},o.a.createElement(Vt,{showId:t.id}))),o.a.createElement(mn,{showId:parseInt(this.state.show.id)}),o.a.createElement(c.a,{exact:!0,path:"/show/:showId",render:function(t){return o.a.createElement(wr,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/main",render:function(t){return o.a.createElement(wr,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/info",render:function(t){return o.a.createElement(Do,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/seasons",render:function(t){return o.a.createElement(bo,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/images",render:function(t){return o.a.createElement(Ma,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/new-image",render:function(t){return o.a.createElement(Ga,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/stats",render:function(t){return o.a.createElement(Po,Ja({},t,{show:e.state.show}))}}),o.a.createElement(c.a,{path:"/show/:showId/edit",render:function(t){return o.a.createElement(ba,Ja({},t,{show:e.state.show}))}}))))}},{key:"renderShowImporting",value:function(){return setTimeout((function(){location.reload()}),5e3),o.a.createElement("center",null,o.a.createElement("h1",null,"The show is currently in the import queue"),o.a.createElement("h2",null,"Check back later!"),o.a.createElement(s.b,{className:"btn btn-warning",to:"/show/".concat(this.state.show.id,"/edit")},"Edit show"),o.a.createElement(We,null))}},{key:"render",value:function(){return this.state.show?0!=this.state.show.status||this.props.location.pathname.endsWith("/edit")||null==this.state.show.importers.info?this.renderShow():this.renderShowImporting():o.a.createElement(We,null)}}])&&Ya(t.prototype,n),r&&Ya(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ii(e);if(t){var o=ii(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oi(this,n)}}function oi(e,t){if(t&&("object"===ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ai(e)}function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ni(e,t)}(i,e);var t,n,r,a=ri(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onSubmit=t.submit.bind(ai(t)),t.state={success:null,error:null,loading:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="New Show | SEPLIS"}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0}),p("/1/shows",{data:Object(sa.unflatten)(ia()(e.target,{hash:!0})),method:"POST"}).done((function(e){t.setState({success:e})})).fail((function(e){t.setState({error:e.responseJSON})})).always((function(){t.setState({loading:!1})}))}},{key:"renderError",value:function(){if(!this.state.error)return"";switch(this.state.error.code){case 1403:var e=this.state.error.extra.show.title||"the show";return o.a.createElement("div",{className:"alert alert-danger"},this.state.error.message,".",o.a.createElement("br",null),o.a.createElement("a",{href:"/show/".concat(this.state.error.extra.show.id)},"Go to ",e),".");default:return o.a.createElement("div",{className:"alert alert-danger"},this.state.error.message)}}},{key:"renderSuccess",value:function(){return o.a.createElement("span",null,o.a.createElement("h1",null,"Show successfully created"),o.a.createElement("div",{className:"alert alert-success"},"The show has been created. It will be imported shortly.",o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/show/".concat(this.state.success.id)},"Go to the show")),o.a.createElement("li",null,o.a.createElement(s.b,{to:"/show-new"},"Create another show")))))}},{key:"render",value:function(){return null!=this.state.success?this.renderSuccess():o.a.createElement("form",{method:"post",onSubmit:this.onSubmit},o.a.createElement("h1",null,"New show"),o.a.createElement(oa,null),this.renderError(),o.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Creating...":"Create"))}}])&&ti(t.prototype,n),r&&ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(22);function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yi(e);if(t){var o=yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return di(this,n)}}function di(e,t){if(t&&("object"===ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hi(e)}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bi={shows:H.a.array.isRequired,mobile_xscroll:H.a.bool,listMode:H.a.string},vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fi(e,t)}(i,e);var t,n,r,a=pi(i);function i(){var e;ui(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mi(hi(e=a.call.apply(a,[this].concat(n))),"trClick",(function(e){location.href="/show/".concat(e.currentTarget.dataset.showid)})),e}return t=i,(n=[{key:"renderShow",value:function(e){return o.a.createElement("div",{key:e.id,className:"col-4 col-sm-4 col-md-3 col-lg-2 col-margin"},o.a.createElement("a",{href:"/show/".concat(e.id)},o.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})),this.renderEpisode(e))}},{key:"renderEpisode",value:function(e){if("user_watching"in e)return o.a.createElement("div",{className:"black-box"},S(e,e.user_watching.episode))}},{key:"renderGrid",value:function(){var e=this,t=X()({row:!0,slider:this.props.mobile_xscroll});return o.a.createElement("div",{className:t},this.props.shows.map((function(t){return e.renderShow(t)})))}},{key:"renderUserWatching",value:function(e){if("user_watching"in e)return o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,S(e,e.user_watching.episode)),o.a.createElement("td",{title:e.user_watching.watched_at},e.user_watching.watched_at.substring(0,10)))}},{key:"renderUserWatchingHeader",value:function(){return this.props.shows.length<1?null:"user_watching"in this.props.shows[0]?o.a.createElement(o.a.Fragment,null,o.a.createElement("th",{width:"150px",title:"Latest watched episode"},"Episode"),o.a.createElement("th",{width:"115px"},"Watched at")):void 0}},{key:"renderListItem",value:function(e){return o.a.createElement("tr",{key:e.id,onClick:this.trClick,"data-showid":e.id,className:"pointer"},o.a.createElement("td",null,o.a.createElement("a",{href:"/show/".concat(e.id)},e.title)),this.renderUserWatching(e),o.a.createElement("td",{width:"115px"},e.premiered),o.a.createElement("td",{width:"10px",className:"text-right"},e.user_rating))}},{key:"renderList",value:function(){var e=this;return o.a.createElement("table",{className:"table table-striped"},o.a.createElement("thead",null,o.a.createElement("tr",{className:"thead-dark"},o.a.createElement("th",null,"Title"),this.renderUserWatchingHeader(),o.a.createElement("th",null,"Premiered"),o.a.createElement("th",{className:"text-right"},"Rating"))),o.a.createElement("tbody",null,this.props.shows.map((function(t){return e.renderListItem(t)}))))}},{key:"render",value:function(){var e=this.props.listMode;return e||(e=localStorage.getItem("listMode")||"grid"),"grid"==e?this.renderGrid():this.renderList()}}])&&li(t.prototype,n),r&&li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);vi.propTypes=bi,vi.defaultProps={mobile_xscroll:!1,listMode:"grid"};var gi=vi;function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pi(e);if(t){var o=Pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ki(this,n)}}function ki(e,t){if(t&&("object"===wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ji(e)}function ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _i={onModeChange:H.a.func},Ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(i,e);var t,n,r,a=Oi(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=ji(t),o=function(e){e.target.blur();var n=e.currentTarget.dataset.type;localStorage.setItem("listMode",n),t.setState({listMode:n}),null!=t.props.onModeChange&&t.props.onModeChange(n)},(r="modeChange")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={listMode:localStorage.getItem("listMode")||"grid"},t}return t=i,(n=[{key:"renderButton",value:function(e){var t=X()({btn:!0,"btn-info":this.state.listMode==e,"btn-dark":this.state.listMode!=e}),n=X()({fas:!0,"fa-th-large":"grid"==e,"fa-bars":"list"==e});return o.a.createElement("button",{onClick:this.modeChange,className:t,"data-type":e},o.a.createElement("i",{className:n}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.renderButton("grid"),this.renderButton("list"))}}])&&Ei(t.prototype,n),r&&Ei(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Ci.propTypes=_i;var Ni=Ci;function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mi(e);if(t){var o=Mi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Di(this,n)}}function Di(e,t){if(t&&("object"===Ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ai(e)}function Ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bi={onChange:H.a.func,selected:H.a.string},Li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ii(e,t)}(i,e);var t,n,r,a=xi(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=Ai(t),o=function(e){e.target.blur();var n=e.target.value;t.setState({selectedGenre:n}),null!=t.props.onChange&&t.props.onChange(n)},(r="onChange")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={genres:[],selectedGenre:e.selected},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=this;p("/1/show-genres").done((function(t){e.setState({genres:t})}))}},{key:"render",value:function(){return o.a.createElement("select",{className:"form-control",value:this.state.selectedGenre,onChange:this.onChange},o.a.createElement("option",{value:""},"Genres"),this.state.genres.map((function(e,t){return o.a.createElement("option",{key:"genre-".concat(t),value:e},e)})))}}])&&Ti(t.prototype,n),r&&Ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Li.propTypes=Bi;var qi=Li;function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zi(e);if(t){var o=zi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xi(this,n)}}function Xi(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gi(e)}function Gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hi(e,t)}(i,e);var t,n,r,a=Wi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ji(Gi(t=a.call(this,e)),"pageChange",(function(e){t.setState({page:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.getShows()}))})),Ji(Gi(t),"listModeChange",(function(){t.forceUpdate()})),Ji(Gi(t),"sortChange",(function(e){t.setState({sort:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.getShows()}))})),Ji(Gi(t),"genreChange",(function(e){t.setState({genre:e,page:1,loading:!0},(function(){t.setBrowserPath(),t.getShows()}))})),v(),t.state={loading:!0,items:[],jqXHR:null,page:R().page||1,sort:R().sort||"followed_at",genre:R().genre||""},t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,sort:R().sort||"followed_at"},(function(){t.getShows()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page,"&sort=").concat(this.state.sort,"&genre=").concat(this.state.genre))}},{key:"componentDidMount",value:function(){document.title="Following | SEPLIS",this.getShows()}},{key:"getShows",value:function(){var e=this,t=g();this.setState({loading:!0}),p("/1/users/".concat(t,"/fan-of"),{query:{page:this.state.page,per_page:60,expand:"user_rating",sort:this.state.sort,genre:this.state.genre}}).done((function(t,n,r){e.setState({shows:t,loading:!1,jqXHR:r,totalCount:r.getResponseHeader("X-Total-Count")})}))}},{key:"render",value:function(){return 1==this.state.loading?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Following ",this.state.totalCount," shows"),o.a.createElement(We,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"d-md-flex mb-2"},o.a.createElement("div",null,o.a.createElement("h2",{className:"mb-2"},"Following ",this.state.totalCount," shows")),o.a.createElement("div",{className:"ml-auto d-md-flex"},o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement(Ni,{onModeChange:this.listModeChange})),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement(qi,{onChange:this.genreChange,selected:this.state.genre})),o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement("select",{className:"form-control",onChange:this.sortChange,value:this.state.sort},o.a.createElement("option",{value:"followed_at"},"Sort: Followed at"),o.a.createElement("option",{value:"user_rating"},"Sort: Rating"))),o.a.createElement("div",{className:"d-sm-block d-none"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))),o.a.createElement(gi,{listMode:"",shows:this.state.shows}),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"ml-auto"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))}}])&&Fi(t.prototype,n),r&&Fi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=es(e);if(t){var o=es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zi(this,n)}}function Zi(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function es(e){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ts={perPage:H.a.number,page:H.a.number,items:H.a.array},ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ki(e,t)}(i,e);var t,n,r,a=Qi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this)).state={items:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;os(this.props.perPage,this.props.page).then((function(t){e.setState({items:t.items})}))}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return o.a.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},o.a.createElement("a",{href:"/show/".concat(t.id)},o.a.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})),o.a.createElement("div",{className:"black-box"},S(t,n)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?o.a.createElement("div",{className:"alert alert-info"},"No recently aired episodes from shows you're following."):o.a.createElement("div",{className:"row"},this.state.items.map((function(t){return e.renderItem(t)})))}}])&&$i(t.prototype,n),r&&$i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);ns.propTypes=ts,ns.defaultProps={perPage:6,page:1,items:null};var rs=ns;function os(e,t){return new Promise((function(n,r){p("/1/users/".concat(g(),"/shows-recently-aired"),{query:{per_page:e,page:t}}).done((function(e,t,r){n({items:e,jqXHR:r})})).fail((function(e){r(e)}))}))}function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ss(e,t){return(ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fs(e);if(t){var o=fs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return us(this,n)}}function us(e,t){if(t&&("object"===as(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ls(e)}function ls(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fs(e){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ss(e,t)}(i,e);var t,n,r,a=cs(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.onPageChange=t.pageChange.bind(ls(t)),t.state={loading:!0,items:[],jqXHR:null,page:R().page||1},t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,loading:!0},(function(){t.getItems()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.getItems()}))}},{key:"componentDidMount",value:function(){document.title="Recently Aired | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;os(60,this.state.page).then((function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})}))}},{key:"render",value:function(){return 1==this.state.loading?o.a.createElement("span",null,o.a.createElement("h2",null,"Recently aired"),o.a.createElement(We,null)):o.a.createElement("span",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},o.a.createElement("h2",null,"Recently aired")),o.a.createElement("div",{className:"col-sm-3 col-md-2 col-margin"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),o.a.createElement(rs,{items:this.state.items}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-9 col-md-10"}),o.a.createElement("div",{className:"col-sm-3 col-md-2"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&is(t.prototype,n),r&&is(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ms(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gs(e);if(t){var o=gs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bs(this,n)}}function bs(e,t){if(t&&("object"===ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vs(e)}function vs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gs(e){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ys(e,t)}(i,e);var t,n,r,a=ms(i);function i(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ws(vs(n=a.call(this,e)),"pageChange",(function(e){n.setState({page:e.target.value,loading:!0},(function(){n.setBrowserPath(),n.getShows()}))})),ws(vs(n),"listModeChange",(function(){n.forceUpdate()})),ws(vs(n),"sortChange",(function(e){n.setState({sort:e.target.value,loading:!0},(function(){n.setBrowserPath(),n.getShows()}))})),ws(vs(n),"genreChange",(function(e){n.setState({genre:e,page:1,loading:!0},(function(){n.setBrowserPath(),n.getShows()}))})),v(),n.state=(ws(t={loading:!0,shows:[],jqXHR:null,page:R().page||1,totalCount:"..."},"page",R().page||1),ws(t,"sort",R().sort||"watched_at"),ws(t,"genre",R().genre||""),t),n}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,loading:!0},(function(){t.getShows()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page,"&sort=").concat(this.state.sort,"&genre=").concat(this.state.genre))}},{key:"componentDidMount",value:function(){document.title="Shows Watched | SEPLIS",this.getShows()}},{key:"getShows",value:function(){var e=this,t=g();this.setState({loading:!0}),p("/1/users/".concat(t,"/shows-watched"),{query:{page:this.state.page,per_page:60,expand:"user_rating",sort:this.state.sort,genre:this.state.genre}}).done((function(t,n,r){e.setState({shows:t,loading:!1,jqXHR:r,totalCount:r.getResponseHeader("X-Total-Count")})}))}},{key:"render",value:function(){return 1==this.state.loading?o.a.createElement("span",null,o.a.createElement("h2",null,"Watched ",this.state.totalCount," shows"),o.a.createElement(We,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"d-md-flex mb-2"},o.a.createElement("div",null,o.a.createElement("h2",{className:"mb-2"},"Watched ",this.state.totalCount," shows")),o.a.createElement("div",{className:"ml-auto d-md-flex"},o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement(Ni,{onModeChange:this.listModeChange})),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement(qi,{onChange:this.genreChange,selected:this.state.genre})),o.a.createElement("div",{className:"mr-2 mb-2"},o.a.createElement("select",{className:"form-control",onChange:this.sortChange,value:this.state.sort},o.a.createElement("option",{value:"watched_at"},"Sort: Watched at"),o.a.createElement("option",{value:"user_rating"},"Sort: Rating"))),o.a.createElement("div",{className:"d-sm-block d-none"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))),o.a.createElement(gi,{listMode:"",shows:this.state.shows}),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"ml-auto"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))}}])&&hs(t.prototype,n),r&&hs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ks(e,t){return(ks=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_s(e);if(t){var o=_s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ps(this,n)}}function Ps(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _s(e){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cs={perPage:H.a.number,page:H.a.number,items:H.a.array},Ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ks(e,t)}(i,e);var t,n,r,a=js(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this)).state={items:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;Ts(this.props.perPage,this.props.page).then((function(t){e.setState({items:t.items})}))}},{key:"renderShow",value:function(e,t){return o.a.createElement("div",{key:e.id,className:"col-4 col-md-3 col-lg-2 col-margin"},o.a.createElement("div",{className:"black-box"},"In ",P(t.air_datetime)),o.a.createElement("a",{href:"/show/".concat(e.id)},o.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})),o.a.createElement("div",{className:"black-box"},S(e,t)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?o.a.createElement("div",{className:"alert alert-info"},"None of the shows you follow have episodes airing! :("):o.a.createElement("div",{className:"row"},this.state.items.map((function(t){return e.renderShow(t.show,t.episode)})))}}])&&Os(t.prototype,n),r&&Os(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Ns.propTypes=Cs,Ns.defaultProps={perPage:6,page:1,items:null};var Rs=Ns;function Ts(e,t){return new Promise((function(n,r){p("/1/users/".concat(g(),"/shows-countdown"),{query:{per_page:e,page:t}}).done((function(e,t,r){n({items:e,jqXHR:r})})).fail((function(e){r(e)}))}))}function Is(e){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t){return(Ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function As(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ls(e);if(t){var o=Ls(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ms(this,n)}}function Ms(e,t){if(t&&("object"===Is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bs(e)}function Bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ls(e){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ds(e,t)}(i,e);var t,n,r,a=As(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.onPageChange=t.pageChange.bind(Bs(t)),t.state={loading:!0,items:[],jqXHR:null,page:R().page||1},t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,loading:!0},(function(){t.getItems()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.getItems()}))}},{key:"componentDidMount",value:function(){document.title="Countdown | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;Ts(60,this.state.page).then((function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})}))}},{key:"render",value:function(){return 1==this.state.loading?o.a.createElement("span",null,o.a.createElement("h2",null,"Countdown"),o.a.createElement(We,null)):o.a.createElement("span",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},o.a.createElement("h2",null,"Countdown")),o.a.createElement("div",{className:"col-sm-3 col-md-2 col-margin"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),o.a.createElement(Rs,{items:this.state.items}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-9 col-md-10"}),o.a.createElement("div",{className:"col-sm-3 col-md-2"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&xs(t.prototype,n),r&&xs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hs(e,t){return(Hs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gs(e);if(t){var o=Gs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xs(this,n)}}function Xs(e,t){if(t&&("object"===Us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gs(e){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zs={perPage:H.a.number,page:H.a.number,items:H.a.array},Js=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hs(e,t)}(i,e);var t,n,r,a=Ws(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this)).state={items:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;Vs(this.props.perPage,this.props.page).then((function(t){e.setState({items:t.items})}))}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return o.a.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},o.a.createElement("a",{href:"/show/".concat(t.id)},o.a.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})),o.a.createElement("div",{className:"black-box"},S(t,n)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?o.a.createElement("div",{className:"alert alert-info"},"You have zero episodes to watch! :("):o.a.createElement("div",{className:"row"},this.state.items.map((function(t){return e.renderItem(t)})))}}])&&Fs(t.prototype,n),r&&Fs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);Js.propTypes=zs,Js.defaultProps={perPage:6,page:1,items:null};var Ys=Js;function Vs(e,t){return new Promise((function(n,r){p("/1/users/".concat(g(),"/shows-etw"),{query:{per_page:e,page:t}}).done((function(e,t,r){n({items:e,jqXHR:r})})).fail((function(e){r(e)}))}))}function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qs(e,t){return(Qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nc(e);if(t){var o=nc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ec(this,n)}}function ec(e,t){if(t&&("object"===$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tc(e)}function tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nc(e){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qs(e,t)}(i,e);var t,n,r,a=Zs(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.onPageChange=t.pageChange.bind(tc(t)),t.state={loading:!0,items:[],jqXHR:null,page:R().page||1},t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:R().page||1,loading:!0},(function(){t.getItems()}))}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},(function(){t.setBrowserPath(),t.getItems()}))}},{key:"componentDidMount",value:function(){document.title="Episodes to Watch | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;Vs(60,this.state.page).then((function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})}))}},{key:"render",value:function(){return 1==this.state.loading?o.a.createElement("span",null,o.a.createElement("h2",null,"Episodes to Watch"),o.a.createElement(We,null)):o.a.createElement("span",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},o.a.createElement("h2",null,"Episodes to Watch")),o.a.createElement("div",{className:"col-sm-3 col-md-2"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),o.a.createElement(Ys,{items:this.state.items}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-9 col-md-10"}),o.a.createElement("div",{className:"col-sm-3 col-md-2"},o.a.createElement(_a,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&Ks(t.prototype,n),r&&Ks(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ic(e,t){return(ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uc(e);if(t){var o=uc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cc(this,n)}}function cc(e,t){if(t&&("object"===oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uc(e){return(uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lc={perPage:H.a.number,page:H.a.number,items:H.a.array},fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ic(e,t)}(i,e);var t,n,r,a=sc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this)).state={shows:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.items?this.setState({shows:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;dc(this.props.perPage,this.props.page).then((function(t){e.setState({shows:t.items})}))}},{key:"renderShow",value:function(e,t){return o.a.createElement("div",{key:e.id,className:"col-4 col-md-3 col-lg-2 col-margin"},o.a.createElement("a",{href:"/show/".concat(e.id)},o.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})),o.a.createElement("div",{className:"black-box"},S(e,t)))}},{key:"render",value:function(){var e=this;return 0==this.state.shows.length?o.a.createElement("div",{className:"alert alert-info"},"You have not watched any shows yet!"):o.a.createElement("div",{className:"row"},this.state.shows.map((function(t){return e.renderShow(t,t.user_watching.episode)})))}}])&&ac(t.prototype,n),r&&ac(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);fc.propTypes=lc,fc.defaultProps={perPage:6,page:1,items:null};var pc=fc;function dc(e,t){return new Promise((function(n,r){p("/1/users/".concat(g(),"/shows-watched"),{query:{per_page:e,page:t}}).done((function(e,t,r){n({items:e,jqXHR:r})})).fail((function(e){r(e)}))}))}function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(e,t){return(mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vc(this,n)}}function vc(e,t){if(t&&("object"===hc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gc(e)}function gc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wc(e){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ec=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mc(e,t)}(i,e);var t,n,r,a=bc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.visChange=t.visibilitychange.bind(gc(t)),document.addEventListener("visibilitychange",t.visChange),t.state={key:0,loading:!0,failed:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="SEPLIS",this.getData()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",this.visChange)}},{key:"getData",value:function(){var e=this;this.setState({loading:!0,failed:!1}),Promise.all([dc(6,1),Ts(6,1),os(6,1),Vs(6,1)]).then((function(t){e.setState({loading:!1,failed:!1,watched:t[0].items,countdown:t[1].items,recentlyWatched:t[2].items,episodesToWatch:t[3].items})})).catch((function(){e.setState({loading:!1,failed:!0,key:e.state.key+1})}))}},{key:"visibilitychange",value:function(){document.hidden||this.getData()}},{key:"render",value:function(){return this.state.failed?o.a.createElement("div",{className:"alert alert-warning"},"Failed to load, try refreshing."):this.state.loading?o.a.createElement(We,null):o.a.createElement("span",null,o.a.createElement("h2",{className:"header header-border"},o.a.createElement(s.b,{to:"/shows-watched"},"Recently watched")),o.a.createElement("div",{className:"slider mb-2"},o.a.createElement(pc,{key:"sw-".concat(this.state.key),items:this.state.watched})),o.a.createElement("h2",{className:"header header-border"},o.a.createElement(s.b,{to:"/recently-aired"},"Recently Aired")),o.a.createElement("div",{className:"slider mb-2"},o.a.createElement(rs,{key:"sra-".concat(this.state.key),items:this.state.recentlyWatched})),o.a.createElement("h2",{className:"header header-border"},o.a.createElement(s.b,{to:"/countdown"},"Countdown")),o.a.createElement("div",{className:"slider mb-2"},o.a.createElement(Rs,{key:"sc-".concat(this.state.key),items:this.state.countdown})),o.a.createElement("h2",{className:"header header-border"},o.a.createElement(s.b,{to:"/episodes-to-watch"},"Episodes To Watch")),o.a.createElement("div",{className:"slider mb-2"},o.a.createElement(Ys,{key:"etw-".concat(this.state.key),items:this.state.episodesToWatch})))}}])&&yc(t.prototype,n),r&&yc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_c(e);if(t){var o=_c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pc(this,n)}}function Pc(e,t){if(t&&("object"===Sc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Nc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kc(e,t)}(i,e);var t,n,r,a=jc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this)).state={loading:!0,data:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;p("/1/users/".concat(g(),"/air-dates")).done((function(t){e.setState({loading:!1,data:t})}))}},{key:"renderWeekday",value:function(e){var t=new Date(e);return Cc[t.getDay()]}},{key:"renderHeaderDate",value:function(e){var t=Date.parse(e),n=Date.now();switch(Math.round(Math.ceil((t-n)/864e5))){case-1:return o.a.createElement("span",null,"Yesterday ",o.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 0:return o.a.createElement("span",null,"Today ",o.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 1:return o.a.createElement("span",null,"Tomorrow ",o.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));default:return this.renderWeekday(e)}}},{key:"renderMain",value:function(){var e=this;return 0==this.state.data.length?o.a.createElement("div",{className:"alert alert-info"},o.a.createElement("h1",null,"There's nothing to watch this week!"),"But, how can this be?",o.a.createElement("br",null),"Well, you're properly not following of any shows that has episodes airing this week."):o.a.createElement("span",null,this.state.data.map((function(t){return o.a.createElement("span",{key:t.air_date},o.a.createElement("h3",{className:"header header-border",title:t.air_date},e.renderHeaderDate(t.air_date)),o.a.createElement(gi,{shows:t.shows}))})))}},{key:"render",value:function(){return this.state.loading?o.a.createElement(We,null):this.renderMain()}}])&&Oc(t.prototype,n),r&&Oc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ic(e,t){return(Ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ac(e);if(t){var o=Ac(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dc(this,n)}}function Dc(e,t){if(t&&("object"===Rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ac(e){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ic(e,t)}(i,e);var t,n,r,a=xc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Air Dates | SEPLIS"}},{key:"render",value:function(){return o.a.createElement(Nc,null)}}])&&Tc(t.prototype,n),r&&Tc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Bc(e){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return(qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hc(e);if(t){var o=Hc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fc(this,n)}}function Fc(e,t){if(t&&("object"===Bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Hc(e){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qc(e,t)}(i,e);var t,n,r,a=Uc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Account Settings | SEPLIS"}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("h1",null,"Account")),o.a.createElement("div",{className:"col-12"},o.a.createElement(s.b,{to:"/password"},"Change password")))}}])&&Lc(t.prototype,n),r&&Lc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Xc(e){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qc(e);if(t){var o=Qc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $c(this,n)}}function $c(e,t){if(t&&("object"===Xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kc(e)}function Kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qc(e){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yc(e,t)}(i,e);var t,n,r,a=Vc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.state={error:null,success:null,loading:!1},t.onSubmit=t.onSubmit.bind(Kc(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Change Password | SEPLIS"}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null,success:null,loading:!0}),p("/1/users/current/change-password",{data:{password:this.password.value,new_password:this.newPassword.value}}).fail((function(e){t.password.focus(),t.setState({error:e.responseJSON,loading:!1})})).done((function(){t.setState({success:!0,loading:!1})})).always((function(){t.password.value="",t.newPassword.value=""}))}},{key:"renderError",value:function(){if(this.state.error)return o.a.createElement("div",{className:"alert alert-warning capitalize-first-letter"},o.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t,n=Gc(this.state.error.errors);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.field==e)return o.a.createElement("p",{className:"text-danger"},r.message)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"renderSuccess",value:function(){if(this.state.success)return o.a.createElement("div",{className:"alert alert-success"},o.a.createElement("strong",null,"Your password was successfully changed."))}},{key:"renderButton",value:function(){return 0==this.state.loading?o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"):1==this.state.loading?o.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!0},"Changing your password..."):void 0}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("h1",{className:"col-margin"},"Change password")),o.a.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderSuccess(),this.renderError(),o.a.createElement("form",{method:"post",onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Current password"),this.renderFieldError("password"),o.a.createElement("input",{ref:function(t){return e.password=t},type:"password",name:"password",className:"form-control dark-form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"New password"),this.renderFieldError("new_password"),o.a.createElement("input",{ref:function(t){return e.newPassword=t},type:"password",name:"new_password",className:"form-control dark-form-control"})),this.renderButton())))}}])&&Jc(t.prototype,n),r&&Jc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=au(e);if(t){var o=au(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ou(this,n)}}function ou(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nu(e,t)}(i,e);var t,n,r,a=ru(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.state={loading:!0,playServers:[]},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Play Servers | SEPLIS",this.getPlayServers()}},{key:"getPlayServers",value:function(){var e=this;this.setState({loading:!0}),p("/1/play-servers",{body:{per_page:100}}).done((function(t){e.setState({playServers:t,loading:!1})}))}},{key:"renderPlayServers",value:function(){return 0==this.state.playServers.length?o.a.createElement("div",{className:"alert alert-info"},"You have no play servers."):o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,this.state.playServers.map((function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.url),o.a.createElement("td",{width:"10px"},o.a.createElement(s.b,{to:"/play-server/".concat(e.id)},o.a.createElement("i",{className:"fas fa-pen-square"}))))}))))}},{key:"render2",value:function(){return this.state.loading?o.a.createElement(We,null):o.a.createElement("div",{className:"col-12 col-sm-7 col-md-5"},o.a.createElement(s.b,{to:"/new-play-server",className:"btn btn-success col-margin"},"New play server"),this.renderPlayServers())}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("h1",{className:"col-margin"},"Play servers")),this.render2())}}])&&tu(t.prototype,n),r&&tu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fu(e,t){return(fu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yu(e);if(t){var o=yu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return du(this,n)}}function du(e,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hu(e)}function hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yu(e){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mu={location:H.a.object.isRequired},bu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fu(e,t)}(i,e);var t,n,r,a=pu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.onSubmit=t.onSubmit.bind(hu(t)),t.onDelete=t.onDelete.bind(hu(t)),t.onGiveAccess=t.onGiveAccess.bind(hu(t)),t.onRemoveUserAccess=t.onRemoveUserAccess.bind(hu(t)),t.state={loading:0,error:null,success:!1,playServer:{name:"",url:"",secret:""},users:[],redirect:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Play Server | SEPLIS",this.props.match.params.serverId&&(this.getPlayServer(),this.getUsersWithAccess())}},{key:"incLoading",value:function(e){this.setState((function(t){return{loading:t.loading+e}}))}},{key:"getPlayServer",value:function(){var e=this;this.incLoading(1),p("/1/play-servers/".concat(this.props.match.params.serverId)).fail((function(e){})).done((function(t){e.setState({playServer:t}),document.title="Play Server: ".concat(t.name," | SEPLIS")})).always((function(){e.incLoading(-1)}))}},{key:"getUsersWithAccess",value:function(){var e=this;this.incLoading(1),p("/1/play-servers/".concat(this.props.match.params.serverId,"/users")).fail((function(e){})).done((function(t){e.setState({users:t})})).always((function(){e.incLoading(-1)}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n="/1/play-servers";this.props.match.params.serverId&&(n+="/".concat(this.props.match.params.serverId)),p(n,{method:this.props.match.params.serverId?"PUT":"POST",data:{name:this.name.value,url:this.url.value,secret:this.secret.value}}).fail((function(e){t.setState({error:e.responseJSON})})).done((function(e){t.setState({playServer:e,error:null}),t.props.history.push("/play-server/".concat(e.id))}))}},{key:"onDelete",value:function(e){var t=this;e.preventDefault(),confirm("Are you sure you wan't to delete this play server?")&&p("/1/play-servers/".concat(this.props.match.params.serverId),{method:"DELETE"}).fail((function(e){t.setState({error:e.responseJSON})})).done((function(){t.props.history.push("/play-servers")}))}},{key:"onGiveAccess",value:function(e){var t=this;e.preventDefault();var n=e.target.name.value;p("/1/users",{query:{username:n}}).fail((function(e){alert(e.message)})).done((function(e){if(1==e.length){var r=t.props.match.params.serverId;p("/1/play-servers/".concat(r,"/users/").concat(e[0].id),{method:"PUT"}).fail((function(e){alert(e.message)})).done((function(){t.getUsersWithAccess()}))}else alert("Unknown user: ".concat(n))}))}},{key:"onRemoveUserAccess",value:function(e){var t=this;e.preventDefault();var n=this.props.match.params.serverId;p("/1/play-servers/".concat(n,"/users/").concat(e.target.userId.value),{method:"DELETE"}).fail((function(e){alert(e.message)})).done((function(){t.getUsersWithAccess()}))}},{key:"renderUsers",value:function(){var e=this;return 0==this.state.users.length?o.a.createElement("div",{className:"alert alert-info"},"No one has access to this play server."):o.a.createElement("table",{className:"table table-sm"},o.a.createElement("tbody",null,this.state.users.map((function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",{style:{verticalAlign:"middle"}},t.name),o.a.createElement("td",{width:"10px",className:"text-xs-right"},o.a.createElement("form",{onSubmit:e.onRemoveUserAccess},o.a.createElement("input",{type:"hidden",name:"userId",value:t.id}),o.a.createElement("button",{type:"submit",className:"btn btn-danger",title:"Delete user"},o.a.createElement("i",{className:"fas fa-times"})))))}))))}},{key:"renderGiveAccessForm",value:function(){return o.a.createElement("form",{className:"col-margin row",onSubmit:this.onGiveAccess},o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{type:"text",name:"name",className:"form-control dark-form-control",placeholder:"Username"})),o.a.createElement("div",{className:"col-4"},o.a.createElement("button",{className:"btn btn-success"},"Give access")))}},{key:"renderUsersWithAccess",value:function(){if(this.props.match.params.serverId)return o.a.createElement("span",null,o.a.createElement("h2",{className:"col-margin"},"Users with access"),this.renderGiveAccessForm(),this.renderUsers())}},{key:"renderDeleteButton",value:function(){if(this.props.match.params.serverId)return o.a.createElement("button",{className:"btn btn-danger",onClick:this.onDelete},"Delete")}},{key:"renderError",value:function(){if(this.state.error)return o.a.createElement("div",{className:"alert alert-warning capitalize-first-letter col-margin"},o.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t,n=cu(this.state.error.errors);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.field==e)return o.a.createElement("p",{className:"text-danger"},r.message)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"render2",value:function(){var e=this;return this.state.loading>0?o.a.createElement(We,null):o.a.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderError(),o.a.createElement("form",{method:"post",className:"col-margin",onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Name"),this.renderFieldError("name"),o.a.createElement("input",{ref:function(t){return e.name=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.name,placeholder:"My play server"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"URL"),this.renderFieldError("url"),o.a.createElement("input",{ref:function(t){return e.url=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.url,placeholder:"https://example.net"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Secret"),this.renderFieldError("secret"),o.a.createElement("input",{ref:function(t){return e.secret=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.secret,placeholder:"A super long secret"})),o.a.createElement("button",{type:"submit",className:"btn btn-primary m-r-1"},"Save"),this.renderDeleteButton()),this.renderUsersWithAccess())}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("h1",{className:"col-margin"},"Play server")),this.render2())}}])&&lu(t.prototype,n),r&&lu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);bu.propTypes=mu;var vu=bu;function gu(e){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ku(e);if(t){var o=ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ou(this,n)}}function Ou(e,t){if(t&&("object"===gu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ju=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eu(e,t)}(i,e);var t,n,r,a=Su(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),v(),t.state={loading:!0,stats:null},t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="User Stats | SEPLIS",this.getStats()}},{key:"getStats",value:function(){var e=this,t=g();p("/1/users/".concat(t,"/show-stats")).done((function(t){e.setState({loading:!1,stats:t})}))}},{key:"render",value:function(){return this.state.loading?o.a.createElement("span",null,o.a.createElement(We,null),o.a.createElement("center",null,o.a.createElement("h2",null,"Loading your stats"))):o.a.createElement("span",null,o.a.createElement("h2",null,"Your TV show stats"),o.a.createElement("table",{className:"table table-striped"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{width:"220px"},"Following"),o.a.createElement("td",null,this.state.stats.fan_of," shows")),o.a.createElement("tr",null,o.a.createElement("th",null,"Time spent watching"),o.a.createElement("td",null,_(60*this.state.stats.episodes_watched_minutes,!0))),o.a.createElement("tr",null,o.a.createElement("th",null,"Episodes watched"),o.a.createElement("td",null,this.state.stats.episodes_watched)),o.a.createElement("tr",null,o.a.createElement("th",null,"Watched episodes from"),o.a.createElement("td",null,this.state.stats.shows_watched," shows")),o.a.createElement("tr",null,o.a.createElement("th",null,"Shows finished"),o.a.createElement("td",null,this.state.stats.shows_finished)))))}}])&&wu(t.prototype,n),r&&wu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Pu(e){return(Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nu(e,t){return(Nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Iu(e);if(t){var o=Iu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tu(this,n)}}function Tu(e,t){if(t&&("object"===Pu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Iu(e){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nu(e,t)}(i,e);var t,n,r,a=Ru(i);function i(){return _u(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(qt,null),o.a.createElement("div",{className:"container"},o.a.createElement(c.a,{path:"/show/:showId",component:Za}),o.a.createElement(c.a,{path:"/show-new",component:si}),o.a.createElement(c.a,{path:"/following",component:Yi}),o.a.createElement(c.a,{path:"/recently-aired",component:ps}),o.a.createElement(c.a,{path:"/shows-watched",component:Es}),o.a.createElement(c.a,{path:"/countdown",component:qs}),o.a.createElement(c.a,{path:"/episodes-to-watch",component:rc}),o.a.createElement(c.a,{path:"/",exact:!0,component:Ec}),o.a.createElement(c.a,{path:"/main",component:Ec}),o.a.createElement(c.a,{path:"/air-dates",component:Mc}),o.a.createElement(c.a,{path:"/account",component:Wc}),o.a.createElement(c.a,{path:"/password",component:Zc}),o.a.createElement(c.a,{path:"/play-servers",component:iu}),o.a.createElement(c.a,{path:"/new-play-server",component:vu}),o.a.createElement(c.a,{path:"/play-server/:serverId",component:vu}),o.a.createElement(c.a,{path:"/user-shows-stats",component:ju})))}}])&&Cu(t.prototype,n),r&&Cu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(23);function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uu(e);if(t){var o=Uu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lu(this,n)}}function Lu(e,t){if(t&&("object"===Du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qu(e)}function qu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uu(e){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mu(e,t)}(i,e);var t,n,r,a=Bu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={error:"",email:"",password:""},t.onSignIn=t.onSignIn.bind(qu(t)),t.onDataChange=t.onDataChange.bind(qu(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Sign In | SEPLIS"}},{key:"onSignIn",value:function(e){var t=this;e.preventDefault(),p("/1/token",{data:{client_id:seplisClientId,grant_type:"password",email:this.state.email,password:this.state.password}}).fail((function(e){t.setState({error:e.responseJSON.message,password:""})})).done((function(e){localStorage.setItem("access_token",e.access_token),t.saveUserIdAndRedirect()}))}},{key:"saveUserIdAndRedirect",value:function(){p("/1/users/current").done((function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),location.href="/"}))}},{key:"onDataChange",value:function(e){this.state[e.target.name]=e.target.value,this.setState({error:""})}},{key:"renderForm",value:function(){return o.a.createElement("form",{onSubmit:this.onSignIn},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"Email or username",onChange:this.onDataChange,value:this.state.email,autoFocus:!0,required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Password",onChange:this.onDataChange,value:this.state.password,required:!0})),o.a.createElement("div",{className:"d-flex"},o.a.createElement(s.b,{className:"btn",style:{paddingLeft:0},to:"/create-user"},"Create user"),o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Sign in")),o.a.createElement("div",null,o.a.createElement(s.b,{className:"btn",style:{paddingLeft:0,fontSize:"16px"},to:"/reset-password"},"Reset password")))}},{key:"renderError",value:function(){if(this.state.error)return o.a.createElement("div",{className:"alert alert-warning capitalize-first-letter",role:"alert"},o.a.createElement("strong",null,this.state.error))}},{key:"render",value:function(){return o.a.createElement("div",{className:"standard-form"},o.a.createElement("div",{className:"logo"},"SEPLIS"),o.a.createElement("div",{className:"title"},"Sign in"),this.renderError(),this.renderForm())}}])&&Au(t.prototype,n),r&&Au(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Hu(e){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gu(e,t){return(Gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yu(e);if(t){var o=Yu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ju(this,n)}}function Ju(e,t){if(t&&("object"===Hu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yu(e){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gu(e,t)}(a,e);var t,n,r,o=zu(a);function a(){return Wu(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),localStorage.removeItem("accessLevel"),location.href="/sign-in"}},{key:"render",value:function(){return null}}])&&Xu(t.prototype,n),r&&Xu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component);function $u(e){return($u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ku(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ol(e);if(t){var o=ol(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nl(this,n)}}function nl(e,t){if(t&&("object"===$u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rl(e)}function rl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ol(e){return(ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var al=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&el(e,t)}(i,e);var t,n,r,a=tl(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={error:null},t.onSubmit=t.onSubmit.bind(rl(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Create User | SEPLIS"}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null});var n=e.target.email.value,r=e.target.password.value;p("/1/users",{data:{name:e.target.name.value,email:n,password:r}}).fail((function(e){t.setState({error:e.responseJSON})})).done((function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),t.signin(n,r)}))}},{key:"signin",value:function(e,t){var n=this;p("/1/token",{data:{client_id:seplisClientId,grant_type:"password",email:e,password:t}}).fail((function(e){n.setState({error:e.responseJSON})})).done((function(e){localStorage.setItem("access_token",e.access_token),location.href="/"}))}},{key:"renderForm",value:function(){return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Username"),this.renderFieldError("name"),o.a.createElement("input",{name:"name",type:"text",className:"form-control dark-form-control",autoFocus:!0,required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email"),this.renderFieldError("email"),o.a.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"",required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),this.renderFieldError("password"),o.a.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Minimum 6 chars",required:!0})),o.a.createElement("div",{className:"d-flex"},o.a.createElement(s.b,{className:"btn",to:"/sign-in"},"Sign in"),o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Create user")))}},{key:"renderError",value:function(){if(this.state.error)return o.a.createElement("div",{className:"alert alert-warning capitalize-first-letter"},o.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t,n=Ku(this.state.error.errors);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.field==e)return o.a.createElement("p",{className:"text-danger"},r.message)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"render",value:function(){return o.a.createElement("div",{className:"standard-form"},o.a.createElement("div",{className:"logo"},"SEPLIS"),o.a.createElement("div",{className:"title"},"Create user"),this.renderError(),this.renderForm())}}])&&Zu(t.prototype,n),r&&Zu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component),il=Object(c.f)(al);function sl(e){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dl(e);if(t){var o=dl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(e,t){if(t&&("object"===sl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pl(e)}function pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dl(e){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ul(e,t)}(i,e);var t,n,r,a=ll(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={loadingPlayServers:!0,loadingShow:!0,loadingEpisode:!0,loadingNextEpisode:!0,loadingLang:!0,loadingStartTime:!0,playServer:null,playServerError:null,show:null,episode:null,nextEpisode:null,audio_lang:null,subtitle_lang:null,metadata:null,startTime:0},t.onAudioChange=t.audioChange.bind(pl(t)),t.onSubtitleChange=t.subtitleChange.bind(pl(t)),t.onTimeUpdate=t.timeUpdate.bind(pl(t)),t.showId=t.props.match.params.showId,t.number=t.props.match.params.number,t.session=k(),t.lastPos=0,t.cast=null,t.markedAsWatched=!1,t}return t=i,(n=[{key:"componentDidMount",value:function(){this.getShow(),this.getEpisode(),this.getPlayServers(),this.getNextEpisode(),this.getLanguage(),this.getStartTime()}},{key:"timeUpdate",value:function(e){var t=this;(e=Math.floor(e))!=this.lastPos&&(this.lastPos=e,e<10||e%10==0&&(e/100*10>parseInt(this.state.metadata.format.duration)-e?this.markedAsWatched||p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/watched"),{method:"PUT"}).done((function(){t.markedAsWatched=!0})):(this.markedAsWatched=!1,p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/position"),{method:"PUT",data:{position:e}}))))}},{key:"getPlayServers",value:function(){var e=this;nt("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/play-servers")).then((function(t){e.setState({loadingPlayServers:!1,playServer:t.playServer,metadata:t.metadata})})).catch((function(t){e.setState({loadingPlayServers:!1,playServerError:t})}))}},{key:"getShow",value:function(){var e=this;p("/1/shows/".concat(this.showId)).done((function(t){e.setState({show:t})})).always((function(){e.setState({loadingShow:!1})}))}},{key:"getEpisode",value:function(){var e=this,t=parseInt(this.number);p("/1/shows/".concat(this.showId,"/episodes/").concat(t)).done((function(t){e.setState({episode:t})})).always((function(){e.setState({loadingEpisode:!1})}))}},{key:"getNextEpisode",value:function(){var e=this,t=parseInt(this.number)+1;p("/1/shows/".concat(this.showId,"/episodes/").concat(t)).done((function(t){e.setState({nextEpisode:t})})).always((function(){e.setState({loadingNextEpisode:!1})}))}},{key:"getLanguage",value:function(){var e=this;p("/1/shows/".concat(this.showId,"/user-subtitle-lang")).done((function(t){t||(t={}),e.setState({audio_lang:t.audio_lang||null,subtitle_lang:t.subtitle_lang||null})})).always((function(){e.setState({loadingLang:!1})}))}},{key:"getStartTime",value:function(){var e=this;p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/watched")).done((function(t){t?e.setState({startTime:t.position}):e.setState({startTime:0})})).always((function(){e.setState({loadingStartTime:!1})}))}},{key:"audioChange",value:function(e){""==e&&(e=null),this.saveSub({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.saveSub({subtitle_lang:e})}},{key:"saveSub",value:function(e){p("/1/shows/".concat(this.showId,"/user-subtitle-lang"),{method:"PATCH",data:e})}},{key:"getInfo",value:function(){return this.state.show?{title:this.state.show.title}:null}},{key:"episodeTitle",value:function(e,t){return O(e,t)}},{key:"getPlayNextInfo",value:function(){if(!this.state.show||!this.state.nextEpisode)return null;var e=this.state.show,t=this.state.nextEpisode;return{title:this.episodeTitle(e,t),url:"/show/".concat(e.id,"/episode/").concat(t.number,"/play")}}},{key:"getBackToInfo",value:function(){return this.state.show?{title:"Back to: ".concat(this.state.show.title),url:"/show/".concat(this.showId)}:null}},{key:"getCurrentInfo",value:function(){if(!this.state.show||!this.state.episode)return null;var e=this.state.show,t="".concat(e.title," - ");return{title:t+=this.episodeTitle(e,this.state.episode)}}},{key:"initCast",value:function(){var e=this;this.cast.addEventListener("isConnected",(function(t){t.value&&confirm("Play ".concat(e.getCurrentInfo().title," on ").concat(e.cast.getFriendlyName(),"?"))&&(p(e.getPlayUrl()+"&action=cancel"),e.cast.playEpisode(e.showId,e.number).then((function(){location.href="/show/".concat(e.showId)})))}))}},{key:"loadCast",value:function(){this.cast||(this.cast=new yt,this.cast.load(this.initCast.bind(this)))}},{key:"getPlayUrl",value:function(){return"".concat(this.state.playServer.play_url,"/play")+"?play_id=".concat(this.state.playServer.play_id)+"&session=".concat(this.session)}},{key:"renderPlayServerErrorMessage",value:function(){return 2==this.state.playServerError.code?o.a.createElement("span",null,o.a.createElement("h3",null,'"',this.state.show.title," ",O(this.state.show,this.state.episode),'" is not on any of your play servers.'),this.renderAirs()):this.state.playServerError.message}},{key:"renderAirs",value:function(){if(this.state.episode.air_datetime){var e=new Date(this.state.episode.air_datetime),t=new Date;if(!(t.getTime()-e.getTime()>86400))return t.getTime()<e.getTime()?o.a.createElement("div",{className:"mb-2"},"Airs in ",P(this.state.episode.air_datetime)):o.a.createElement("div",null,"Aired ",P(this.state.episode.air_datetime)," ago")}}},{key:"renderPlayServerError",value:function(){return o.a.createElement("div",{className:"alert alert-warning",style:{width:"75%",margin:"auto",marginTop:"100px"}},this.renderPlayServerErrorMessage(),"Go back to ",o.a.createElement("a",{href:"/show/".concat(this.showId)},this.state.show.title))}},{key:"render",value:function(){return this.state.loadingPlayServers||this.state.loadingShow||this.state.loadingEpisode||this.state.loadingNextEpisode||this.state.loadingLang||this.state.loadingStartTime?o.a.createElement(We,null):this.state.playServerError?this.renderPlayServerError():(this.loadCast(),o.a.createElement(tt,{playServerUrl:"".concat(this.state.playServer.play_url),playId:this.state.playServer.play_id,metadata:this.state.metadata,info:this.getInfo(),nextInfo:this.getPlayNextInfo(),backToInfo:this.getBackToInfo(),currentInfo:this.getCurrentInfo(),onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange,audio_lang:this.state.audio_lang,subtitle_lang:this.state.subtitle_lang,onTimeUpdate:this.onTimeUpdate,startTime:this.state.startTime,session:this.session}))}}])&&cl(t.prototype,n),r&&cl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function yl(e){return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t){return(vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=El(e);if(t){var o=El(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wl(this,n)}}function wl(e,t){if(t&&("object"===yl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vl(e,t)}(i,e);var t,n,r,a=gl(i);function i(){return ml(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.error;return e?e.errors?o.a.createElement("div",{className:"alert alert-danger capitalize-first-letter",role:"alert"},o.a.createElement("div",{className:"mb-2"},o.a.createElement("b",null,"Error:")," ",e.message),e.errors.map((function(e){return o.a.createElement("div",{key:e.field},o.a.createElement("b",null,e.field,":")," ",e.message)}))):o.a.createElement("div",{className:"alert alert-danger capitalize-first-letter",role:"alert"},o.a.createElement("div",null,o.a.createElement("b",null,"Error:")," ",e.message)):null}}])&&bl(t.prototype,n),r&&bl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);function Ol(e){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nl(e);if(t){var o=Nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _l(this,n)}}function _l(e,t){if(t&&("object"===Ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cl(e)}function Cl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jl(e,t)}(i,e);var t,n,r,a=Pl(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={error:null,success:null,loading:!1},t.submitEmail=t.submitEmail.bind(Cl(t)),t.submitReset=t.submitReset.bind(Cl(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){document.title="Reset Password | SEPLIS"}},{key:"submitEmail",value:function(e){var t=this;e.preventDefault(),this.setState({success:!1,loading:!0,error:null}),p("/1/user-reset-password",{query:{email:this.email.value}}).fail((function(e){t.setState({error:e.responseJSON,loading:!1})})).done((function(){t.setState({success:!0,loading:!1})}))}},{key:"submitReset",value:function(e){var t=this;e.preventDefault(),this.setState({success:!1,loading:!0,error:null}),p("/1/user-reset-password",{data:{key:this.props.match.params.key,new_password:this.password.value}}).fail((function(e){t.setState({error:e.responseJSON,loading:!1})})).done((function(){t.setState({success:!0,loading:!1})}))}},{key:"renderSendSuccess",value:function(){if(this.state.success)return o.a.createElement("div",{className:"alert alert-success"},o.a.createElement("strong",null,"A reset link has been sent to your email."))}},{key:"renderButton",value:function(){return 0==this.state.loading?o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Submit"):1==this.state.loading?o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:!0},"Working..."):void 0}},{key:"renderSendForm",value:function(){var e=this;if(!this.state.success)return o.a.createElement("form",{onSubmit:this.submitEmail},o.a.createElement("label",null,"Email"),o.a.createElement("input",{ref:function(t){return e.email=t},type:"email",name:"email",className:"form-control dark-form-control mb-4",required:!0,autoFocus:!0}),o.a.createElement("div",{className:"d-flex"},o.a.createElement(s.b,{className:"btn",to:"/sign-in"},"Sign in"),this.renderButton()))}},{key:"renderSend",value:function(){return o.a.createElement("div",{className:"standard-form"},o.a.createElement("div",{className:"logo"},"SEPLIS"),o.a.createElement("div",{className:"title"},"Reset password"),o.a.createElement(Sl,{error:this.state.error}),this.renderSendForm(),this.renderSendSuccess())}},{key:"renderResetSuccess",value:function(){if(this.state.success)return o.a.createElement("div",{className:"alert alert-success"},"Your password has been changed. Sign in ",o.a.createElement(s.b,{to:"/sign-in"},"here"),".")}},{key:"renderResetForm",value:function(){var e=this;if(!this.state.success)return o.a.createElement("form",{onSubmit:this.submitReset},o.a.createElement("label",null,"New password"),o.a.createElement("input",{ref:function(t){return e.password=t},type:"password",name:"password",className:"form-control dark-form-control mb-4",required:!0,autoFocus:!0}),o.a.createElement("div",{className:"d-flex"},this.renderButton()))}},{key:"renderReset",value:function(){return o.a.createElement("div",{className:"standard-form"},o.a.createElement("div",{className:"logo"},"SEPLIS"),o.a.createElement("div",{className:"title"},"Reset password"),o.a.createElement(Sl,{error:this.state.error}),this.renderResetForm(),this.renderResetSuccess())}},{key:"render",value:function(){return this.props.match.params.key?this.renderReset():this.renderSend()}}])&&kl(t.prototype,n),r&&kl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);n(66),n(67);i.a.render(o.a.createElement(s.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/sign-in",component:Fu}),o.a.createElement(c.a,{exact:!0,path:"/sign-out",component:Vu}),o.a.createElement(c.a,{exact:!0,path:"/create-user",component:il}),o.a.createElement(c.a,{exact:!0,path:"/reset-password",component:Rl}),o.a.createElement(c.a,{path:"/reset-password/:key",component:Rl}),o.a.createElement(c.a,{exact:!0,path:"/show/:showId/episode/:number/play",component:hl}),o.a.createElement(c.a,{path:"/",component:xu}))),document.getElementById("root"))}});
//# sourceMappingURL=app.js.map