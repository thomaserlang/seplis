var exports=function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],f=0,p=[];f<s.length;f++)i=s[f],r[i]&&p.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={0:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonpexports=window.webpackJsonpexports||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;return a.push([71,1]),n()}({22:function(e,t,n){},23:function(e,t,n){},35:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(16),i=n.n(a),s=n(3),l=n(9),c=n(2),u=n.n(c);function f(e){401===e.status&&1009===e.responseJSON.code&&(localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),localStorage.removeItem("accessLevel"),location.href="/sign-in")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.a.param(t.query||"",!0),o=t.method||(t.data?"POST":"GET"),r=t.data,a=t.localRequest||!1;void 0!==r&&"GET"!==o&&(r=JSON.stringify(r)),e.startsWith("http")||a||(e=seplisBaseUrl+e),n&&(-1===e.indexOf("?")?e+="?"+n:e+="&"+n);var i={Accept:"application/json; charset=utf-8"};if(e.startsWith(seplisBaseUrl)){var s=localStorage.getItem("access_token");s&&(i.Authorization="Bearer ".concat(s))}return u.a.ajax({url:e,method:o,data:r,contentType:"application/json",headers:i,error:f})}var m=n(12),h=n.n(m);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(){return null!==localStorage.getItem("access_token")}function b(){if(!y())throw location.href="/sign-in","Not authed!";return!0}function v(){return b(),localStorage.getItem("user_id")||0}function g(){return localStorage.getItem("user_level")||null}function w(e,t){return(e=e.toString()).length<t?w("0"+e,t):e}function E(e,t){switch(e.episode_type){case 1:return"Episode ".concat(t.number);case 2:return"S".concat(w(t.season,2)," Â· E").concat(w(t.episode,2)," (").concat(t.number,")");case 3:return"Airdate: ".concat(t.air_date)}}function S(e,t){switch(e.episode_type){case 1:return"".concat(t.number,": ").concat(t.title);case 2:return"S".concat(w(t.season,2),"E").concat(w(t.episode,2),": ").concat(t.title);case 3:return"".concat(t.air_date,": ").concat(t.title)}}function k(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function _(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),(t>0?t+":":"")+n+":"+o}function O(e){"string"==typeof e&&(e=new Date(e));var t,n,o,r=Math.abs(e-(new Date).getTime())/1e3,a=[],i=d(N(r,60),2);t=i[0],r=i[1];var s=d(N(t,60),2);n=s[0],t=s[1];var l=d(N(n,24),2);return o=l[0],n=l[1],o>0&&a.push(P(o,"day")),n>0&&a.push(P(n,"hour")),t>0&&n<1&&o<1&&a.push(P(t,"minute")),a.join(" ")}function C(e,t){var n,o,r,a,i,s=Math.round(e/60/60*10)/10;if(e<60)return P(e,"second");var l=d(N(e,60),2);n=l[0],e=l[1];var c=d(N(n,60),2);o=c[0],n=c[1];var u=d(N(o,24),2);r=u[0],o=u[1];var f=d(N(r,30.42),2);a=f[0],r=f[1];var p=d(N(a,12),2);i=p[0],a=p[1];var m=[];i>0&&m.push(P(Math.round(i),"year")),a>0&&m.push(P(Math.round(a),"month")),r>0&&m.push(P(Math.round(r),"day")),o>0&&m.push(P(Math.round(o),"hour")),n>0&&m.push(P(Math.round(n),"minute"));var h=m.join(", ");if(t&&s>=24){var y=P(s,"hour");h+=" (".concat(y,")")}return h}function P(e,t){return 1!=e&&(t+="s"),"".concat(e," ").concat(t)}function N(e,t){return[Math.floor(e/t),e%t]}function j(){return h.a.parse(location.search)}n(35);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=x(t).call(this,e))||"object"!==T(r)&&"function"!=typeof r?R(o):r).onInputChanged=n.inputChanged.bind(R(n)),n.onKeyDown=n.keyDown.bind(R(n)),n.onMouseOver=n.mouseOver.bind(R(n)),n.onMouseOut=n.mouseOut.bind(R(n)),n.onSubmit=n.submit.bind(R(n)),n.onClick=n.click.bind(R(n)),n.state={results:[],show:!1,selectedResultId:null},n.requesting=null,n.selectedResultId=null,n.onDocumentClick=n.documentClick.bind(R(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.form.contains(e.target)||this.setState({show:!1})}},{key:"inputChanged",value:function(e){var t=this;this.requesting&&this.requesting.abort(),""!=e.target.value.trim()?this.requesting=p("/1/shows",{query:{title_suggest:e.target.value.trim(),per_page:10,fields:"title,premiered,poster_image"}}).done(function(e){t.suggestNode.scrollTop=0,t.setState({results:e,show:!0,selectedResultId:null}),t.setNextSelectedId(0)}):this.setState({results:[],show:!1,selectedResultId:null})}},{key:"keyDown",value:function(e){switch(e.keyCode){case 38:this.setNextSelectedId(-1);break;case 40:this.setNextSelectedId(1);break;case 13:this.state.selectedResultId&&(location.href="/show/".concat(this.state.selectedResultId))}}},{key:"mouseOver",value:function(e){this.state.selectedResultId=parseInt(e.target.getAttribute("data-id")),this.setNextSelectedId(0,!0)}},{key:"mouseOut",value:function(e){this.setState({selectedResultId:null})}},{key:"setNextSelectedId",value:function(e,t){if(0!=this.state.results.length){var n=-1;if(this.state.selectedResultId){n=0;var o=!0,r=!1,a=void 0;try{for(var i,s=this.state.results[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){if(i.value.id==this.state.selectedResultId)break;n++}}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}}(n+=e)<0&&(n=0),n>this.state.results.length-1&&(n=this.state.results.length-1);var l=this.state.results[n].id;if(this.setState({selectedResultId:l}),!t){var c=document.getElementById("sresult-"+l).offsetHeight;if((n+1)*c>this.suggestNode.offsetHeight){var u=n-Math.floor(this.suggestNode.offsetHeight/c)+1,f=this.suggestNode.offsetHeight%c;this.suggestNode.scrollTop=u*c+f}else this.suggestNode.scrollTop=0}}}},{key:"submit",value:function(e){e.preventDefault()}},{key:"click",value:function(e){this.state.selectedResultId&&(location.href="/show/".concat(this.state.selectedResultId))}},{key:"resultClassName",value:function(e){var t="result";return e.id==this.state.selectedResultId&&(t+=" selected"),t}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{id:"search",className:"form-inline",onSubmit:this.onSubmit,ref:function(t){return e.form=t}},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search",onChange:this.onInputChanged,onKeyDown:this.onKeyDown}),r.a.createElement("div",{className:"suggest",ref:function(t){return e.suggestNode=t},style:{display:this.state.show?"block":"none"}},this.state.results.map(function(t){return r.a.createElement("div",{key:t.id,id:"sresult-".concat(t.id),"data-id":t.id,href:"/show/".concat(t.id),className:e.resultClassName(t),onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut,onClick:e.onClick},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:null!=t.poster_image?t.poster_image.url+"@SY100":""})),r.a.createElement("div",{className:"title"},t.title," (",t.premiered?t.premiered.substring(0,4):"",")"))})))}}])&&I(n.prototype,o),a&&I(n,a),t}(),L=n(1),q=n.n(L),A=n(4),U=n.n(A);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G={title:q.a.string,description:q.a.string,url:q.a.string},z=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=W(t).call(this,e))||"object"!==F(r)&&"function"!=typeof r?X(o):r).onNextClick=n.nextClick.bind(X(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r.a.Component),n=t,(o=[{key:"nextClick",value:function(e){location.href=this.props.url}},{key:"render",value:function(){return r.a.createElement("a",{className:"fas fa-step-forward",title:this.props.title,href:this.props.url})}}])&&H(n.prototype,o),a&&H(n,a),t}();z.propTypes=G;var Y=z;n(38);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $={onChange:q.a.func},ee=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=K(t).call(this,e))||"object"!==J(r)&&"function"!=typeof r?Q(o):r).onSliderMouseMove=n.sliderMouseMove.bind(Q(n)),n.onSliderClick=n.sliderClick.bind(Q(n)),n.onIconClick=n.iconClick.bind(Q(n)),n.state={percent:100*(localStorage.getItem("volume")||1),show:!1,muted:!1},n.onDocumentClick=n.documentClick.bind(Q(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){var e=localStorage.getItem("volume")||1;this.props.onChange&&this.props.onChange(e),document.addEventListener("click",this.onDocumentClick),document.addEventListener("ontouchstart",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("ontouchstart",this.onDocumentClick)}},{key:"documentClick",value:function(e){this.icon.contains(e.target)||this.setState({show:!1})}},{key:"sliderMouseMove",value:function(e){1==e.buttons&&this.onSliderClick(e)}},{key:"sliderClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target.querySelector(".scrubber"),n=e.clientY;n-=e.target.offsetTop+t.offsetTop,(n=t.offsetHeight-n)>t.offsetHeight&&(n=t.offsetHeight),n<0&&(n=0);var o=1/t.offsetHeight*n;o<0&&(o=0),this.setState({percent:100*o}),this.props.onChange&&this.props.onChange(o),localStorage.setItem("volume",o)}},{key:"iconClick",value:function(e){this.setState({show:!this.state.show})}},{key:"renderBar",value:function(){if(this.state.show)return r.a.createElement("div",{className:"volume-slider",onMouseMove:this.onSliderMouseMove,onClick:this.onSliderClick},r.a.createElement("div",{className:"scrubber"},r.a.createElement("div",{className:"scrubber-percentage",style:{height:this.state.percent+"%"}}),r.a.createElement("div",{className:"scrubber-head",style:{bottom:this.state.percent+"%"}})))}},{key:"render",value:function(){var e=this,t=U()({fa:!0,"fa-volume-up":this.state.percent>=50&&!this.state.muted,"fa-volume-down":this.state.percent<50&&this.state.percent>=1&&!this.state.muted,"fa-volume-off":this.state.percent<1||this.state.muted});return r.a.createElement("span",{className:t,onClick:this.onIconClick,ref:function(t){return e.icon=t}},this.renderBar())}}])&&V(n.prototype,o),a&&V(n,a),t}();ee.propTypes=$;var te=ee;n(39);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se={metadata:q.a.object,onAudioChange:q.a.func,onSubtitleChange:q.a.func,bottom:q.a.bool},le=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=re(t).call(this,e))||"object"!==ne(r)&&"function"!=typeof r?ae(o):r).state={show:!1},n.audio=[],n.subtitles=[],n.parseMetadata(),n.onClick=n.click.bind(ae(n)),n.onAudioClick=n.audioClick.bind(ae(n)),n.onSubtitleClick=n.subtitleClick.bind(ae(n)),n.onDocumentClick=n.documentClick.bind(ae(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick)}},{key:"documentClick",value:function(e){null!=this.icon&&(this.icon.contains(e.target)||this.setState({show:!1}))}},{key:"parseMetadata",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.props.metadata.streams[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;if("tags"in a){var i=null;if("title"in a.tags&&(i=a.tags.title),"language"in a.tags&&(i=a.tags.language),i){var s={language:i,title:a.tags.title||i,index:a.index};switch(a.codec_type){case"subtitle":this.subtitles.push(s);case"audio":this.audio.push(s)}}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"click",value:function(e){this.setState({show:!this.state.show})}},{key:"subtitleClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onSubtitleChange&&this.props.onSubtitleChange(e.target.getAttribute("data-data"))}},{key:"audioClick",value:function(e){e.preventDefault(),this.setState({show:!1}),this.props.onAudioChange&&this.props.onAudioChange(e.target.getAttribute("data-data"))}},{key:"renderSubtitles",value:function(){var e=this;if(0!=this.subtitles.length)return r.a.createElement("span",null,r.a.createElement("p",{className:"title"},"Subtitles"),r.a.createElement("p",null,r.a.createElement("a",{href:"#",onClick:this.onSubtitleClick,"data-data":""},"None")),this.subtitles.map(function(t){return r.a.createElement("p",{key:t.index},r.a.createElement("a",{href:"#",onClick:e.onSubtitleClick,"data-data":"".concat(t.language,":").concat(t.index)},t.title))}))}},{key:"renderAudio",value:function(){var e=this;if(!(this.audio.length<=1))return r.a.createElement("span",null,r.a.createElement("p",{className:"title"},"Audio"),this.audio.map(function(t){return r.a.createElement("p",{key:t.index},r.a.createElement("a",{href:"#",onClick:e.onAudioClick,"data-data":"".concat(t.language,":").concat(t.index)},t.title))}))}},{key:"renderAudioSubtitles",value:function(){var e=this;if(!this.state.show)return null;var t=U()({"audio-subtitles":!0,"audio-subtitles-bottom":this.props.bottom});return r.a.createElement("div",{className:t,ref:function(t){return e.audioSubtitlesElem=t}},this.renderSubtitles(),this.renderAudio())}},{key:"render",value:function(){var e=this;return this.audio.length<=1&&0==this.subtitles.length?null:r.a.createElement("span",{ref:function(t){return e.icon=t}},r.a.createElement("span",{className:"fas fa-closed-captioning",onClick:this.onClick}),this.renderAudioSubtitles())}}])&&oe(n.prototype,o),a&&oe(n,a),t}();le.propTypes=se;var ce=le;n(40);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye={duration:q.a.number.isRequired,onReturnCurrentTime:q.a.func.isRequired,onNewTime:q.a.func.isRequired},be=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=pe(t).call(this,e),n=!r||"object"!==ue(r)&&"function"!=typeof r?me(o):r,de(me(n),"sliderClick",function(e){var t=n.getEventXOffset(e),o=n.props.duration/n.slider.offsetWidth,r=Math.trunc(o*t);n.setState({currentTime:r,hoverTime:null,drag:!1}),n.props.onNewTime(r)}),de(me(n),"mouseMove",function(e){var t=n.getEventXOffset(e),o=n.props.duration/n.slider.offsetWidth,r=Math.trunc(o*t);r>n.props.duration&&(r=n.props.duration),n.setState({hoverTime:r,drag:1==e.buttons})}),de(me(n),"touchMove",function(e){n.mouseMove(e),n.setState({drag:!0})}),de(me(n),"mouseLeave",function(e){n.setState({hoverTime:null,drag:!1})}),de(me(n),"touchEnd",function(e){n.props.onNewTime(n.state.hoverTime),n.setState({currentTime:n.state.hoverTime,hoverTime:null,drag:!1})}),n.state={currentTime:0,hoverTime:null,drag:!1},n.timerGetCurrentTime=null,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getCurrentTime()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerGetCurrentTime),this.timerGetCurrentTime=null}},{key:"getCurrentTime",value:function(){var e=this;this.setState({currentTime:this.props.onReturnCurrentTime()}),this.timerGetCurrentTime=setTimeout(function(){e.getCurrentTime()},1e3)}},{key:"progressPercent",value:function(){var e=this.state.currentTime;return null!==this.state.hoverTime&&this.state.drag&&(e=this.state.hoverTime),(e/this.props.duration*100).toString()+"%"}},{key:"getEventXOffset",value:function(e){e.type.match("^touch")&&(e.originalEvent&&(e=e.originalEvent),e=e.touches[0]||e.changedTouches[0]);var t=0,n=this.slider;do{isNaN(n.offsetLeft)||(t+=n.offsetLeft)}while(n=n.offsetParent);var o=e.clientX-t;return o>this.slider.offsetWidth&&(o=this.slider.offsetWidth),o<-1?0:o+1}},{key:"renderHoverTime",value:function(){return null===this.state.hoverTime?null:r.a.createElement("div",{className:"hover-time",style:{left:(this.state.hoverTime/this.props.duration*100).toString()+"%"}},r.a.createElement("div",{className:"hover-time-box"},_(parseInt(this.state.hoverTime))))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"player-slider-wrapper",onClick:this.sliderClick,onMouseMove:this.mouseMove,onMouseLeave:this.mouseLeave,onTouchStart:this.mouseMove,onTouchMove:this.touchMove,onTouchCancel:this.mouseLeave,onTouchEnd:this.touchEnd},this.renderHoverTime(),r.a.createElement("div",{className:"slider",ref:function(t){return e.slider=t}},r.a.createElement("div",{className:"progress",style:{width:this.progressPercent()}})))}}])&&fe(n.prototype,o),a&&fe(n,a),t}();be.propTypes=ye;var ve=be;n(41);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ee(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e={hcenter:q.a.bool},Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,Se(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=U()({loader:!0,"loader-hcenter":this.props.hcenter});return r.a.createElement("div",{className:e})}}])&&we(n.prototype,o),a&&we(n,a),t}();Oe.propTypes=_e,Oe.defaultProps={hcenter:!1};var Ce=Oe;n(42);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe={playServerUrl:q.a.string,playId:q.a.string,session:q.a.string,startTime:q.a.number,metadata:q.a.object,info:q.a.object,nextInfo:q.a.object,backToInfo:q.a.object,currentInfo:q.a.object,onAudioChange:q.a.func,onSubtitleChange:q.a.func,audio_lang:q.a.string,subtitle_lang:q.a.string,onTimeUpdate:q.a.func},Re=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=je(t).call(this,e))||"object"!==Pe(r)&&"function"!=typeof r?Te(o):r).onPlayPauseClick=n.playPauseClick.bind(Te(n)),n.duration=parseInt(e.metadata.format.duration),n.pingTimer=null,n.hls=null,n.onFullscreenClick=n.fullscreenClick.bind(Te(n)),n.onVolumeChange=n.volumeChange.bind(Te(n)),n.onAudioChange=n.audioChange.bind(Te(n)),n.onSubtitleChange=n.subtitleChange.bind(Te(n)),n.volume=1,n.hideControlsTimer=null,n.onSliderReturnCurrentTime=n.sliderReturnCurrentTime.bind(Te(n)),n.onSliderNewTime=n.sliderNewTime.bind(Te(n)),n.state={playing:!1,time:n.props.startTime,startTime:n.props.startTime,session:e.session,fullscreen:!1,showControls:!0,audio:n.props.audio_lang,subtitle:n.props.subtitle_lang,loading:!1},n.isChrome=!!window.chrome&&!!window.chrome.webstore,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.currentInfo.title," | SEPLIS"),this.video.addEventListener("timeupdate",this.timeupdateEvent.bind(this)),this.video.addEventListener("pause",this.pauseEvent.bind(this)),this.video.addEventListener("play",this.playEvent.bind(this)),document.addEventListener("fullscreenchange",this.fullscreenchangeEvent.bind(this)),document.addEventListener("webkitfullscreenchange",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("webkitendfullscreen",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("webkitenterfullscreen",this.fullscreenchangeEvent.bind(this)),document.addEventListener("mozfullscreenchange",this.fullscreenchangeEvent.bind(this)),document.addEventListener("msfullscreenchange",this.fullscreenchangeEvent.bind(this)),this.video.addEventListener("error",this.playError.bind(this)),this.video.addEventListener("waiting",this.playWaiting.bind(this)),this.video.addEventListener("click",this.playClick.bind(this)),this.video.addEventListener("touchstart",this.playClick.bind(this)),this.video.addEventListener("loadeddata",this.loadedEvent.bind(this)),this.setPingTimer(),this.video.volume=this.volume,this.loadStream(this.getPlayUrl()),document.onmousemove=this.mouseMove.bind(this),document.ontouchmove=this.mouseMove.bind(this),document.onkeypress=this.keypress.bind(this),document.onbeforeunload=this.beforeUnload.bind(this)}},{key:"loadedEvent",value:function(e){this.setState({loading:!1})}},{key:"loadStream",value:function(e){var t=this;if(this.setState({loading:!0}),!Hls.isSupported()||this.isChrome)return this.video.src=e,this.video.load(),void this.video.play();this.hls&&(this.hls.destroy(),this.hls.bufferTimer&&(clearInterval(this.hls.bufferTimer),this.hls.bufferTimer=void 0),this.hls=null),this.hls=new Hls({startLevel:0,manifestLoadingTimeOut:3e4,debug:!1}),this.hls.loadSource(e),this.hls.attachMedia(this.video),this.hls.on(Hls.Events.MANIFEST_PARSED,function(){t.video.play()}),this.hls.on(Hls.Events.ERROR,this.hlsError.bind(this))}},{key:"hlsError",value:function(e,t){if(console.warn(t),t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("hls.js fatal network error encountered, try to recover"),this.hls.loadSource(this.getPlayUrl());break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("hls.js fatal media error encountered, try to recover"),this.handleMediaError();break;default:console.log("hls.js could not recover"),this.hls.destroy()}}},{key:"handleMediaError",value:function(){this.setState({loading:!0}),this.hls.recoverMediaError(),this.video.play()}},{key:"keypress",value:function(e){"Space"==e.code&&this.playPauseClick()}},{key:"playClick",value:function(e){e.preventDefault(),this.video.paused||this.state.loading||(this.setState({showControls:!this.state.showControls}),this.setHideControlsTimer())}},{key:"setPingTimer",value:function(){var e=this;clearTimeout(this.pingTimer),this.pingTimer=setTimeout(function(){p(e.getPlayUrl()+"&action=ping"),e.setPingTimer()},2e3)}},{key:"setHideControlsTimer",value:function(e){var t=this;null==e&&(e=6e3),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout(function(){t.video.paused||t.state.loading||t.setState({showControls:!1})},e)}},{key:"mouseMove",value:function(e){this.setState({showControls:!0}),this.setHideControlsTimer()}},{key:"getPlayUrl",value:function(){return"".concat(this.props.playServerUrl,"/play")+"?play_id=".concat(this.props.playId)+"&session=".concat(this.props.session)+"&start_time=".concat(this.state.startTime)+"&subtitle_lang=".concat(this.state.subtitle||"")+"&audio_lang=".concat(this.state.audio||"")+"&device=hls"}},{key:"playPauseClick",value:function(){this.video.paused?(this.video.play(),this.setHideControlsTimer(2e3)):this.video.pause()}},{key:"fullscreenchangeEvent",value:function(){this.setState({fullscreen:!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)})}},{key:"pauseEvent",value:function(){this.setState({playing:!1,showControls:!0})}},{key:"playEvent",value:function(){this.setState({playing:!0,loading:!0})}},{key:"playError",value:function(e){this.setState({loading:!1}),console.warn(e.currentTarget.error),e.currentTarget.error.code==e.currentTarget.error.MEDIA_ERR_DECODE&&this.handleMediaError()}},{key:"playWaiting",value:function(){this.setState({loading:!0})}},{key:"timeupdateEvent",value:function(e){var t=this;if(!this.video.paused){this.setState({loading:!1});var n=this.video.currentTime;(this.video.seekable.length<=1||this.video.seekable.end(0)<=1)&&(n+=this.state.startTime),this.setState({time:n,playing:!0},function(){t.props.onTimeUpdate&&t.props.onTimeUpdate(t.state.time)}),this.hideControlsTimer||this.setHideControlsTimer()}}},{key:"changeVideoState",value:function(e){var t=this;e.loading=!0,this.setState(e),this.cancelPlayUrl().then(function(){t.loadStream(t.getPlayUrl()),t.setPingTimer()})}},{key:"beforeUnload",value:function(){this.cancelPlayUrl()}},{key:"cancelPlayUrl",value:function(){var e=this;return new Promise(function(t,n){p(e.getPlayUrl()+"&action=cancel").done(function(){t()}).fail(function(e){n(e)})})}},{key:"fullscreenClick",value:function(e){if(this.state.fullscreen)document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();else{var t=document.getElementById("player");t.enterFullscreen?t.enterFullscreen():t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.webkitEnterFullscreen?t.webkitEnterFullscreen():this.video.webkitEnterFullscreen&&this.video.webkitEnterFullscreen()}this.setState({fullscreen:!this.state.fullscreen})}},{key:"getDurationText",value:function(){return _(parseInt(this.duration))}},{key:"getCurrentTimeText",value:function(){return _(parseInt(this.state.time))}},{key:"renderPlayNext",value:function(){if(this.props.nextInfo)return r.a.createElement(Y,{title:this.props.nextInfo.title,url:this.props.nextInfo.url})}},{key:"volumeChange",value:function(e){this.volume=e,this.video&&(this.video.volume=e)}},{key:"audioChange",value:function(e){this.props.onAudioChange&&this.props.onAudioChange(e),this.changeVideoState({audio:e,startTime:this.state.time})}},{key:"subtitleChange",value:function(e){this.props.onSubtitleChange&&this.props.onSubtitleChange(e),this.changeVideoState({subtitle:e,startTime:this.state.time})}},{key:"sliderNewTime",value:function(e){this.video.pause(),clearTimeout(this.hideControlsTimer),this.hideControlsTimer=null,this.changeVideoState({time:e,startTime:e})}},{key:"sliderReturnCurrentTime",value:function(){return this.state.time}},{key:"showControlsVisibility",value:function(){return this.state.showControls?"visible":"hidden"}},{key:"renderControlsTop",value:function(){return r.a.createElement("div",{className:"controls controls-top",style:{visibility:this.showControlsVisibility()}},r.a.createElement("div",{className:"control"},r.a.createElement("a",{className:"fas fa-times",href:this.props.backToInfo.url,title:this.props.backToInfo.title})),r.a.createElement("div",{className:"control-text control-text-title"},this.props.currentInfo.title),r.a.createElement("div",{className:"control-spacer"}),r.a.createElement("div",{className:"control"},r.a.createElement(Ze,null)),r.a.createElement("div",{className:"control"},r.a.createElement(ce,{metadata:this.props.metadata,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),r.a.createElement("div",{className:"control"},r.a.createElement(te,{onChange:this.onVolumeChange})),r.a.createElement("div",{className:"control"},this.renderPlayNext()))}},{key:"renderControlsBottom",value:function(){var e=U()({fa:!0,"fa-pause":this.state.playing,"fa-play":!this.state.playing}),t=U()({fa:!0,"fa-expand":this.state.fullscreen,"fa-arrows-alt":!this.state.fullscreen});return r.a.createElement("div",{className:"controls",style:{visibility:this.showControlsVisibility()}},r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:e,onClick:this.onPlayPauseClick})),r.a.createElement("div",{className:"control-text"},this.getCurrentTimeText()),r.a.createElement(ve,{duration:this.duration,onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),r.a.createElement("div",{className:"control-text",title:"Timeleft"},this.getDurationText()),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:t,onClick:this.onFullscreenClick})))}},{key:"renderLoading",value:function(){return this.state.loading?r.a.createElement(Ce,{hcenter:!0}):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"player"},r.a.createElement("div",{className:"overlay"},r.a.createElement("video",{className:"video",preload:"none",autoPlay:!1,controls:!1,ref:function(t){return e.video=t}}),this.renderControlsTop(),this.renderControlsBottom(),this.renderLoading()))}}])&&Ne(n.prototype,o),a&&Ne(n,a),t}();Re.propTypes=xe,Re.defaultProps={startTime:0,info:null,nextInfo:null};var De=Re;function Me(e){return new Promise(function(t,n){p(e).done(function(e){var o=!1,r=0;if(0!=e.length){var a=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;r+=1,p(u.play_url+"/metadata",{query:{play_id:u.play_id}}).done(function(e){o||(o=!0,t({playServer:u,metadata:e}))}).always(function(){0==(r-=1)&&0==o&&n({code:2,message:"This episode is not on any of your play servers."})})}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}}else n({code:1,message:"No play servers."})}).fail(function(e){n(e)})})}function Le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qe={ANY_CHANGED:"anyChanged",AVAILABLE:"isAvailable",IS_CONNECTED:"isConnected",PLAYER_STATE:"playerState",CURRENT_TIME:"currentTime"},Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1}var t,n,o;return t=e,(n=[{key:"load",value:function(t){this.onInit=t,e.initialized?this.initCast(!0):this.loadCastScript()}},{key:"loadCastScript",value:function(){if(e.initList.push(this),!e.loaded){e.loaded=!0,window.__onGCastApiAvailable=function(t){setTimeout(function(){var n=new chrome.cast.SessionRequest(seplisChromecastAppId),o=new chrome.cast.ApiConfig(n,Ue,Xe,chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(o,function(){e.initialized=!0;var n=!0,o=!1,r=void 0;try{for(var a,i=e.initList[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){a.value.initCast(t)}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}})},500)};var t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",document.head.appendChild(t)}}},{key:"initCast",value:function(e){this.loaded=e,e&&this.onInit&&this.onInit(this)}},{key:"requestSession",value:function(){chrome.cast.requestSession(Ue)}},{key:"isConnected",value:function(){return!!e.session&&"connected"==e.session.status}},{key:"getSession",value:function(){return e.session}},{key:"getMediaSession",value:function(){return e.mediaSession}},{key:"getFriendlyName",value:function(){return e.session.receiver.friendlyName}},{key:"getCurrentTime",value:function(){return e.mediaSession.getEstimatedTime()}},{key:"playOrPause",value:function(t,n){"PLAYING"==e.mediaSession.playerState?this.pause(t,n):this.play(t,n)}},{key:"play",value:function(t,n){e.mediaSession.play(null,t,n)}},{key:"pause",value:function(t,n){e.mediaSession.pause(null,t,n)}},{key:"playEpisode",value:function(t,n,o){var r=this;return new Promise(function(a,i){if(!r.isConnected())return alert("Not connected to a cast device."),void i();var s="/1/shows/".concat(t,"/episodes/").concat(n,"/play-servers");Promise.all([Me(s),p("/1/progress-token"),p("/1/shows/".concat(t)),p("/1/shows/".concat(t,"/episodes/").concat(n)),p("/1/shows/".concat(t,"/episodes/").concat(n,"/watched")),p("/1/shows/".concat(t,"/user-subtitle-lang"))]).then(function(t){o||(o=t[4]?t[4].position:0);var n={play:t[0].playServer,metadata:{format:{duration:t[0].metadata.format.duration},streams:t[0].metadata.streams},token:t[1].token,type:"episode",show:{id:t[2].id,title:t[2].title,episode_type:t[2].episode_type},episode:{number:t[3].number,title:t[3].title,season:t[3].season,episode:t[3].episode},startTime:o,apiUrl:seplisBaseUrl},s=t[0].playServer.play_url+"/play?play_id="+t[0].playServer.play_id;s+="&session=".concat(k()),s+="&device=chromecast",o&&(s+="&start_time=".concat(o)),t[5]&&(s+="&subtitle_lang=".concat(t[5].subtitle_lang||""),s+="&audio_lang=".concat(t[5].audio_lang||""));var l=new chrome.cast.media.LoadRequest(r._playEpisodeMediaInfo(s,t[2],t[3]));l.customData=n,r.getSession().loadMedia(l,function(e){He(e),a(e)},function(e){i(e)},e)}).catch(function(e){i(e)})})}},{key:"_playEpisodeMediaInfo",value:function(e,t,n){var o=new chrome.cast.media.MediaInfo(e);return o.metadata=new chrome.cast.media.TvShowMediaMetadata,o.metadata.seriesTitle=t.title,o.metadata.title=n.title,o.metadata.episode=n.episode||n.number,o.metadata.season=n.season,o.metadata.originalAirdate=n.air_date,o.metadata.metadataType=chrome.cast.media.MetadataType.TV_SHOW,o.metadata.images=[{url:null!=t.poster_image?t.poster_image.url+"@SX180.jpg":""}],o}},{key:"addEventListener",value:function(t,n){t in e.eventListener||(e.eventListener[t]=[]);e.eventListener[t];e.eventListener[t].includes(n)||e.eventListener[t].push(n)}},{key:"removeEventListener",value:function(t,n){var o=e.eventListener[t]||[],r=o.indexOf(n);r>0&&o.splice(r,1)}}])&&Le(t.prototype,n),o&&Le(t,o),e}();function Ue(e){Ae.session=e,0!=e.media.length&&He(e.media[0]),Ae.timerGetCurrentTime=setInterval(function(){Ae.mediaSession&&"PLAYING"==Ae.mediaSession.playerState&&Be(qe.CURRENT_TIME,Ae.mediaSession.getEstimatedTime())},1e3),e.addMediaListener(He),e.addUpdateListener(Fe),Be(qe.IS_CONNECTED,!0)}function Fe(e){Ae.session.status!==chrome.cast.SessionStatus.CONNECTED&&(Ae.session=null,Ae.mediaSession=null,Be(qe.IS_CONNECTED,!1))}function He(e){Ae.mediaSession=e,e.addUpdateListener(We),Be(qe.CURRENT_TIME,Ae.mediaSession.getEstimatedTime()),We()}function We(){Be(qe.PLAYER_STATE,Ae.mediaSession.playerState)}function Xe(e){Be(qe.AVAILABLE,"available"==e)}function Be(e,t){var n={field:e,value:t};Ge("anyChanged",n),Ge(e,n)}function Ge(e,t){(Ae.eventListener[e]||[]).forEach(function(e){try{e(t)}catch(e){console.log(e)}})}Ae.initialized=!1,Ae.loaded=!1,Ae.initList=[],Ae.session=null,Ae.mediaSession=null,Ae.eventListener={},Ae.events=qe,Ae.timerGetCurrentTime=null;var ze=Ae;n(43);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ve(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ve(this,Ke(t).call(this,e))).state={connected:!1,available:!1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.onConnected=this.connected.bind(this),this.onDeviceAvailable=this.deviceAvailable.bind(this),this.cast=new ze,this.cast.load(this.onCastInit.bind(this)),this.iconClick=this.castIconClick.bind(this)}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("isConnected",this.onConnected)}},{key:"onCastInit",value:function(){this.cast.addEventListener("isConnected",this.onConnected),this.cast.addEventListener("isAvailable",this.onDeviceAvailable)}},{key:"deviceAvailable",value:function(e){this.setState({available:e.value})}},{key:"connected",value:function(e){this.setState({connected:e.value})}},{key:"castIconClick",value:function(e){this.cast.requestSession()}},{key:"render",value:function(){if(!this.state.available)return null;var e="/static/img/chromecast.svg";return this.state.connected&&(e="/static/img/chromecast_connected.svg"),r.a.createElement("img",{onClick:this.iconClick,title:"Chromecast",className:"castbutton",src:e})}}])&&Je(n.prototype,o),a&&Je(n,a),t}(),$e="episode_watched_status";function et(e,t,n){var o=new Event($e,{method:e,show_id:t,episode_number:n});document.dispatchEvent(o)}n(44);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=ot(t).call(this,e))||"object"!==tt(r)&&"function"!=typeof r?rt(o):r).state={connected:!1,deviceName:"",playerState:"",info:null,currentTime:0,loading:!1,changingTime:!1},n.cast=null,n.onSliderReturnCurrentTime=n.sliderReturnCurrentTime.bind(rt(n)),n.onSliderNewTime=n.sliderNewTime.bind(rt(n)),n.onPlayPauseClick=n.playPauseClick.bind(rt(n)),n.onAudioChange=n.audioChange.bind(rt(n)),n.onSubtitleChange=n.subtitleChange.bind(rt(n)),n.clickPlayNextEpisode=n.playNextEpisode.bind(rt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.cast=new ze,this.cast.load(this.initCast.bind(this))}},{key:"componentWillUnmount",value:function(){this.cast.removeEventListener("anyChanged",this.castStateChanged.bind(this));var e=this.cast.getSession();e&&e.removeMessageListener("urn:x-cast:net.seplis.cast.get_custom_data",this.receiveCastInfo.bind(this))}},{key:"audioChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.subAudioSubSave({subtitle_lang:e})}},{key:"subAudioSubSave",value:function(e){var t=this,n=this.state.info.show,o=this.state.info.episode;p("/1/shows/".concat(n.id,"/user-subtitle-lang"),{method:"PATCH",data:e}).done(function(){t.cast.playEpisode(n.id,o.number,t.state.currentTime)}).catch(function(e){alert(e.message)})}},{key:"initCast",value:function(){this.cast.addEventListener("anyChanged",this.castStateChanged.bind(this))}},{key:"playPauseClick",value:function(e){this.cast.playOrPause()}},{key:"castStateChanged",value:function(e){switch(e.field){case"playerState":this.playerStateChanged(e);break;case"isConnected":this.connectedChanged();break;case"currentTime":this.currentTimeChanged(e)}}},{key:"connectedChanged",value:function(){var e=this.cast.isConnected();this.setState({connected:e,deviceName:e?this.cast.getFriendlyName():""}),e?(this.setState({loading:!1}),this.cast.getSession().addMessageListener("urn:x-cast:net.seplis.cast.get_custom_data",this.receiveCastInfo.bind(this))):this.setState({info:null})}},{key:"receiveCastInfo",value:function(e,t){var n=this;this.setState({info:JSON.parse(t),playNextEpisode:null},function(){n.cast.getMediaSession()&&n.currentTimeChanged({value:n.cast.getMediaSession().getEstimatedTime()}),n.getPlayNextEpisode()})}},{key:"playerStateChanged",value:function(e){this.setState({playerState:e.value,loading:"BUFFERING"==e.value||this.changingTime}),this.state.info||this.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),"IDLE"==e.value&&et("refresh",0,0)}},{key:"getPlayNextEpisode",value:function(){var e=this;if(this.state.info){var t=parseInt(this.state.info.episode.number)+1,n=this.state.info.show.id;p("/1/shows/".concat(n,"/episodes/").concat(t)).done(function(t){e.setState({nextEpisode:t})})}}},{key:"playNextEpisode",value:function(){var e=this;if(this.state.nextEpisode&&this.state.info){var t=this.state.info;t.episode=this.state.nextEpisode,t.startTime=0,this.setState({nextEpisode:null,info:t,playerState:"",loading:!0,changingTime:!0,currentTime:0}),this.cast.playEpisode(this.state.info.show.id,this.state.nextEpisode.number,0).catch(function(t){alert(t.message),e.setState({changingTime:!1})}).then(function(){e.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),e.setState({changingTime:!1})})}}},{key:"currentTimeChanged",value:function(e){var t=e.value;this.cast.getMediaSession()&&(this.cast.getMediaSession().items&&1==this.cast.getMediaSession().items.length&&(this.state.changingTime||(0==this.cast.getMediaSession().items[0].startTime&&this.state.info&&(t+=this.state.info.startTime),this.setState({currentTime:t}))))}},{key:"sliderNewTime",value:function(e){var t=this;this.state.info.startTime=e,this.setState({loading:!0,currentTime:e,changingTime:!0}),this.cast.pause(function(){t.cast.playEpisode(t.state.info.show.id,t.state.info.episode.number,e).catch(function(e){t.setState({changingTime:!1}),alert(e.message)}).then(function(){t.cast.getSession().sendMessage("urn:x-cast:net.seplis.cast.get_custom_data",{}),t.setState({changingTime:!1})})},function(){t.setState({changingTime:!1})})}},{key:"sliderReturnCurrentTime",value:function(){return this.state.currentTime}},{key:"renderPlayControl",value:function(){if(this.state.loading)return r.a.createElement("div",{className:"control"},r.a.createElement("img",{src:"/static/img/spinner.svg"}));var e=U()({fa:!0,"fa-pause":"PLAYING"==this.state.playerState,"fa-play":"PLAYING"!=this.state.playerState});return r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:e,onClick:this.onPlayPauseClick}))}},{key:"getDuration",value:function(){return this.state.info?parseInt(this.state.info.metadata.format.duration):0}},{key:"getPlayNextInfo",value:function(){if(!this.state.info||!this.state.info.show||!this.state.nextEpisode)return null;var e=this.state.info.show,t=this.state.nextEpisode;return{title:S(e,t),url:"/show/".concat(e.id,"/episode/").concat(t.number,"/play")}}},{key:"renderPlayNext",value:function(){if(this.getPlayNextInfo())return r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"fas fa-step-forward",onClick:this.clickPlayNextEpisode}))}},{key:"renderPlaying",value:function(){var e=this.state.info.show,t=this.state.info.episode;return r.a.createElement("div",{id:"castbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text"},r.a.createElement("b",null,e.title," - ",S(e,t)),"Â  on ",this.state.deviceName),r.a.createElement("div",{className:"controls"}),r.a.createElement("div",{className:"controls"},this.renderPlayControl(),r.a.createElement("div",{className:"control-text"},_(this.state.currentTime)),r.a.createElement(ve,{duration:this.getDuration(),onReturnCurrentTime:this.onSliderReturnCurrentTime,onNewTime:this.onSliderNewTime}),r.a.createElement("div",{className:"control-text"},_(this.getDuration())),r.a.createElement("div",{className:"control"},r.a.createElement(ce,{metadata:this.state.info.metadata,bottom:!0,onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange})),this.renderPlayNext())))}},{key:"renderFinished",value:function(){var e=this.state.info.show,t=(this.state.info.episode,this.getPlayNextInfo());return t?r.a.createElement("div",{id:"castbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text"},r.a.createElement("b",null,this.state.deviceName),r.a.createElement("br",null),r.a.createElement("b",null,"Play next episode:"),"Â  ",r.a.createElement("a",{onClick:this.clickPlayNextEpisode},e.title," - ",t.title)))):null}},{key:"renderLoading",value:function(){if(this.state.loading)return r.a.createElement("img",{src:"/static/img/spinner.svg"})}},{key:"renderReadyToPlay",value:function(){return r.a.createElement("div",{id:"castbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text"},r.a.createElement("b",null,"Ready to cast on ",this.state.deviceName)," ",r.a.createElement("br",null),this.renderLoading(),this.renderPlayNext())))}},{key:"render",value:function(){return this.cast&&this.state.connected?this.state.info&&"IDLE"==this.state.playerState&&!this.state.changingTime?this.renderFinished():this.state.info?this.renderPlaying():this.renderReadyToPlay():null}}])&&nt(n.prototype,o),a&&nt(n,a),t}();n(45);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ct(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ct(this,ut(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderShowDropdown",value:function(){return r.a.createElement("span",{className:"dropdown"},r.a.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},"Shows"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement(s.b,{className:"dropdown-item",to:"/countdown"},"Countdown"),r.a.createElement(s.b,{className:"dropdown-item",to:"/fan-of"},"Fan of"),r.a.createElement(s.b,{className:"dropdown-item",to:"/episodes-to-watch"},"Episodes to Watch"),r.a.createElement(s.b,{className:"dropdown-item",to:"/recently-aired"},"Recently Aired"),r.a.createElement(s.b,{className:"dropdown-item",to:"/shows-watched"},"Watched"),r.a.createElement(s.b,{className:"dropdown-item",to:"/user-shows-stats"},"Stats"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(s.b,{className:"dropdown-item",to:"/show-new"},"New show")))}},{key:"renderMain",value:function(){return r.a.createElement(s.b,{className:"link",to:"/"},"Main")}},{key:"renderAirDates",value:function(){return r.a.createElement(s.b,{className:"link",to:"/air-dates"},"Air dates")}},{key:"renderUserMenu",value:function(){if(y())return r.a.createElement("span",{className:"dropdown"},r.a.createElement("a",{className:"link dropdown-toggle","data-toggle":"dropdown"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement(s.b,{className:"dropdown-item",to:"/account"},"Account"),r.a.createElement(s.b,{className:"dropdown-item",to:"/play-servers"},"Play servers"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(s.b,{className:"dropdown-item",to:"/sign-out"},"Sign out")))}},{key:"renderChromecast",value:function(){if(y())return r.a.createElement("span",{className:"link"},r.a.createElement(it,null),r.a.createElement(Ze,null))}},{key:"renderSignIn",value:function(){if(!y())return r.a.createElement(s.b,{className:"link",to:"/sign-in"},"Sign in")}},{key:"renderCreateUser",value:function(){if(!y())return r.a.createElement(s.b,{className:"link",to:"/create-user"},"Create user")}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar-seplis"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-auto"},this.renderMain(),this.renderAirDates(),this.renderShowDropdown()),r.a.createElement("div",{className:"col-auto ml-auto order-sm-2 order-md-12"},this.renderChromecast(),this.renderCreateUser(),this.renderSignIn(),this.renderUserMenu()),r.a.createElement("div",{className:"col-12 col-md-6 m-auto order-sm-12 order-md-2"},r.a.createElement(M,{key:"Search"})))))}}])&&lt(n.prototype,o),a&&lt(n,a),t}();n(52);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt={showId:q.a.number.isRequired,isFan:q.a.bool},gt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=dt(t).call(this,e))||"object"!==mt(r)&&"function"!=typeof r?yt(o):r).state={isFan:e.isFan},n.onClick=n.onClick.bind(yt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){null==this.props.isFan&&this.getIsFan()}},{key:"onClick",value:function(e){var t=this;e.preventDefault(),this.setState({isFan:!this.state.isFan}),p("/1/users/".concat(v(),"/fan-of/").concat(this.props.showId),{method:this.state.isFan?"DELETE":"PUT"}).fail(function(){t.setState({isFan:!t.state.isFan})})}},{key:"getIsFan",value:function(){var e=this;y()&&p("/1/users/".concat(v(),"/fan-of/").concat(parseInt(this.props.showId))).done(function(t){e.setState({isFan:t.is_fan})})}},{key:"render",value:function(){var e=U()({btn:!0,"btn-fan":!0,"btn-fan__is-fan":this.state.isFan});return r.a.createElement("button",{className:e,onClick:this.onClick,title:this.state.isFan?"Unfan":"Become a Fan","aria-label":this.state.isFan?"Unfan":"Become a Fan"},this.state.isFan?r.a.createElement("span",{className:"fas fa-star"}):r.a.createElement("span",{className:"far fa-star"}))}}])&&ht(n.prototype,o),a&&ht(n,a),t}();gt.propTypes=vt;var wt=gt;function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function kt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct={showId:q.a.number.isRequired},Pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kt(this,_t(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderSettings",value:function(){if(!(g()<2))return r.a.createElement(s.c,{className:"nav-link ml-auto",to:"/show/".concat(this.props.showId,"/edit"),activeClassName:"active"},r.a.createElement("i",{className:"fas fa-cog"}))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"nav nav-pills mb-3",style:{borderBottom:"1px solid #007bff"}},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/show/".concat(this.props.showId),activeClassName:"active"},"Main"),r.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/info"),activeClassName:"active"},"Info"),r.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/seasons"),activeClassName:"active"},"Seasons"),r.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/images"),activeClassName:"active"},"Images"),r.a.createElement(s.c,{className:"nav-link",to:"/show/".concat(this.props.showId,"/stats"),activeClassName:"active"},"Stats"),this.renderSettings())}}])&&St(n.prototype,o),a&&St(n,a),t}();Pt.propTypes=Ct;var Nt=Pt;n(24),n(53);function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt={showId:q.a.number.isRequired,episodeNumber:q.a.number.isRequired,watched:q.a.object},Mt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=It(t).call(this,e))||"object"!==jt(r)&&"function"!=typeof r?xt(o):r).setWatchedState(),n.onWatchedIncr=n.onWatchedIncr.bind(xt(n)),n.onWatchedDecr=n.onWatchedDecr.bind(xt(n)),n.onWatchedClick=n.onWatchedClick.bind(xt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,r.a.Component),n=t,(o=[{key:"setWatchedState",value:function(){this.props.watched?this.state=this.props.watched:this.state={times:0,position:0}}},{key:"watchedApiEndpoint",value:function(){var e=this.props.showId,t=this.props.episodeNumber;return"/1/shows/".concat(e,"/episodes/").concat(t,"/watched")}},{key:"onWatchedIncr",value:function(e){var t=this;this.setState({times:++this.state.times}),p(this.watchedApiEndpoint(),{method:"PUT"}).done(function(e){et("incr",t.props.showId,t.props.episodeNumber),t.setState(e)}).fail(function(){t.setState({times:--t.state.times})})}},{key:"onWatchedDecr",value:function(e){var t=this;this.state.position>0?p(this.watchedApiEndpoint().replace("watched","position"),{method:"DELETE"}).done(function(e){et("decr",t.props.showId,t.props.episodeNumber),t.setState({position:0})}):this.state.times>0&&(this.setState({times:--this.state.times}),p(this.watchedApiEndpoint(),{data:{times:-1},method:"PUT"}).done(function(e){et("decr",t.props.showId,t.props.episodeNumber),e?t.setState(e):t.setState({times:0,position:0})}).fail(function(){t.setState({times:++t.state.times})}))}},{key:"onWatchedClick",value:function(e){this.state.times>0||this.state.position>0||this.onWatchedIncr(e)}},{key:"renderDropdown",value:function(){return r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu"},r.a.createElement("li",{onClick:this.onWatchedIncr},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("li",{onClick:this.onWatchedDecr},r.a.createElement("i",{className:"fas fa-minus"})))}},{key:"render",value:function(){var e=this.state.times>0||this.state.position>0,t=U()({btn:!0,"btn-watched":!0,watched:this.state.times>0,watching:this.state.position>0,"watching-watched":this.state.position>0&&this.state.times>0});return r.a.createElement("div",{className:"btn-group btn-episode-watched-group dropdown"},this.renderDropdown(),r.a.createElement("button",{className:t,"data-toggle":e?"dropdown":"none",onClick:this.onWatchedClick},"Watched"),r.a.createElement("button",{className:"btn btn-times"},this.state.times))}}])&&Tt(n.prototype,o),a&&Tt(n,a),t}();Mt.propTypes=Dt;var Lt=Mt;n(54);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wt={showId:q.a.number.isRequired,episode:q.a.object.isRequired,displaySeason:q.a.bool},Xt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Ut(t).call(this,e))||"object"!==qt(r)&&"function"!=typeof r?Ft(o):r).onPlayClick=n.playClick.bind(Ft(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,r.a.Component),n=t,(o=[{key:"playClick",value:function(e){ze.session&&"connected"==ze.session.status?(new ze).playEpisode(this.props.showId,this.props.episode.number).catch(function(e){console.log(e),alert("Error occurred trying to play the episode on your Chrome Cast")}):location.href=this.getPlayUrl()}},{key:"renderEpisodeNumber",value:function(){return this.props.episode.episode?r.a.createElement("span",null,this.props.displaySeason?"S".concat(this.props.episode.season," "):"","Episode ",this.props.episode.episode,"Â ",r.a.createElement("font",{color:"grey"},"(",this.props.episode.number,")")):r.a.createElement("span",null,"Episode ",this.props.episode.number)}},{key:"renderAirDate",value:function(){return this.props.episode.air_date?r.a.createElement("span",{className:"air-date",title:this.props.episode.air_date},this.props.episode.air_date):r.a.createElement("span",null,"Unknown air date.")}},{key:"getPlayUrl",value:function(){return"/show/".concat(this.props.showId,"/episode/").concat(this.props.episode.number,"/play")}},{key:"render",value:function(){return r.a.createElement("div",{className:"episode-box-list-item"},r.a.createElement("div",{className:"title",title:this.props.episode.title},this.props.episode.title?this.props.episode.title:"TBA"),r.a.createElement("div",{className:"meta"},this.renderEpisodeNumber(),r.a.createElement("strong",null," Â· "),this.renderAirDate()),r.a.createElement("div",{className:"button-bar"},r.a.createElement(Lt,{showId:this.props.showId,episodeNumber:this.props.episode.number,watched:this.props.episode.user_watched}),r.a.createElement("div",{className:"play-button float-right",onClick:this.onPlayClick},r.a.createElement("i",{className:"fas fa-play-circle"}))))}}])&&At(n.prototype,o),a&&At(n,a),t}();Xt.propTypes=Wt,Xt.defaultProps={displaySeason:!0};var Bt=Xt;function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kt={showId:q.a.number.isRequired},Qt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Yt(t).call(this,e))||"object"!==Gt(r)&&"function"!=typeof r?Jt(o):r).state={episode:null},n.eventGet=n.get.bind(Jt(n)),document.addEventListener($e,n.eventGet),document.addEventListener("visibilitychange",n.eventGet),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener($e,this.eventGet),document.removeEventListener("visibilitychange",this.eventGet)}},{key:"get",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.hidden||(y()?p("/1/shows/".concat(this.props.showId,"/episodes/to-watch")).done(function(t){e.setState({episode:t})}):p("/1/shows/".concat(this.props.showId,"/episodes/1")).done(function(t){e.setState({episode:t})}))}},{key:"render",value:function(){return null==this.state.episode?r.a.createElement("p",{className:"text-muted"},"No episodes to watch"):r.a.createElement(Bt,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0})}}])&&zt(n.prototype,o),a&&zt(n,a),t}();Qt.propTypes=Kt;var Zt=Qt,$t=n(27),en=n.n($t);n(55);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function on(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sn={showId:q.a.number.isRequired,numberOfEpisodes:q.a.number},ln=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=on(this,rn(t).call(this,e))).state={episodes:[]},n.getEpisodes(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderEpisodeNumber",value:function(e){return e.episode?r.a.createElement("span",null,"S",e.season," Â· E",e.episode,"Â  (",e.number,")"):r.a.createElement("span",null,"Episode ",e.number)}},{key:"getEpisodes",value:function(){var e=this,t=en.a.format((new Date).getTime(),"YYYY-MM-DD");p("/1/shows/".concat(this.props.showId,"/episodes"),{query:{q:"air_date:[".concat(t," TO *]"),per_page:this.props.numberOfEpisodes,sort:"number:asc"}}).done(function(t){e.setState({episodes:t})})}},{key:"renderCountdown",value:function(e){return e.air_datetime?new Date(e.air_datetime)-(new Date).getTime()>0?" Â· In "+O(e.air_datetime):" Â· "+O(e.air_datetime)+" ago":""}},{key:"render",value:function(){var e=this;return 0==this.state.episodes.length?r.a.createElement("p",{className:"text-muted"},"No ETA for new episodes."):r.a.createElement("div",{className:"latest-episodes-side-bar"},this.state.episodes.map(function(t,n){return r.a.createElement("div",{key:t.number,className:"item"},r.a.createElement("p",null,t.title),r.a.createElement("p",null,e.renderEpisodeNumber(t)),r.a.createElement("p",null,t.air_date," ",e.renderCountdown(t)))}))}}])&&nn(n.prototype,o),a&&nn(n,a),t}();ln.propTypes=sn,ln.defaultProps={numberOfEpisodes:3};var cn=ln;function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dn={showId:q.a.number.isRequired},yn=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=pn(t).call(this,e))||"object"!==un(r)&&"function"!=typeof r?mn(o):r).state={episode:null},n.eventGet=n.get.bind(mn(n)),document.addEventListener($e,n.eventGet),document.addEventListener("visibilitychange",n.eventGet),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.get()}},{key:"componentWillUnmount",value:function(){document.removeEventListener($e,this.eventGet),document.removeEventListener("visibilitychange",this.eventGet)}},{key:"get",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.hidden||y()&&p("/1/shows/".concat(this.props.showId,"/episodes/last-watched")).done(function(t){e.setState({episode:t})})}},{key:"render",value:function(){return this.state.episode?r.a.createElement(Bt,{key:this.state.episode.number,showId:this.props.showId,episode:this.state.episode,displaySeason:!0}):r.a.createElement("p",{className:"text-muted"},"No episodes has been watched")}}])&&fn(n.prototype,o),a&&fn(n,a),t}();yn.propTypes=dn;var bn=yn;function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}q.a.object.isRequired;var kn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wn(this,En(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," | SEPLIS")}},{key:"renderAirDates",value:function(){if(!(this.props.show.status>1))return r.a.createElement("div",{className:"col-12 col-lg-4 col-margin"},r.a.createElement("h4",{className:"header"},"Next to air"),r.a.createElement(cn,{showId:parseInt(this.props.show.id)}))}},{key:"renderNextToWatch",value:function(){return r.a.createElement("div",{className:"col-12 col-lg-8 col-margin"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-margin"},r.a.createElement("h4",{className:"header"},"To watch"),r.a.createElement(Zt,{showId:parseInt(this.props.show.id),numberOfEpisodes:2})),r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",{className:"header"},"Previous watched"),r.a.createElement(bn,{showId:parseInt(this.props.show.id)}))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},this.renderNextToWatch(),this.renderAirDates())}}])&&gn(n.prototype,o),a&&gn(n,a),t}();function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jn={seasons:q.a.array.isRequired,selectedNumber:q.a.number,onChange:q.a.func,name:q.a.string},Tn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cn(this,Pn(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderSeason",value:function(e){for(var t=[],n=e.from;n<=e.to;n++)t.push(r.a.createElement("option",{key:n,value:n},"S",e.season,": Episode ",n-e.from+1));return r.a.createElement("optgroup",{key:e.season,label:"Season ".concat(e.season)},t)}},{key:"render",value:function(){var e=this;return r.a.createElement("select",{name:this.props.name,className:"form-control",onChange:this.props.onChange,value:this.props.selectedNumber},this.props.seasons.map(function(t,n){return e.renderSeason(t)}))}}])&&On(n.prototype,o),a&&On(n,a),t}();Tn.propTypes=jn;var In=Tn;n(13),n(56);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn={showId:q.a.number.isRequired,seasons:q.a.array.isRequired},An=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Dn(t).call(this,e))||"object"!==xn(r)&&"function"!=typeof r?Mn(o):r).state={showForm:!1,fromNumber:1,toNumber:1,saving:!1},n.dropdownButtonClick=n.dropdownButtonClick.bind(Mn(n)),n.selectChange=n.selectChange.bind(Mn(n)),n.formSubmit=n.formSubmit.bind(Mn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(t,r.a.Component),n=t,(o=[{key:"selectChange",value:function(e){this.state[e.target.name]=parseInt(e.target.value),this.state.fromNumber>this.state.toNumber&&(this.state.toNumber=this.state.fromNumber),this.setState(this.state)}},{key:"dropdownButtonClick",value:function(e){this.getNextToWatch()}},{key:"getNextToWatch",value:function(){var e=this;p("/1/shows/".concat(this.props.showId,"/episodes/to-watch")).done(function(t){!1===e.state.showForm&&e.setState({showForm:!0}),e.setState({fromNumber:t.number,toNumber:t.number})}).fail(function(t){1301===t.responseJSON.code&&e.setState({showForm:!0})})}},{key:"formSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({saving:!0});var n=this.props.showId,o=this.state.fromNumber,r=this.state.toNumber;p("/1/shows/".concat(n,"/episodes/").concat(o,"-").concat(r,"/watched"),{method:"PUT"}).fail(function(){t.setState({saving:!1})}).done(function(){location.reload()})}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"From episode"),r.a.createElement(In,{seasons:this.props.seasons,name:"fromNumber",onChange:this.selectChange,selectedNumber:this.state.fromNumber})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"To episode"),r.a.createElement(In,{seasons:this.props.seasons,name:"toNumber",onChange:this.selectChange,selectedNumber:this.state.toNumber})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.saving},this.state.saving?"Please wait...":"Watched"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"dropdown watched-progression"},r.a.createElement("button",{className:"btn btn-dark btn-transparent dropdown-toggle","data-toggle":"dropdown",onClick:this.dropdownButtonClick},"Set progression"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},this.state.showForm?this.renderForm():""))}}])&&Rn(n.prototype,o),a&&Rn(n,a),t}();An.propTypes=qn;var Un=An;function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gn={seasons:q.a.array.isRequired,selectedSeason:q.a.number,onChange:q.a.func},zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,Xn(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){return r.a.createElement("select",{className:"form-control",value:this.props.selectedSeason,onChange:this.props.onChange},this.props.seasons.map(function(e,t){return r.a.createElement("option",{key:e.season,value:e.season},"Season ",e.season)}))}}])&&Hn(n.prototype,o),a&&Hn(n,a),t}();zn.propTypes=Gn;var Yn=zn;function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n={showId:q.a.number.isRequired,seasons:q.a.array.isRequired,seasonNumber:q.a.number.isRequired,onSeasonChange:q.a.func},eo=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Kn(t).call(this,e))||"object"!==Jn(r)&&"function"!=typeof r?Qn(o):r).state={episodes:[],seasonNumber:n.props.seasonNumber},n.onSeasonChange=n.onSeasonChange.bind(Qn(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getEpisodes()}},{key:"getEpisodes",value:function(){var e=this;if(!(this.props.seasons.length<1)){var t=u()(window).scrollTop();this.setState({episodes:[]});var n=this.seasonEpisodeNumbers(this.state.seasonNumber),o={};o.q="number:[".concat(n.from," TO ").concat(n.to,"]"),o.per_page=n.total,y()&&(o.append="user_watched"),p("/1/shows/".concat(this.props.showId,"/episodes"),{query:o}).done(function(n){e.setState({episodes:n},function(){u()(window).scrollTop(t)})})}}},{key:"seasonEpisodeNumbers",value:function(e){var t=!0,n=!1,o=void 0;try{for(var r,a=this.props.seasons[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;if(i.season==e)return i}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return null}},{key:"onSeasonChange",value:function(e){var t=this,n=parseInt(e.target.value);this.setState({seasonNumber:n},function(){t.props.onSeasonChange?t.props.onSeasonChange(n):t.getEpisodes()})}},{key:"render",value:function(){var e=this;return this.props.seasons.length<1?r.a.createElement("div",{className:"alert alert-warning"},r.a.createElement("strong",null,"This show has 0 episodes.")):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-auto ml-auto order-md-12 mb-2 mb-md-0"},r.a.createElement("div",{className:"float-right"},r.a.createElement(Un,{showId:this.props.showId,seasons:this.props.seasons}))),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(Yn,{seasons:this.props.seasons,selectedSeason:this.state.seasonNumber,onChange:this.onSeasonChange}))),r.a.createElement("div",{className:"row show-season-list"},r.a.createElement("div",{className:"col-12 d-md-none col-margin"}),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},this.state.episodes.map(function(t,n){return r.a.createElement("div",{key:t.number,className:"col-12 col-md-6 col-lg-4"},r.a.createElement("div",{className:"d-none d-md-block col-margin"}),r.a.createElement(Bt,{showId:e.props.showId,episode:t}))})))))}}])&&Vn(n.prototype,o),a&&Vn(n,a),t}();eo.propTypes=$n;var to=eo;function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var so=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=ro(t).call(this,e))||"object"!==no(r)&&"function"!=typeof r?ao(o):r).onSeasonChange=n.seasonChange.bind(ao(n)),n.state={season:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Seasons | SEPLIS"),this.setQuerySeason()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.setQuerySeason()}},{key:"setQuerySeason",value:function(){var e=this,t=h.a.parse(location.search),n=parseInt(t.season)||null;n?this.setSeason(n):(this.props.show.seasons.length>0&&(n=this.props.show.seasons[0].season),y()?p("/1/shows/".concat(this.props.show.id,"/episodes/to-watch")).done(function(t){e.setSeason(t?t.season:n)}).fail(function(){e.setSeason(n)}):this.setSeason(n))}},{key:"setSeason",value:function(e){document.title="".concat(this.props.show.title," - Season ").concat(e," | SEPLIS"),this.setState({season:e})}},{key:"seasonChange",value:function(e){this.setState({season:e}),this.props.history.push("".concat(this.props.location.pathname,"?season=").concat(e))}},{key:"render",value:function(){return this.state.season?r.a.createElement(to,{key:this.state.season,showId:this.props.show.id,seasons:this.props.show.seasons,seasonNumber:this.state.season,onSeasonChange:this.onSeasonChange}):null}}])&&oo(n.prototype,o),a&&oo(n,a),t}();function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function uo(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uo(this,fo(t).call(this,e))).state={userStats:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Stats | SEPLIS"),y()&&this.getUserStats()}},{key:"getUserStats",value:function(){var e=this;p("/1/shows/".concat(this.props.show.id,"/user-stats")).done(function(t){e.setState({userStats:t})})}},{key:"countEpisodes",value:function(){if(!this.props.show.seasons)return 0;var e=0,t=!0,n=!1,o=void 0;try{for(var r,a=this.props.show.seasons[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){e+=r.value.total}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return e}},{key:"renderUserStats",value:function(){return this.state.userStats?r.a.createElement("span",null,r.a.createElement("h2",{className:"mb-1 mt-3"},"Your stats"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"200px"},"Episodes watched"),r.a.createElement("td",null,this.state.userStats.episodes_watched)),r.a.createElement("tr",null,r.a.createElement("th",null,"Time spent watching"),r.a.createElement("td",null,C(60*this.state.userStats.episodes_watched_minutes,!0)))))):null}},{key:"render",value:function(){var e=this.countEpisodes();return r.a.createElement("span",null,this.renderUserStats(),r.a.createElement("h2",{className:"header"},"Show stats"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"200px"},"Total episodes"),r.a.createElement("td",null,e)),r.a.createElement("tr",null,r.a.createElement("th",null,"Total watchtime"),r.a.createElement("td",null,C(this.props.show.runtime*e*60,!0))))))}}])&&co(n.prototype,o),a&&co(n,a),t}();function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bo(e,t){return!t||"object"!==ho(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bo(this,vo(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Info | SEPLIS")}},{key:"statusToText",value:function(e){switch(e){case 1:return"Running";case 2:return"Ended";default:return"Unknown"}}},{key:"renderGeneral",value:function(){var e=this.props.show;return r.a.createElement("div",{className:"col-12"},r.a.createElement("table",{className:"table table-sm borderless"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Status"),r.a.createElement("td",null,this.statusToText(e.status))),r.a.createElement("tr",null,r.a.createElement("th",{width:"100"},"Premiered"),r.a.createElement("td",null,e.premiered||"unknown")),r.a.createElement("tr",null,r.a.createElement("th",null,"Runtime"),r.a.createElement("td",null,e.runtime?e.runtime+" minutes":"Unknown")),r.a.createElement("tr",null,r.a.createElement("th",null,"Genres"),r.a.createElement("td",null,e.genres.join(", "))),r.a.createElement("tr",null,r.a.createElement("th",null,"Language"),r.a.createElement("td",null,e.language?e.language:"Unknown")))))}},{key:"renderDescription",value:function(){var e=this.props.show.description;return r.a.createElement("div",{className:"col-12 col-md-12"},r.a.createElement("p",{className:"text-justify"},e.text,r.a.createElement("br",null),r.a.createElement("font",{className:"text-muted"},"Source:"),"Â ",r.a.createElement("a",{href:e.url,target:"_blank"},e.title)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},this.renderGeneral(),this.renderDescription())}}])&&yo(n.prototype,o),a&&yo(n,a),t}();n(57),n(58);function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ko(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Co={options:q.a.arrayOf(q.a.string)},Po=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ko(this,_o(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){u()("select#alternative-titles").select2({tags:!0})}},{key:"render",value:function(){return r.a.createElement("span",{style:{color:"#000000"}},r.a.createElement("select",{name:"alternative_titles",id:"alternative-titles",className:"form-control",defaultValue:this.props.options,multiple:!0},this.props.options.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}])&&So(n.prototype,o),a&&So(n,a),t}();Po.propTypes=Co,Po.defaultProps={options:[]};var No=Po;function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Do={show:q.a.object},Mo=[{key:"imdb",title:"IMDb",required:!0,importer_info:!1,importer_episodes:!1},{key:"tvmaze",title:"TVMaze",required:!1,importer_info:!0,importer_episodes:!0},{key:"thetvdb",title:"TheTVDB",required:!1,importer_info:!0,importer_episodes:!0}],Lo=["info","episodes"],qo=function(e){function t(e){var n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Io(t).call(this,e))||"object"!==jo(r)&&"function"!=typeof r?xo(o):r).onImporterSelected=n.importerSelected.bind(xo(n)),n.onInputChange=n.inputChanged.bind(xo(n));var a=e.show||{},i=a.externals||{},s=a.importers||{};n.state={"importers.info":s.info||"","importers.episodes":s.episodes||"",alternative_titles:a.alternative_titles?a.alternative_titles.slice():[],episode_type:a.episode_type||2};for(var l=0,c=Mo;l<c.length;l++){var u=c[l];n.state["externals.".concat(u.key)]=i[u.key]||""}return n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(t,r.a.Component),n=t,(o=[{key:"importerSelected",value:function(e){var t={};t[e.target.name]=e.target.value;for(var n=0,o=Lo;n<o.length;n++){var r=o[n];"importers.".concat(r)!=e.target.name&&(""===this.state["importers.".concat(r)]&&(t["importers.".concat(r)]=e.target.value))}this.setState(t)}},{key:"inputChanged",value:function(e){var t={},n=e.target.name,o=e.target.value;if(t[n]=o,this.setState(t),n.startsWith("externals.")&&""!=o){var r={};r[n.substring(n.indexOf(".")+1,n.length)]=o,this.lookupExternals(r)}}},{key:"lookupExternals",value:function(e){var t=this;p("/api/tvmaze-show-lookup",{localRequest:!0,query:e}).done(function(e){var n={"externals.tvmaze":e.id};for(var o in e.externals)"externals.".concat(o)in t.state&&(n["externals.".concat(o)]=e.externals[o]);t.setState(n)})}},{key:"renderImporter",value:function(e){for(var t=[],n=0,o=Mo;n<o.length;n++){var a=o[n];a["importer_"+e]&&t.push(a)}return r.a.createElement("fieldset",{className:"form-group",key:e},r.a.createElement("label",null,"Import ",e," from"),r.a.createElement("select",{name:"importers."+e,className:"form-control importers",onChange:this.onImporterSelected,value:this.state["importers.".concat(e)]},r.a.createElement("option",{value:""}),t.map(function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.title)})))}},{key:"renderExternals",value:function(){var e=this;return Mo.map(function(t){return r.a.createElement("fieldset",{key:t.key,className:"form-group"},r.a.createElement("label",null,t.title," ID ",t.required?r.a.createElement("b",null,"*"):""),r.a.createElement("input",{name:"externals.".concat(t.key),className:"form-control",required:t.required,value:e.state["externals.".concat(t.key)],onChange:e.onInputChange}),t.required?r.a.createElement("small",{className:"text-muted"}," Required to prevent show duplication."):"")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h3",null,"Externals"),this.renderExternals(),r.a.createElement("h3",null,"Importers"),Lo.map(function(t){return e.renderImporter(t)})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h3",null,"General"),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Alternative titles"),r.a.createElement(No,{options:this.state.alternative_titles})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Episode type"),r.a.createElement("select",{name:"episode_type",className:"form-control",defaultValue:this.state.episode_type},r.a.createElement("option",{value:"1"},"Absolute number"),r.a.createElement("option",{value:"2"},"Season episode"),r.a.createElement("option",{value:"3"},"Air date")))))}}])&&To(n.prototype,o),a&&To(n,a),t}();qo.propTypes=Do;var Ao=qo,Uo=n(14),Fo=n.n(Uo),Ho=n(15);function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yo={show:q.a.object},Jo=function(e){function t(e){var n,o,r,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=Bo(t).call(this,e),n=!r||"object"!==Wo(r)&&"function"!=typeof r?Go(o):r,a=Go(n),s=function(e){e.preventDefault(),confirm("Sure you want to delete this show?")&&(n.setState({deleting:!0}),p("/1/shows/".concat(n.props.show.id),{method:"DELETE"}).done(function(){location.href="/"}).fail(function(e){n.setState({error:e.responseJSON})}).always(function(){n.setState({deleting:!1})}))},(i="deleteClick")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.onSubmit=n.submit.bind(Go(n)),n.state={error:null,success:null,loading:!1,deleting:!1,deleteSuccess:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Edit | SEPLIS")}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0});var n=Object(Ho.unflatten)(Fo()(e.target,{hash:!0}));p("/1/shows/".concat(this.props.show.id),{data:n,method:"PUT"}).done(function(e){t.setState({success:e}),p("/1/shows/".concat(t.props.show.id,"/update"),{method:"POST"})}).fail(function(e){t.setState({error:e.responseJSON})}).always(function(){t.setState({loading:!1})})}},{key:"renderError",value:function(){if(this.state.error)return r.a.createElement("div",{className:"alert alert-danger"},this.state.error.message)}},{key:"renderSuccess",value:function(){if(this.state.success)return r.a.createElement("div",{className:"alert alert-success"},"The show was successfully updated.")}},{key:"renderDelete",value:function(){if(!(g()<3))return r.a.createElement("button",{className:"btn btn-warning mr-2",disabled:this.state.deleting,onClick:this.deleteClick},this.state.deleting?"Deleting...":"Delete")}},{key:"render",value:function(){return r.a.createElement("form",{method:"post",onSubmit:this.onSubmit},r.a.createElement(Ao,{show:this.props.show}),this.renderError(),this.renderSuccess(),this.renderDelete(),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Saving...":"Save"))}}])&&Xo(n.prototype,o),a&&Xo(n,a),t}();Jo.propTypes=Yo;var Vo=Jo;n(60);function Ko(e){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zo(e){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tr={jqXHR:q.a.object.isRequired,onPageChange:q.a.func},nr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Zo(t).call(this,e))||"object"!==Ko(r)&&"function"!=typeof r?$o(o):r).state=n.parseJqXHR(),n.onPageChange=n.pageChange.bind($o(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){this.setState(this.parseJqXHR(e.jqXHR))}},{key:"pageChange",value:function(e){this.state.page=e.target.value,null!=this.props.onPageChange&&this.props.onPageChange(e)}},{key:"parseJqXHR",value:function(e){return{pages:this.props.jqXHR.getResponseHeader("X-Total-Pages"),page:this.props.jqXHR.getResponseHeader("X-Page")}}},{key:"renderOptions",value:function(){for(var e=[],t=1;t<=this.state.pages;t++)e.push(r.a.createElement("option",{key:t,value:t},"Page ",t));return e}},{key:"render",value:function(){return this.state.pages<=1?null:r.a.createElement("select",{className:"form-control col-margin",onChange:this.onPageChange,value:this.state.page},this.renderOptions())}}])&&Qo(n.prototype,o),a&&Qo(n,a),t}();nr.propTypes=tr;var or=nr;function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ur=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=ir(t).call(this,e),n=!r||"object"!==rr(r)&&"function"!=typeof r?sr(o):r,cr(sr(n),"pageChange",function(e){n.setState({page:e.target.value,loading:!0},function(){n.setBrowserPath(),n.get()})}),cr(sr(n),"setDefault",function(e){e.preventDefault();var t=n.props.show;p("/1/shows/".concat(t.id),{data:{poster_image_id:e.target.getAttribute("image-id")},method:"PATCH"}).done(function(){location.reload()}).fail(function(e){alert(e.message)})}),n.state={images:null,loading:!0,jqXHR:null,page:j().page||1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="".concat(this.props.show.title," - Images | SEPLIS"),this.get()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1,loading:!0},function(){t.get()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"get",value:function(){var e=this,t=this.props.show;p("/1/shows/".concat(t.id,"/images"),{query:{page:this.state.page,per_page:8}}).done(function(t,n,o){e.setState({images:t,jqXHR:o,loading:!1})})}},{key:"renderSetDefault",value:function(e){if(!(g()<2)){var t=this.props.show.poster_image;return t&&t.hash==e.hash?r.a.createElement("div",{className:"black-box"},"Is Default"):r.a.createElement("div",{className:"black-box"},r.a.createElement("a",{href:"#","image-id":e.id,onClick:this.setDefault},"Set as Default"))}}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(Ce,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-wrap"},this.state.images.map(function(t){return r.a.createElement("div",{key:t.hash,className:"mr-3 mb-3",style:{width:"170px"}},r.a.createElement("a",{href:t.url+"@.jpg",target:"_blank"},r.a.createElement("img",{title:e.props.show.title,alt:e.props.show.title,src:t.url+"@SX180",className:"img-fluid"})),e.renderSetDefault(t))})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.pageChange}))))}}])&&ar(n.prototype,o),a&&ar(n,a),t}();n(68);function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function mr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hr(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var br=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hr(this,dr(t).call(this,e))).state={show:document.seplis_tv_show},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderShow",value:function(){var e=this,t=this.state.show;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 show-header"},r.a.createElement("div",{className:"btn-fan__pull-left"},r.a.createElement(wt,{showId:t.id})),r.a.createElement("div",{className:"title"},t.title,"Â ",r.a.createElement("small",{className:"text-muted"},null!=t.premiered?t.premiered.substring(0,4):""))),r.a.createElement("div",{className:"col-4 col-sm-4 col-md-4 col-margin d-none d-sm-block"},r.a.createElement("img",{src:null!=t.poster_image?t.poster_image.url+"@SX360":"",width:"100%"})),r.a.createElement("div",{className:"col-4 d-sm-none"}),r.a.createElement("div",{className:"col-12 col-sm-8"},r.a.createElement(Nt,{showId:parseInt(this.state.show.id)}),r.a.createElement(l.a,{exact:!0,path:"/show/:showId",render:function(t){return r.a.createElement(kn,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/main",render:function(t){return r.a.createElement(kn,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/info",render:function(t){return r.a.createElement(wo,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/seasons",render:function(t){return r.a.createElement(so,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/images",render:function(t){return r.a.createElement(ur,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/stats",render:function(t){return r.a.createElement(mo,pr({},t,{show:e.state.show}))}}),r.a.createElement(l.a,{path:"/show/:showId/edit",render:function(t){return r.a.createElement(Vo,pr({},t,{show:e.state.show}))}}))))}},{key:"renderShowImporting",value:function(){return setTimeout(function(){location.reload()},5e3),r.a.createElement("center",null,r.a.createElement("h1",null,"The show is currently in the import queue"),r.a.createElement("h2",null,"Check back later!"),r.a.createElement(s.b,{className:"btn btn-warning",to:"/show/".concat(this.state.show.id,"/edit")},"Edit show"),r.a.createElement(Ce,null))}},{key:"render",value:function(){return this.state.show?0!=this.state.show.status||this.props.location.pathname.endsWith("/edit")||null==this.state.show.importers.info?this.renderShow():this.renderShowImporting():r.a.createElement(Ce,null)}}])&&mr(n.prototype,o),a&&mr(n,a),t}();function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=wr(t).call(this,e))||"object"!==vr(r)&&"function"!=typeof r?Er(o):r).onSubmit=n.submit.bind(Er(n)),n.state={success:null,error:null,loading:!1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="New Show | SEPLIS"}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({success:null,error:null,loading:!0}),p("/1/shows",{data:Object(Ho.unflatten)(Fo()(e.target,{hash:!0})),method:"POST"}).done(function(e){t.setState({success:e})}).fail(function(e){t.setState({error:e.responseJSON})}).always(function(){t.setState({loading:!1})})}},{key:"renderError",value:function(){if(!this.state.error)return"";switch(this.state.error.code){case 1403:var e=this.state.error.extra.show.title||"the show";return r.a.createElement("div",{className:"alert alert-danger"},this.state.error.message,".",r.a.createElement("br",null),r.a.createElement("a",{href:"/show/".concat(this.state.error.extra.show.id)},"Go to ",e),".");default:return r.a.createElement("div",{className:"alert alert-danger"},this.state.error.message)}}},{key:"renderSuccess",value:function(){return r.a.createElement("span",null,r.a.createElement("h1",null,"Show successfully created"),r.a.createElement("div",{className:"alert alert-success"},"The show has been created. It will be imported shortly.",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/show/".concat(this.state.success.id)},"Go to the show")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/show-new"},"Create another show")))))}},{key:"render",value:function(){return null!=this.state.success?this.renderSuccess():r.a.createElement("form",{method:"post",onSubmit:this.onSubmit},r.a.createElement("h1",null,"New show"),r.a.createElement(Ao,null),this.renderError(),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.loading},this.state.loading?"Creating...":"Create"))}}])&&gr(n.prototype,o),a&&gr(n,a),t}();n(22);function _r(e){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cr(e,t){return!t||"object"!==_r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pr(e){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e,t){return(Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jr={shows:q.a.array.isRequired,mobile_xscroll:q.a.bool},Tr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cr(this,Pr(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(t,r.a.Component),n=t,(o=[{key:"renderShow",value:function(e){return r.a.createElement("div",{key:e.id,className:"col-4 col-sm-4 col-md-3 col-lg-2 col-margin"},r.a.createElement("a",{href:"/show/".concat(e.id)},r.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})))}},{key:"render",value:function(){var e=this,t=U()({row:!0,slider:this.props.mobile_xscroll});return r.a.createElement("div",{className:t},this.props.shows.map(function(t){return e.renderShow(t)}))}}])&&Or(n.prototype,o),a&&Or(n,a),t}();Tr.propTypes=jr,Tr.defaultProps={mobile_xscroll:!1};var Ir=Tr;function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e,t){return(Lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=Dr(t).call(this,e))||"object"!==xr(r)&&"function"!=typeof r?Mr(o):r,b(),n.onPageChange=n.pageChange.bind(Mr(n)),n.state={loading:!0,items:[],jqXHR:null,page:j().page||1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1},function(){t.getShows()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getShows()})}},{key:"componentDidMount",value:function(){document.title="Fan of | SEPLIS",this.getShows()}},{key:"getShows",value:function(){var e=this,t=v();this.setState({loading:!0}),p("/1/users/".concat(t,"/fan-of"),{query:{page:this.state.page,per_page:60}}).done(function(t,n,o){e.setState({shows:t,loading:!1,jqXHR:o,totalCount:o.getResponseHeader("X-Total-Count")})})}},{key:"render",value:function(){return 1==this.state.loading?r.a.createElement("span",null,r.a.createElement("h2",null,"Fan of ",this.state.totalCount," shows"),r.a.createElement(Ce,null)):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},r.a.createElement("h2",null,"Fan of ",this.state.totalCount," shows")),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),r.a.createElement(Ir,{shows:this.state.shows}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&Rr(n.prototype,o),a&&Rr(n,a),t}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xr={perPage:q.a.number,page:q.a.number,items:q.a.array},Br=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fr(this,Hr(t).call(this))).state={items:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;zr(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return r.a.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},r.a.createElement("a",{href:"/show/".concat(t.id)},r.a.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})),r.a.createElement("div",{className:"black-box"},E(t,n)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?r.a.createElement("div",{className:"alert alert-info"},"No recently aired episodes from shows you are a fan of."):r.a.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderItem(t)}))}}])&&Ur(n.prototype,o),a&&Ur(n,a),t}();Br.propTypes=Xr,Br.defaultProps={perPage:6,page:1,items:null};var Gr=Br;function zr(e,t){return new Promise(function(n,o){p("/1/users/".concat(v(),"/shows-recently-aired"),{query:{per_page:e,page:t}}).done(function(e,t,o){n({items:e,jqXHR:o})}).fail(function(e){o(e)})})}function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=Vr(t).call(this,e))||"object"!==Yr(r)&&"function"!=typeof r?Kr(o):r,b(),n.onPageChange=n.pageChange.bind(Kr(n)),n.state={loading:!0,items:[],jqXHR:null,page:j().page||1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1,loading:!0},function(){t.getItems()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){document.title="Recently Aired | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;zr(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?r.a.createElement("span",null,r.a.createElement("h2",null,"Recently aired"),r.a.createElement(Ce,null)):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},r.a.createElement("h2",null,"Recently aired")),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),r.a.createElement(Gr,{items:this.state.items}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&Jr(n.prototype,o),a&&Jr(n,a),t}();function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ta(e,t){return!t||"object"!==$r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ra={perPage:q.a.number,page:q.a.number,items:q.a.array},aa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ta(this,na(t).call(this))).state={shows:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.items?this.setState({shows:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;sa(this.props.perPage,this.props.page).then(function(t){e.setState({shows:t.items})})}},{key:"renderShow",value:function(e,t){return r.a.createElement("div",{key:e.id,className:"col-4 col-md-3 col-lg-2 col-margin"},r.a.createElement("a",{href:"/show/".concat(e.id)},r.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})),r.a.createElement("div",{className:"black-box"},E(e,t)))}},{key:"render",value:function(){var e=this;return 0==this.state.shows.length?r.a.createElement("div",{className:"alert alert-info"},"You have not watched any shows yet!"):r.a.createElement("div",{className:"row"},this.state.shows.map(function(t){return e.renderShow(t,t.user_watching.episode)}))}}])&&ea(n.prototype,o),a&&ea(n,a),t}();aa.propTypes=ra,aa.defaultProps={perPage:6,page:1,items:null};var ia=aa;function sa(e,t){return new Promise(function(n,o){p("/1/users/".concat(v(),"/shows-watched"),{query:{per_page:e,page:t}}).done(function(e,t,o){n({items:e,jqXHR:o})}).fail(function(e){o(e)})})}function la(e){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ma=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=ua(t).call(this,e))||"object"!==la(r)&&"function"!=typeof r?fa(o):r,b(),n.onPageChange=n.pageChange.bind(fa(n)),n.state={loading:!0,items:[],jqXHR:null,page:j().page||1,totalCount:"..."},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1,loading:!0},function(){t.getItems()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){document.title="Shows Watched | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;sa(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1,totalCount:t.jqXHR.getResponseHeader("X-Total-Count")})})}},{key:"render",value:function(){return 1==this.state.loading?r.a.createElement("span",null,r.a.createElement("h2",null,"Watched ",this.state.totalCount," shows"),r.a.createElement(Ce,null)):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},r.a.createElement("h2",null,"Watched ",this.state.totalCount," shows")),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),r.a.createElement(ia,{items:this.state.items}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&ca(n.prototype,o),a&&ca(n,a),t}();function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ya(e,t){return!t||"object"!==ha(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ga={perPage:q.a.number,page:q.a.number,items:q.a.array},wa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ya(this,ba(t).call(this))).state={items:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;Sa(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderShow",value:function(e,t){return r.a.createElement("div",{key:e.id,className:"col-4 col-md-3 col-lg-2 col-margin"},r.a.createElement("div",{className:"black-box"},"In ",O(t.air_datetime)),r.a.createElement("a",{href:"/show/".concat(e.id)},r.a.createElement("img",{title:e.title,alt:e.title,src:null!=e.poster_image?e.poster_image.url+"@SX180":"",className:"img-fluid"})),r.a.createElement("div",{className:"black-box"},E(e,t)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?r.a.createElement("div",{className:"alert alert-info"},"None of the shows you follow have episodes airing! :("):r.a.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderShow(t.show,t.episode)}))}}])&&da(n.prototype,o),a&&da(n,a),t}();wa.propTypes=ga,wa.defaultProps={perPage:6,page:1,items:null};var Ea=wa;function Sa(e,t){return new Promise(function(n,o){p("/1/users/".concat(v(),"/shows-countdown"),{query:{per_page:e,page:t}}).done(function(e,t,o){n({items:e,jqXHR:o})}).fail(function(e){o(e)})})}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pa(e,t){return(Pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Na=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=Oa(t).call(this,e))||"object"!==ka(r)&&"function"!=typeof r?Ca(o):r,b(),n.onPageChange=n.pageChange.bind(Ca(n)),n.state={loading:!0,items:[],jqXHR:null,page:j().page||1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pa(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1,loading:!0},function(){t.getItems()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){document.title="Countdown | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;Sa(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?r.a.createElement("span",null,r.a.createElement("h2",null,"Countdown"),r.a.createElement(Ce,null)):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},r.a.createElement("h2",null,"Countdown")),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),r.a.createElement(Ea,{items:this.state.items}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&_a(n.prototype,o),a&&_a(n,a),t}();function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ta(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ia(e,t){return!t||"object"!==ja(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Da={perPage:q.a.number,page:q.a.number,items:q.a.array},Ma=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ia(this,xa(t).call(this))).state={items:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.items?this.setState({items:this.props.items}):this.getData()}},{key:"getData",value:function(){var e=this;qa(this.props.perPage,this.props.page).then(function(t){e.setState({items:t.items})})}},{key:"renderItem",value:function(e){var t=e.show,n=e.episode;return r.a.createElement("div",{key:t.id,className:"col-4 col-md-3 col-lg-2 col-margin"},r.a.createElement("a",{href:"/show/".concat(t.id)},r.a.createElement("img",{title:t.title,alt:t.title,src:null!=t.poster_image?t.poster_image.url+"@SX180":"",className:"img-fluid"})),r.a.createElement("div",{className:"black-box"},E(t,n)))}},{key:"render",value:function(){var e=this;return 0==this.state.items.length?r.a.createElement("div",{className:"alert alert-info"},"You have zero episodes to watch! :("):r.a.createElement("div",{className:"row"},this.state.items.map(function(t){return e.renderItem(t)}))}}])&&Ta(n.prototype,o),a&&Ta(n,a),t}();Ma.propTypes=Da,Ma.defaultProps={perPage:6,page:1,items:null};var La=Ma;function qa(e,t){return new Promise(function(n,o){p("/1/users/".concat(v(),"/shows-etw"),{query:{per_page:e,page:t}}).done(function(e,t,o){n({items:e,jqXHR:o})}).fail(function(e){o(e)})})}function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xa=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=Fa(t).call(this,e))||"object"!==Aa(r)&&"function"!=typeof r?Ha(o):r,b(),n.onPageChange=n.pageChange.bind(Ha(n)),n.state={loading:!0,items:[],jqXHR:null,page:j().page||1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.location!==e.location&&this.setState({page:j().page||1,loading:!0},function(){t.getItems()})}},{key:"setBrowserPath",value:function(){this.props.history.push("".concat(this.props.location.pathname,"?page=").concat(this.state.page))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e.target.value,loading:!0},function(){t.setBrowserPath(),t.getItems()})}},{key:"componentDidMount",value:function(){document.title="Episodes to Watch | SEPLIS",this.getItems()}},{key:"getItems",value:function(){var e=this;qa(60,this.state.page).then(function(t){e.setState({items:t.items,jqXHR:t.jqXHR,loading:!1})})}},{key:"render",value:function(){return 1==this.state.loading?r.a.createElement("span",null,r.a.createElement("h2",null,"Episodes to Watch"),r.a.createElement(Ce,null)):r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-10"},r.a.createElement("h2",null,"Episodes to Watch")),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))),r.a.createElement(La,{items:this.state.items}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-10"}),r.a.createElement("div",{className:"col-sm-3 col-md-2"},r.a.createElement(or,{jqXHR:this.state.jqXHR,onPageChange:this.onPageChange}))))}}])&&Ua(n.prototype,o),a&&Ua(n,a),t}();function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Va=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=za(t).call(this,e))||"object"!==Ba(r)&&"function"!=typeof r?Ya(o):r,b(),n.visChange=n.visibilitychange.bind(Ya(n)),document.addEventListener("visibilitychange",n.visChange),n.state={key:0,loading:!0,failed:!1},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="SEPLIS",this.getData()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",this.visChange)}},{key:"getData",value:function(){var e=this;this.setState({loading:!0,failed:!1}),Promise.all([sa(6,1),Sa(6,1),zr(6,1),qa(6,1)]).then(function(t){e.setState({loading:!1,failed:!1,watched:t[0].items,countdown:t[1].items,recentlyWatched:t[2].items,episodesToWatch:t[3].items})}).catch(function(){e.setState({loading:!1,failed:!0,key:e.state.key+1})})}},{key:"visibilitychange",value:function(){document.hidden||this.getData()}},{key:"render",value:function(){return this.state.failed?r.a.createElement("div",{className:"alert alert-warning"},"Failed to load, try refreshing."):this.state.loading?r.a.createElement(Ce,null):r.a.createElement("span",null,r.a.createElement("h2",{className:"header header-border"},r.a.createElement(s.b,{to:"/shows-watched"},"Recently watched")),r.a.createElement("div",{className:"slider mb-2"},r.a.createElement(ia,{key:"sw-".concat(this.state.key),items:this.state.watched})),r.a.createElement("h2",{className:"header header-border"},r.a.createElement(s.b,{to:"/recently-aired"},"Recently Aired")),r.a.createElement("div",{className:"slider mb-2"},r.a.createElement(Gr,{key:"sra-".concat(this.state.key),items:this.state.recentlyWatched})),r.a.createElement("h2",{className:"header header-border"},r.a.createElement(s.b,{to:"/countdown"},"Countdown")),r.a.createElement("div",{className:"slider mb-2"},r.a.createElement(Ea,{key:"sc-".concat(this.state.key),items:this.state.countdown})),r.a.createElement("h2",{className:"header header-border"},r.a.createElement(s.b,{to:"/episodes-to-watch"},"Episodes To Watch")),r.a.createElement("div",{className:"slider mb-2"},r.a.createElement(La,{key:"etw-".concat(this.state.key),items:this.state.episodesToWatch})))}}])&&Ga(n.prototype,o),a&&Ga(n,a),t}();function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Za(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ti=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ni=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Za(this,$a(t).call(this))).state={loading:!0,data:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;p("/1/users/".concat(v(),"/air-dates")).done(function(t){e.setState({loading:!1,data:t})})}},{key:"renderWeekday",value:function(e){var t=new Date(e);return ti[t.getDay()]}},{key:"renderHeaderDate",value:function(e){var t=Date.parse(e),n=Date.now();switch(Math.round(Math.ceil((t-n)/864e5))){case-1:return r.a.createElement("span",null,"Yesterday ",r.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 0:return r.a.createElement("span",null,"Today ",r.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));case 1:return r.a.createElement("span",null,"Tomorrow ",r.a.createElement("small",{className:"text-muted"},this.renderWeekday(e)));default:return this.renderWeekday(e)}}},{key:"renderMain",value:function(){var e=this;return 0==this.state.data.length?r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h1",null,"There's nothing to watch this week!"),"But, how can this be?",r.a.createElement("br",null),"Well, you're properly not a fan of any shows that has episodes airing this week."):r.a.createElement("span",null,this.state.data.map(function(t){return r.a.createElement("span",{key:t.air_date},r.a.createElement("h3",{className:"header header-border",title:t.air_date},e.renderHeaderDate(t.air_date)),r.a.createElement(Ir,{shows:t.shows}))}))}},{key:"render",value:function(){return this.state.loading?r.a.createElement(Ce,null):this.renderMain()}}])&&Qa(n.prototype,o),a&&Qa(n,a),t}();function oi(e){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ai(e,t){return!t||"object"!==oi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var li=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ai(this,ii(t).call(this,e)),b(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Air Dates | SEPLIS"}},{key:"render",value:function(){return r.a.createElement(ni,null)}}])&&ri(n.prototype,o),a&&ri(n,a),t}();function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fi(e,t){return!t||"object"!==ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=fi(this,pi(t).call(this,e)),b(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Account Settings | SEPLIS"}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Account")),r.a.createElement("div",{className:"col-12"},r.a.createElement(s.b,{to:"/password"},"Change password")))}}])&&ui(n.prototype,o),a&&ui(n,a),t}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gi(e,t){return(gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wi=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=bi(t).call(this,e))||"object"!==di(r)&&"function"!=typeof r?vi(o):r,b(),n.state={error:null,success:null,loading:!1},n.onSubmit=n.onSubmit.bind(vi(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gi(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Change Password | SEPLIS"}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null,success:null,loading:!0}),p("/1/users/current/change-password",{data:{password:this.password.value,new_password:this.newPassword.value}}).fail(function(e){t.password.focus(),t.setState({error:e.responseJSON,loading:!1})}).done(function(){t.setState({success:!0,loading:!1})}).always(function(){t.password.value="",t.newPassword.value=""})}},{key:"renderError",value:function(){if(this.state.error)return r.a.createElement("div",{className:"alert alert-warning capitalize-first-letter"},r.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,o=void 0;try{for(var a,i=this.state.error.errors[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;if(s.field==e)return r.a.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}}}},{key:"renderSuccess",value:function(){if(this.state.success)return r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("strong",null,"Your password was successfully changed."))}},{key:"renderButton",value:function(){return 0==this.state.loading?r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"):1==this.state.loading?r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!0},"Changing your password..."):void 0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"col-margin"},"Change password")),r.a.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderSuccess(),this.renderError(),r.a.createElement("form",{method:"post",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Current password"),this.renderFieldError("password"),r.a.createElement("input",{ref:function(t){return e.password=t},type:"password",name:"password",className:"form-control dark-form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"New password"),this.renderFieldError("new_password"),r.a.createElement("input",{ref:function(t){return e.newPassword=t},type:"password",name:"new_password",className:"form-control dark-form-control"})),this.renderButton())))}}])&&yi(n.prototype,o),a&&yi(n,a),t}();function Ei(e){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Si(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ki(e,t){return!t||"object"!==Ei(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ci=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ki(this,_i(t).call(this,e)),b(),n.state={loading:!0,playServers:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Play Servers | SEPLIS",this.getPlayServers()}},{key:"getPlayServers",value:function(){var e=this;this.setState({loading:!0}),p("/1/play-servers",{body:{per_page:100}}).done(function(t){e.setState({playServers:t,loading:!1})})}},{key:"renderPlayServers",value:function(){return 0==this.state.playServers.length?r.a.createElement("div",{className:"alert alert-info"},"You have no play servers."):r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,this.state.playServers.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.url),r.a.createElement("td",{width:"10px"},r.a.createElement(s.b,{to:"/play-server/".concat(e.id)},r.a.createElement("i",{className:"fas fa-pen-square"}))))})))}},{key:"render2",value:function(){return this.state.loading?r.a.createElement(Ce,null):r.a.createElement("div",{className:"col-12 col-sm-7 col-md-5"},r.a.createElement(s.b,{to:"/new-play-server",className:"btn btn-success col-margin"},"New play server"),this.renderPlayServers())}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"col-margin"},"Play servers")),this.render2())}}])&&Si(n.prototype,o),a&&Si(n,a),t}();function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xi={location:q.a.object.isRequired},Ri=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=ji(t).call(this,e))||"object"!==Pi(r)&&"function"!=typeof r?Ti(o):r,b(),n.onSubmit=n.onSubmit.bind(Ti(n)),n.onDelete=n.onDelete.bind(Ti(n)),n.onGiveAccess=n.onGiveAccess.bind(Ti(n)),n.onRemoveUserAccess=n.onRemoveUserAccess.bind(Ti(n)),n.state={loading:0,error:null,success:!1,playServer:{name:"",url:"",secret:""},users:[],redirect:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Play Server | SEPLIS",this.props.match.params.serverId&&(this.getPlayServer(),this.getUsersWithAccess())}},{key:"incLoading",value:function(e){this.setState(function(t){return{loading:t.loading+e}})}},{key:"getPlayServer",value:function(){var e=this;this.incLoading(1),p("/1/play-servers/".concat(this.props.match.params.serverId)).fail(function(e){}).done(function(t){e.setState({playServer:t}),document.title="Play Server: ".concat(t.name," | SEPLIS")}).always(function(){e.incLoading(-1)})}},{key:"getUsersWithAccess",value:function(){var e=this;this.incLoading(1),p("/1/play-servers/".concat(this.props.match.params.serverId,"/users")).fail(function(e){}).done(function(t){e.setState({users:t})}).always(function(){e.incLoading(-1)})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n="/1/play-servers";this.props.match.params.serverId&&(n+="/".concat(this.props.match.params.serverId)),p(n,{method:this.props.match.params.serverId?"PUT":"POST",data:{name:this.name.value,url:this.url.value,secret:this.secret.value}}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(e){t.setState({playServer:e,error:null}),t.props.history.push("/play-server/".concat(e.id))})}},{key:"onDelete",value:function(e){var t=this;e.preventDefault(),confirm("Are you sure you wan't to delete this play server?")&&p("/1/play-servers/".concat(this.props.match.params.serverId),{method:"DELETE"}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(){t.props.history.push("/play-servers")})}},{key:"onGiveAccess",value:function(e){var t=this;e.preventDefault();var n=e.target.name.value;p("/1/users",{query:{username:n}}).fail(function(e){alert(e.message)}).done(function(e){if(1==e.length){var o=t.props.match.params.serverId;p("/1/play-servers/".concat(o,"/users/").concat(e[0].id),{method:"PUT"}).fail(function(e){alert(e.message)}).done(function(){t.getUsersWithAccess()})}else alert("Unknown user: ".concat(n))})}},{key:"onRemoveUserAccess",value:function(e){var t=this;e.preventDefault();var n=this.props.match.params.serverId;p("/1/play-servers/".concat(n,"/users/").concat(e.target.userId.value),{method:"DELETE"}).fail(function(e){alert(e.message)}).done(function(){t.getUsersWithAccess()})}},{key:"renderUsers",value:function(){var e=this;return 0==this.state.users.length?r.a.createElement("div",{className:"alert alert-info"},"No one has access to this play server."):r.a.createElement("table",{className:"table table-sm"},r.a.createElement("tbody",null,this.state.users.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:{verticalAlign:"middle"}},t.name),r.a.createElement("td",{width:"10px",className:"text-xs-right"},r.a.createElement("form",{onSubmit:e.onRemoveUserAccess},r.a.createElement("input",{type:"hidden",name:"userId",value:t.id}),r.a.createElement("button",{type:"submit",className:"btn btn-danger",title:"Delete user"},r.a.createElement("i",{className:"fas fa-times"})))))})))}},{key:"renderGiveAccessForm",value:function(){return r.a.createElement("form",{className:"col-margin row",onSubmit:this.onGiveAccess},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{type:"text",name:"name",className:"form-control dark-form-control",placeholder:"Username"})),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{className:"btn btn-success"},"Give access")))}},{key:"renderUsersWithAccess",value:function(){if(this.props.match.params.serverId)return r.a.createElement("span",null,r.a.createElement("h2",{className:"col-margin"},"Users with access"),this.renderGiveAccessForm(),this.renderUsers())}},{key:"renderDeleteButton",value:function(){if(this.props.match.params.serverId)return r.a.createElement("button",{className:"btn btn-danger",onClick:this.onDelete},"Delete")}},{key:"renderError",value:function(){if(this.state.error)return r.a.createElement("div",{className:"alert alert-warning capitalize-first-letter col-margin"},r.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,o=void 0;try{for(var a,i=this.state.error.errors[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;if(s.field==e)return r.a.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}}}},{key:"render2",value:function(){var e=this;return this.state.loading>0?r.a.createElement(Ce,null):r.a.createElement("div",{className:"col-12 col-sm-8 col-md-6"},this.renderError(),r.a.createElement("form",{method:"post",className:"col-margin",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),this.renderFieldError("name"),r.a.createElement("input",{ref:function(t){return e.name=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.name,placeholder:"My play server"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"URL"),this.renderFieldError("url"),r.a.createElement("input",{ref:function(t){return e.url=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.url,placeholder:"https://example.net"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Secret"),this.renderFieldError("secret"),r.a.createElement("input",{ref:function(t){return e.secret=t},type:"text",className:"form-control dark-form-control",defaultValue:this.state.playServer.secret,placeholder:"A super long secret"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary m-r-1"},"Save"),this.renderDeleteButton()),this.renderUsersWithAccess())}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"col-margin"},"Play server")),this.render2())}}])&&Ni(n.prototype,o),a&&Ni(n,a),t}();Ri.propTypes=xi;var Di=Ri;function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qi(e,t){return!t||"object"!==Mi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ai(e){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ui(e,t){return(Ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=qi(this,Ai(t).call(this,e)),b(),n.state={loading:!0,stats:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ui(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="User Stats | SEPLIS",this.getStats()}},{key:"getStats",value:function(){var e=this,t=v();p("/1/users/".concat(t,"/show-stats")).done(function(t){e.setState({loading:!1,stats:t})})}},{key:"render",value:function(){return this.state.loading?r.a.createElement("span",null,r.a.createElement(Ce,null),r.a.createElement("center",null,r.a.createElement("h2",null,"Loading your stats"))):r.a.createElement("span",null,r.a.createElement("h2",null,"Your TV show stats"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"220px"},"Fan of"),r.a.createElement("td",null,this.state.stats.fan_of," shows")),r.a.createElement("tr",null,r.a.createElement("th",null,"Time spent watching"),r.a.createElement("td",null,C(60*this.state.stats.episodes_watched_minutes,!0))),r.a.createElement("tr",null,r.a.createElement("th",null,"Episodes watched"),r.a.createElement("td",null,this.state.stats.episodes_watched)),r.a.createElement("tr",null,r.a.createElement("th",null,"Watched episodes from"),r.a.createElement("td",null,this.state.stats.shows_watched," shows")),r.a.createElement("tr",null,r.a.createElement("th",null,"Shows finished"),r.a.createElement("td",null,this.state.stats.shows_finished)))))}}])&&Li(n.prototype,o),a&&Li(n,a),t}();function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xi(this,Bi(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt,null),r.a.createElement("div",{className:"container"},r.a.createElement(l.a,{path:"/show/:showId",component:br}),r.a.createElement(l.a,{path:"/show-new",component:kr}),r.a.createElement(l.a,{path:"/fan-of",component:qr}),r.a.createElement(l.a,{path:"/recently-aired",component:Zr}),r.a.createElement(l.a,{path:"/shows-watched",component:ma}),r.a.createElement(l.a,{path:"/countdown",component:Na}),r.a.createElement(l.a,{path:"/episodes-to-watch",component:Xa}),r.a.createElement(l.a,{path:"/",exact:!0,component:Va}),r.a.createElement(l.a,{path:"/main",component:Va}),r.a.createElement(l.a,{path:"/air-dates",component:li}),r.a.createElement(l.a,{path:"/account",component:hi}),r.a.createElement(l.a,{path:"/password",component:wi}),r.a.createElement(l.a,{path:"/play-servers",component:Ci}),r.a.createElement(l.a,{path:"/new-play-server",component:Di}),r.a.createElement(l.a,{path:"/play-server/:serverId",component:Di}),r.a.createElement(l.a,{path:"/user-shows-stats",component:Fi})))}}])&&Wi(n.prototype,o),a&&Wi(n,a),t}();n(23);function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qi(e,t){return(Qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zi=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Vi(t).call(this,e))||"object"!==Yi(r)&&"function"!=typeof r?Ki(o):r).state={error:"",email:"",password:""},n.onSignIn=n.onSignIn.bind(Ki(n)),n.onDataChange=n.onDataChange.bind(Ki(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qi(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Sign In | SEPLIS"}},{key:"onSignIn",value:function(e){var t=this;e.preventDefault(),p("/1/token",{data:{client_id:seplisClientId,grant_type:"password",email:this.state.email,password:this.state.password}}).fail(function(e){t.setState({error:e.responseJSON.message,password:""})}).done(function(e){localStorage.setItem("access_token",e.access_token),t.saveUserIdAndRedirect()})}},{key:"saveUserIdAndRedirect",value:function(){p("/1/users/current").done(function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),location.href="/"})}},{key:"onDataChange",value:function(e){this.state[e.target.name]=e.target.value,this.setState({error:""})}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.onSignIn},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"Email or username",onChange:this.onDataChange,value:this.state.email,autoFocus:!0,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Password",onChange:this.onDataChange,value:this.state.password,required:!0})),r.a.createElement("div",{className:"d-flex"},r.a.createElement(s.b,{className:"btn",style:{paddingLeft:0},to:"/create-user"},"Create user"),r.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Sign in")),r.a.createElement("div",null,r.a.createElement(s.b,{className:"btn",style:{paddingLeft:0,fontSize:"16px"},to:"/reset-password"},"Reset password")))}},{key:"renderError",value:function(){if(this.state.error)return r.a.createElement("div",{className:"alert alert-warning capitalize-first-letter",role:"alert"},r.a.createElement("strong",null,this.state.error))}},{key:"render",value:function(){return r.a.createElement("div",{className:"standard-form"},r.a.createElement("div",{className:"logo"},"SEPLIS"),r.a.createElement("div",{className:"title"},"Sign in"),this.renderError(),this.renderForm())}}])&&Ji(n.prototype,o),a&&Ji(n,a),t}();function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ts(e,t){return!t||"object"!==$i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ns(e){return(ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ts(this,ns(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&os(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),localStorage.removeItem("accessLevel"),location.href="/sign-in"}},{key:"render",value:function(){return null}}])&&es(n.prototype,o),a&&es(n,a),t}();function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cs(e,t){return(cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var us=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=ss(t).call(this,e))||"object"!==as(r)&&"function"!=typeof r?ls(o):r).state={error:null},n.onSubmit=n.onSubmit.bind(ls(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cs(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Create User | SEPLIS"}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null});var n=e.target.email.value,o=e.target.password.value;p("/1/users",{data:{name:e.target.name.value,email:n,password:o}}).fail(function(e){t.setState({error:e.responseJSON})}).done(function(e){localStorage.setItem("user_id",e.id),localStorage.setItem("user_level",e.level),t.signin(n,o)})}},{key:"signin",value:function(e,t){var n=this;p("/1/token",{data:{client_id:seplisClientId,grant_type:"password",email:e,password:t}}).fail(function(e){n.setState({error:e.responseJSON})}).done(function(e){localStorage.setItem("access_token",e.access_token),location.href="/"})}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),this.renderFieldError("name"),r.a.createElement("input",{name:"name",type:"text",className:"form-control dark-form-control",autoFocus:!0,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),this.renderFieldError("email"),r.a.createElement("input",{name:"email",type:"text",className:"form-control dark-form-control",placeholder:"",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),this.renderFieldError("password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control dark-form-control",placeholder:"Minimum 6 chars",required:!0})),r.a.createElement("div",{className:"d-flex"},r.a.createElement(s.b,{className:"btn",to:"/sign-in"},"Sign in"),r.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Create user")))}},{key:"renderError",value:function(){if(this.state.error)return r.a.createElement("div",{className:"alert alert-warning capitalize-first-letter"},r.a.createElement("strong",null,this.state.error.message))}},{key:"renderFieldError",value:function(e){if(this.state.error&&this.state.error.errors){var t=!0,n=!1,o=void 0;try{for(var a,i=this.state.error.errors[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;if(s.field==e)return r.a.createElement("p",{className:"text-danger"},s.message)}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}}}},{key:"render",value:function(){return r.a.createElement("div",{className:"standard-form"},r.a.createElement("div",{className:"logo"},"SEPLIS"),r.a.createElement("div",{className:"title"},"Create user"),this.renderError(),this.renderForm())}}])&&is(n.prototype,o),a&&is(n,a),t}(),fs=Object(l.e)(us);function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ms(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bs=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=hs(t).call(this,e))||"object"!==ps(r)&&"function"!=typeof r?ds(o):r).state={loadingPlayServers:!0,loadingShow:!0,loadingEpisode:!0,loadingNextEpisode:!0,loadingLang:!0,loadingStartTime:!0,playServer:null,playServerError:null,show:null,episode:null,nextEpisode:null,audio_lang:null,subtitle_lang:null,metadata:null,startTime:0},n.onAudioChange=n.audioChange.bind(ds(n)),n.onSubtitleChange=n.subtitleChange.bind(ds(n)),n.onTimeUpdate=n.timeUpdate.bind(ds(n)),n.showId=n.props.match.params.showId,n.number=n.props.match.params.number,n.session=k(),n.lastPos=0,n.cast=null,n.markedAsWatched=!1,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ys(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getShow(),this.getEpisode(),this.getPlayServers(),this.getNextEpisode(),this.getLanguage(),this.getStartTime()}},{key:"timeUpdate",value:function(e){var t=this;(e=Math.floor(e))!=this.lastPos&&(this.lastPos=e,e<10||e%10==0&&(e/100*10>parseInt(this.state.metadata.format.duration)-e?this.markedAsWatched||p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/watched"),{method:"PUT"}).done(function(){t.markedAsWatched=!0}):(this.markedAsWatched=!1,p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/position"),{method:"PUT",data:{position:e}}))))}},{key:"getPlayServers",value:function(){var e=this;Me("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/play-servers")).then(function(t){e.setState({loadingPlayServers:!1,playServer:t.playServer,metadata:t.metadata})}).catch(function(t){e.setState({loadingPlayServers:!1,playServerError:t})})}},{key:"getShow",value:function(){var e=this;p("/1/shows/".concat(this.showId)).done(function(t){e.setState({show:t})}).always(function(){e.setState({loadingShow:!1})})}},{key:"getEpisode",value:function(){var e=this,t=parseInt(this.number);p("/1/shows/".concat(this.showId,"/episodes/").concat(t)).done(function(t){e.setState({episode:t})}).always(function(){e.setState({loadingEpisode:!1})})}},{key:"getNextEpisode",value:function(){var e=this,t=parseInt(this.number)+1;p("/1/shows/".concat(this.showId,"/episodes/").concat(t)).done(function(t){e.setState({nextEpisode:t})}).always(function(){e.setState({loadingNextEpisode:!1})})}},{key:"getLanguage",value:function(){var e=this;p("/1/shows/".concat(this.showId,"/user-subtitle-lang")).done(function(t){t||(t={}),e.setState({audio_lang:t.audio_lang||null,subtitle_lang:t.subtitle_lang||null})}).always(function(){e.setState({loadingLang:!1})})}},{key:"getStartTime",value:function(){var e=this;p("/1/shows/".concat(this.showId,"/episodes/").concat(this.number,"/watched")).done(function(t){t?e.setState({startTime:t.position}):e.setState({startTime:0})}).always(function(){e.setState({loadingStartTime:!1})})}},{key:"audioChange",value:function(e){""==e&&(e=null),this.saveSub({audio_lang:e})}},{key:"subtitleChange",value:function(e){""==e&&(e=null),this.saveSub({subtitle_lang:e})}},{key:"saveSub",value:function(e){p("/1/shows/".concat(this.showId,"/user-subtitle-lang"),{method:"PATCH",data:e})}},{key:"getInfo",value:function(){return this.state.show?{title:this.state.show.title}:null}},{key:"episodeTitle",value:function(e,t){return S(e,t)}},{key:"getPlayNextInfo",value:function(){if(!this.state.show||!this.state.nextEpisode)return null;var e=this.state.show,t=this.state.nextEpisode;return{title:this.episodeTitle(e,t),url:"/show/".concat(e.id,"/episode/").concat(t.number,"/play")}}},{key:"getBackToInfo",value:function(){return this.state.show?{title:"Back to: ".concat(this.state.show.title),url:"/show/".concat(this.showId)}:null}},{key:"getCurrentInfo",value:function(){if(!this.state.show||!this.state.episode)return null;var e=this.state.show,t="".concat(e.title," - ");return{title:t+=this.episodeTitle(e,this.state.episode)}}},{key:"initCast",value:function(){var e=this;this.cast.addEventListener("isConnected",function(t){t.value&&confirm("Play ".concat(e.getCurrentInfo().title," on ").concat(e.cast.getFriendlyName(),"?"))&&(p(e.getPlayUrl()+"&action=cancel"),e.cast.playEpisode(e.showId,e.number).then(function(){location.href="/show/".concat(e.showId)}))})}},{key:"loadCast",value:function(){this.cast||(this.cast=new ze,this.cast.load(this.initCast.bind(this)))}},{key:"getPlayUrl",value:function(){return"".concat(this.state.playServer.play_url,"/play")+"?play_id=".concat(this.state.playServer.play_id)+"&session=".concat(this.session)}},{key:"renderPlayServerErrorMessage",value:function(){return 2==this.state.playServerError.code?r.a.createElement("span",null,r.a.createElement("h3",null,'"',this.state.show.title," ",S(this.state.show,this.state.episode),'" is not on any of your play servers.'),this.renderAirs()):this.state.playServerError.message}},{key:"renderAirs",value:function(){if(this.state.episode.air_datetime){var e=new Date(this.state.episode.air_datetime),t=new Date;if(!(t.getTime()-e.getTime()>86400))return t.getTime()<e.getTime()?r.a.createElement("div",{className:"mb-2"},"Airs in ",O(this.state.episode.air_datetime)):r.a.createElement("div",null,"Aired ",O(this.state.episode.air_datetime)," ago")}}},{key:"renderPlayServerError",value:function(){return r.a.createElement("div",{className:"alert alert-warning",style:{width:"75%",margin:"auto",marginTop:"100px"}},this.renderPlayServerErrorMessage(),"Go back to ",r.a.createElement("a",{href:"/show/".concat(this.showId)},this.state.show.title))}},{key:"render",value:function(){return this.state.loadingPlayServers||this.state.loadingShow||this.state.loadingEpisode||this.state.loadingNextEpisode||this.state.loadingLang||this.state.loadingStartTime?r.a.createElement(Ce,null):this.state.playServerError?this.renderPlayServerError():(this.loadCast(),r.a.createElement(De,{playServerUrl:"".concat(this.state.playServer.play_url),playId:this.state.playServer.play_id,metadata:this.state.metadata,info:this.getInfo(),nextInfo:this.getPlayNextInfo(),backToInfo:this.getBackToInfo(),currentInfo:this.getCurrentInfo(),onAudioChange:this.onAudioChange,onSubtitleChange:this.onSubtitleChange,audio_lang:this.state.audio_lang,subtitle_lang:this.state.subtitle_lang,onTimeUpdate:this.onTimeUpdate,startTime:this.state.startTime,session:this.session}))}}])&&ms(n.prototype,o),a&&ms(n,a),t}();function vs(e){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gs(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ws(e,t){return!t||"object"!==vs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ss(e,t){return(Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ks=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ws(this,Es(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ss(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props.error;return e?e.errors?r.a.createElement("div",{className:"alert alert-danger capitalize-first-letter",role:"alert"},r.a.createElement("div",{className:"mb-2"},r.a.createElement("b",null,"Error:")," ",e.message),e.errors.map(function(e){return r.a.createElement("div",{key:e.field},r.a.createElement("b",null,e.field,":")," ",e.message)})):r.a.createElement("div",{className:"alert alert-danger capitalize-first-letter",role:"alert"},r.a.createElement("div",null,r.a.createElement("b",null,"Error:")," ",e.message)):null}}])&&gs(n.prototype,o),a&&gs(n,a),t}();function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cs(e){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var js=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Cs(t).call(this,e))||"object"!==_s(r)&&"function"!=typeof r?Ps(o):r).state={error:null,success:null,loading:!1},n.submitEmail=n.submitEmail.bind(Ps(n)),n.submitReset=n.submitReset.bind(Ps(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){document.title="Reset Password | SEPLIS"}},{key:"submitEmail",value:function(e){var t=this;e.preventDefault(),this.setState({success:!1,loading:!0,error:null}),p("/1/user-reset-password",{query:{email:this.email.value}}).fail(function(e){t.setState({error:e.responseJSON,loading:!1})}).done(function(){t.setState({success:!0,loading:!1})})}},{key:"submitReset",value:function(e){var t=this;e.preventDefault(),this.setState({success:!1,loading:!0,error:null}),p("/1/user-reset-password",{data:{key:this.props.match.params.key,new_password:this.password.value}}).fail(function(e){t.setState({error:e.responseJSON,loading:!1})}).done(function(){t.setState({success:!0,loading:!1})})}},{key:"renderSendSuccess",value:function(){if(this.state.success)return r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("strong",null,"A reset link has been sent to your email."))}},{key:"renderButton",value:function(){return 0==this.state.loading?r.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto"},"Submit"):1==this.state.loading?r.a.createElement("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:!0},"Working..."):void 0}},{key:"renderSendForm",value:function(){var e=this;if(!this.state.success)return r.a.createElement("form",{onSubmit:this.submitEmail},r.a.createElement("label",null,"Email"),r.a.createElement("input",{ref:function(t){return e.email=t},type:"email",name:"email",className:"form-control dark-form-control mb-4",required:!0,autoFocus:!0}),r.a.createElement("div",{className:"d-flex"},r.a.createElement(s.b,{className:"btn",to:"/sign-in"},"Sign in"),this.renderButton()))}},{key:"renderSend",value:function(){return r.a.createElement("div",{className:"standard-form"},r.a.createElement("div",{className:"logo"},"SEPLIS"),r.a.createElement("div",{className:"title"},"Reset password"),r.a.createElement(ks,{error:this.state.error}),this.renderSendForm(),this.renderSendSuccess())}},{key:"renderResetSuccess",value:function(){if(this.state.success)return r.a.createElement("div",{className:"alert alert-success"},"Your password has been changed. Sign in ",r.a.createElement(s.b,{to:"/sign-in"},"here"),".")}},{key:"renderResetForm",value:function(){var e=this;if(!this.state.success)return r.a.createElement("form",{onSubmit:this.submitReset},r.a.createElement("label",null,"New password"),r.a.createElement("input",{ref:function(t){return e.password=t},type:"password",name:"password",className:"form-control dark-form-control mb-4",required:!0,autoFocus:!0}),r.a.createElement("div",{className:"d-flex"},this.renderButton()))}},{key:"renderReset",value:function(){return r.a.createElement("div",{className:"standard-form"},r.a.createElement("div",{className:"logo"},"SEPLIS"),r.a.createElement("div",{className:"title"},"Reset password"),r.a.createElement(ks,{error:this.state.error}),this.renderResetForm(),this.renderResetSuccess())}},{key:"render",value:function(){return this.props.match.params.key?this.renderReset():this.renderSend()}}])&&Os(n.prototype,o),a&&Os(n,a),t}();n(69),n(70);i.a.render(r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/sign-in",component:Zi}),r.a.createElement(l.a,{exact:!0,path:"/sign-out",component:rs}),r.a.createElement(l.a,{exact:!0,path:"/create-user",component:fs}),r.a.createElement(l.a,{exact:!0,path:"/reset-password",component:js}),r.a.createElement(l.a,{path:"/reset-password/:key",component:js}),r.a.createElement(l.a,{exact:!0,path:"/show/:showId/episode/:number/play",component:bs}),r.a.createElement(l.a,{path:"/",component:zi}))),document.getElementById("root"))}});
//# sourceMappingURL=app.js.map