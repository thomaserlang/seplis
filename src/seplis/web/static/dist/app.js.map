{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./web/static/app/api.jsx","webpack://exports/./web/static/app/utils.jsx","webpack://exports/./web/static/app/components/Loader.jsx","webpack://exports/./web/static/app/components/Pagination.jsx","webpack://exports/./web/static/app/components/player/Chromecast.jsx","webpack://exports/./web/static/app/events.jsx","webpack://exports/./web/static/app/components/shows/episodes/EpisodeListItem.jsx","webpack://exports/./web/static/app/components/shows/EpisodesToWatch.jsx","webpack://exports/./web/static/app/components/shows/Countdown.jsx","webpack://exports/./web/static/app/components/shows/Watched.jsx","webpack://exports/./web/static/app/components/shows/RecentlyAired.jsx","webpack://exports/./web/static/app/components/shows/List.jsx","webpack://exports/./web/static/app/components/shows/EditFields.jsx","webpack://exports/./web/static/app/components/player/ChromecastIcon.jsx","webpack://exports/./web/static/app/components/player/Slider.jsx","webpack://exports/./web/static/app/components/player/AudioSubBar.jsx","webpack://exports/./web/static/app/components/player/PlayNext.jsx","webpack://exports/./web/static/app/components/player/Player.jsx","webpack://exports/./web/static/app/components/player/ChromecastBar.jsx","webpack://exports/./web/static/app/components/Search.jsx","webpack://exports/./web/static/app/components/Navbar.jsx","webpack://exports/./web/static/app/views/UserShowsStats.jsx","webpack://exports/./web/static/app/views/PlayServer.jsx","webpack://exports/./web/static/app/views/PlayServers.jsx","webpack://exports/./web/static/app/views/Password.jsx","webpack://exports/./web/static/app/views/Account.jsx","webpack://exports/./web/static/app/components/shows/AirDates.jsx","webpack://exports/./web/static/app/views/AirDates.jsx","webpack://exports/./web/static/app/views/Main.jsx","webpack://exports/./web/static/app/views/EpisodesToWatch.jsx","webpack://exports/./web/static/app/views/Countdown.jsx","webpack://exports/./web/static/app/views/ShowsWatched.jsx","webpack://exports/./web/static/app/views/RecentlyAired.jsx","webpack://exports/./web/static/app/views/FanOf.jsx","webpack://exports/./web/static/app/views/CreateUser.jsx","webpack://exports/./web/static/app/views/SignOut.jsx","webpack://exports/./web/static/app/views/SignIn.jsx","webpack://exports/./web/static/app/views/show/New.jsx","webpack://exports/./web/static/app/views/show/PlayEpisode.jsx","webpack://exports/./web/static/app/components/shows/EditAlternativeTitles.jsx","webpack://exports/./web/static/app/views/show/Edit.jsx","webpack://exports/./web/static/app/views/show/Info.jsx","webpack://exports/./web/static/app/views/show/Stats.jsx","webpack://exports/./web/static/app/components/shows/episodes/SelectSeason.jsx","webpack://exports/./web/static/app/components/shows/episodes/SelectSeasonEpisode.jsx","webpack://exports/./web/static/app/components/shows/episodes/WatchedProgression.jsx","webpack://exports/./web/static/app/components/shows/episodes/SeasonList.jsx","webpack://exports/./web/static/app/views/show/Seasons.jsx","webpack://exports/./web/static/app/components/shows/episodes/EpisodeLastWatched.jsx","webpack://exports/./web/static/app/components/shows/episodes/LatestEpisodesSideBar.jsx","webpack://exports/./web/static/app/components/shows/episodes/WatchedButton.jsx","webpack://exports/./web/static/app/components/shows/episodes/NextToWatch.jsx","webpack://exports/./web/static/app/views/show/Main.jsx","webpack://exports/./web/static/app/components/shows/ShowNav.jsx","webpack://exports/./web/static/app/components/shows/FanButton.jsx","webpack://exports/./web/static/app/views/show/Show.jsx","webpack://exports/./web/static/app/Routes.jsx","webpack://exports/./web/static/app/components/player/VolumeBar.jsx","webpack://exports/./web/static/app/index.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fullfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","p","jsonpArray","window","oldJsonpFunction","bind","slice","request","url","options","arguments","undefined","query","_jquery2","default","param","method","localRequest","JSON","stringify","startsWith","apiClientSettings","baseUrl","indexOf","headers","Accept","access_token","localStorage","getItem","Authorization","ajax","contentType","error","handleError","_jquery","status","responseJSON","code","removeItem","location","href","clientId","isAuthed","requireAuthed","pad","str","max","toString","getUserId","getUserLevel","episodeNumber","show","episode","episode_type","number","season","air_date","episodeTitle","title","guid","s4","Math","floor","random","substring","secondsToTime","secs","hours","minutes","seconds","dateInDays","dt","Date","abs","getTime","days","trim","propTypes","hcenter","_propTypes2","bool","Loader","_react2","Component","cls","_classnames2","loader","loader-hcenter","this","props","createElement","className","defaultProps","jqXHR","isRequired","onPageChange","func","Pagination","_classCallCheck","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","state","parseJqXHR","pageChange","nextProps","setState","e","page","target","pages","getResponseHeader","key","onChange","renderOptions","_Player","_api","_utils","events","ANY_CHANGED","AVAILABLE","IS_CONNECTED","PLAYER_STATE","CURRENT_TIME","Chromecast","loaded","onInit","initialized","initCast","loadCastScript","initList","isAvailable","setTimeout","sessionRequest","chrome","cast","SessionRequest","appId","apiConfig","ApiConfig","sessionListener","receiverListener","AutoJoinPolicy","ORIGIN_SCOPED","initialize","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","script","document","src","head","appendChild","requestSession","session","mediaSession","receiver","friendlyName","getEstimatedTime","success","playerState","pause","play","showId","startTime","Promise","resolve","reject","isConnected","console","log","all","getPlayServer","then","position","getSession","sendMessage","metadata","token","type","apiUrl","seplis","playUrl","playServer","play_url","play_id","subtitle_lang","audio_lang","media","LoadRequest","_playEpisodeMediaInfo","loadMedia","mediaListener","mediaInfo","MediaInfo","TvShowMediaMetadata","seriesTitle","originalAirdate","metadataType","MetadataType","TV_SHOW","event","eventListener","includes","timerGetCurrentTime","setInterval","dispatchEvent","addMediaListener","addUpdateListener","sessionUpdateListener","SessionStatus","CONNECTED","mediaSessionUpdateListener","field","_dispatchEvent","forEach","f","trigger_episode_watched_status","show_id","episode_number","Event","EVENT_EPISODE_WATCHED_STATUS","displaySeason","EpisodeListItem","onPlayClick","playClick","_Chromecast2","playEpisode","getPlayUrl","color","renderEpisodeNumber","renderAirDate","_WatchedButton2","watched","user_watched","onClick","getEpisodesToWatch","perPage","items","array","EpisodesToWatch","getData","_this2","item","id","alt","poster_image","_this3","map","renderItem","per_page","textStatus","fail","getCountdown","Countdown","air_datetime","renderShow","getWatched","Watched","shows","user_watching","getRecentlyAired","RecentlyAired","mobile_xscroll","List","row","slider","externals","required","importer_info","importer_episodes","importerTypes","EditFields","onImporterSelected","importerSelected","onInputChange","inputChanged","showexternals","importers","importers.info","info","importers.episodes","episodes","alternative_titles","external","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","lookupExternals","externals.tvmaze","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_this4","renderExternals","renderImporter","_EditAlternativeTitles2","defaultValue","ChromecastIcon","connected","available","onConnected","onDeviceAvailable","deviceAvailable","load","onCastInit","iconClick","castIconClick","removeEventListener","addEventListener","icon","duration","onReturnCurrentTime","onNewTime","Slider","currentTime","onSliderClick","sliderClick","getCurrentTime","clearTimeout","x","getEventXOffset","norm","offsetWidth","newTime","trunc","match","originalEvent","touches","changedTouches","offsetLeft","elem","isNaN","offsetParent","clientX","ref","style","width","progressPercent","onAudioChange","onSubtitleChange","bottom","AudioSubBar","audio","subtitles","parseMetadata","click","onAudioClick","audioClick","onSubtitleClick","subtitleClick","onDocumentClick","documentClick","contains","streams","stream","tags","language","index","codec_type","preventDefault","getAttribute","data-data","audio-subtitles","audio-subtitles-bottom","audioSubtitlesElem","renderSubtitles","renderAudio","_this5","renderAudioSubtitles","string","description","PlayNext","onNextClick","nextClick","playServers","selected","always","message","playServerUrl","playId","nextInfo","backToInfo","currentInfo","onTimeUpdate","Player","onPlayPauseClick","playPauseClick","parseInt","format","pingTimer","hls","onFullscreenClick","fullscreenClick","onVolumeChange","volumeChange","audioChange","subtitleChange","volume","hideControlsTimer","onSliderReturnCurrentTime","sliderReturnCurrentTime","onSliderNewTime","sliderNewTime","playing","time","fullscreen","showControls","subtitle","loading","video","timeupdateEvent","pauseEvent","playEvent","fullscreenchangeEvent","playError","playWaiting","loadedEvent","setPingTimer","loadStream","onmousemove","mouseMove","onkeypress","keypress","onbeforeunload","beforeUnload","_hls2","isSupported","destroy","bufferTimer","clearInterval","enableWorker","startLevel","manifestLoadingTimeOut","maxSeekHole","debug","loadSource","attachMedia","on","Events","MANIFEST_PARSED","ERROR","hlsError","warn","fatal","details","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","handleMediaError","recoverMediaError","paused","setHideControlsTimer","timeout","fullScreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullscreenElement","currentTarget","MEDIA_ERR_DECODE","seekable","end","_this6","cancelPlayUrl","_this7","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","getElementById","requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","Element","ALLOW_KEYBOARD_INPUT","webkitEnterFullscreen","_PlayNext2","lang","changeVideoState","visibility","showControlsVisibility","_ChromecastIcon2","_AudioSubBar2","_VolumeBar2","renderPlayNext","playPause","fa","fa-pause","fa-play","fa-expand","fa-arrows-alt","getCurrentTimeText","_Slider2","getDurationText","_Loader2","_this8","preload","autoPlay","controls","renderControlsTop","renderControlsBottom","renderLoading","_events","ChromecastBar","deviceName","changingTime","clickPlayNextEpisode","playNextEpisode","castStateChanged","removeMessageListener","receiveCastInfo","subAudioSubSave","playOrPause","playerStateChanged","connectedChanged","currentTimeChanged","getFriendlyName","addMessageListener","namespace","parse","getMediaSession","getPlayNextEpisode","nextEpisode","catch","getPlayNextInfo","renderPlayControl","getDuration","playNext","renderFinished","renderPlaying","renderReadyToPlay","_react","Search","onInputChanged","onKeyDown","keyDown","onMouseOver","mouseOver","onMouseOut","mouseOut","onSubmit","submit","results","selectedResultId","requesting","form","abort","title_suggest","fields","suggestNode","scrollTop","setNextSelectedId","keyCode","val","disableScroll","height","offsetHeight","g","placeholder","display","data-id","resultClassName","premiered","Navbar","data-toggle","_ChromecastBar2","renderMain","renderAirDates","renderShowDropdown","renderChromecast","renderCreateUser","renderSignIn","renderUserMenu","_Search2","UserShowsStats","stats","getStats","userId","fan_of","round","episodes_watched_minutes","episodes_watched","shows_watched","_reactRouter","PlayServer","onDelete","onGiveAccess","onRemoveUserAccess","secret","users","getUsersWithAccess","incLoading","router","confirm","username","alert","u","verticalAlign","renderGiveAccessForm","renderUsers","errors","_this9","renderError","renderFieldError","renderDeleteButton","renderUsersWithAccess","render2","withRouter","PlayServers","getPlayServers","body","Link","to","renderPlayServers","Password","password","new_password","newPassword","focus","disabled","renderSuccess","renderButton","Account","weekdays","Main","date","getDay","d1","d2","now","ceil","renderWeekday","a","renderHeaderDate","_List2","AirDates","_AirDates2","_Watched","_Countdown","_RecentlyAired","_EpisodesToWatch","visChange","visibilitychange","failed","countdown","recentlyWatched","episodesToWatch","hidden","_Watched2","_RecentlyAired2","_Countdown2","_EpisodesToWatch2","browserHistory","pathname","setBrowserPath","getItems","_Pagination2","ShowsWatched","totalCount","FanOf","getShows","CreateUser","email","setItem","level","signin","client_id","grant_type","autoFocus","renderForm","SignOut","SignIn","onSignIn","onDataChange","saveUserIdAndRedirect","user","role","_flat","New","unflatten","_formSerialize2","hash","extra","_EditFields2","PlayEpisode","loadingPlayServers","loadingShow","loadingEpisode","loadingNextEpisode","loadingLang","loadingStartTime","playServerError","timeUpdate","params","lastPos","markedAsWatched","getShow","getEpisode","getNextEpisode","getLanguage","getStartTime","obj","saveSub","getCurrentInfo","margin","marginTop","renderPlayServerErrorMessage","renderPlayServerError","loadCast","_Player2","getInfo","getBackToInfo","arrayOf","EditAlternativeTitles","select2","multiple","Edit","Info","statusToText","runtime","genres","join","desc","text","renderGeneral","renderDescription","Stats","userStats","getUserStats","seasons","totalEpisodes","total","episodeCount","countEpisodes","renderUserStats","selectedSeason","SelectSeason","selectedNumber","SelectSeasonEpisode","rows","from","label","renderSeason","WatchedProgression","showForm","fromNumber","toNumber","saving","dropdownButtonClick","selectChange","formSubmit","getNextToWatch","fromN","toN","reload","_SelectSeasonEpisode2","seasonNumber","onSeasonChange","SeasonList","getEpisodes","seasonEpisodeNumbers","q","append","seasonNum","_WatchedProgression2","_SelectSeason2","_EpisodeListItem2","Seasons","seasonChange","_SeasonList2","EpisodeLastWatched","eventGet","numberOfEpisodes","LatestEpisodesSideBar","dateUTC","_fecha2","sort","renderCountdown","WatchedButton","setWatchedState","onWatchedIncr","onWatchedDecr","onWatchedClick","times","watchedApiEndpoint","replace","dropdown","btnClass","btn","btn-watched","watching","watching-watched","renderDropdown","NextToWatch","_LatestEpisodesSideBar2","_NextToWatch2","_EpisodeLastWatched2","renderNextToWatch","ShowNav","activeClassName","isFan","FanButton","getIsFan","is_fan","btn-fan","btn-fan__is-fan","aria-label","Show","seplis_tv_show","_FanButton2","_ShowNav2","cloneElement","children","endsWith","renderShowImporting","Router","history","Route","path","component","_SignIn2","_SignOut2","_CreateUser2","_Show2","IndexRedirect","_Main2","_Info2","_Seasons2","_Stats2","_Edit2","_PlayEpisode2","_New2","_FanOf2","_ShowsWatched2","_Main4","_Account2","_Password2","_PlayServers2","_PlayServer2","_UserShowsStats2","VolumeBar","onSliderMouseMove","sliderMouseMove","onIconClick","percent","muted","buttons","stopPropagation","scrubber","querySelector","y","clientY","offsetTop","onMouseMove","fa-volume-up","fa-volume-down","fa-volume-off","renderBar","_Chromecast","React","ReactDOM","$","Routes"],"mappings":"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","file":"app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1]\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fullfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fullfilled = false;\n \t\t\t}\n \t\t\tif(fullfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonpexports\"] = window[\"webpackJsonpexports\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([198,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import $ from 'jquery';\n\nfunction handleError(error) {\n    if (error.status === 401) {\n        if (error.responseJSON.code === 1009) {\n            localStorage.removeItem('access_token');\n            localStorage.removeItem('user_id');\n            localStorage.removeItem('accessLevel');\n            location.href = '/sign-in';\n        }\n    }\n}\n\nexport var apiClientSettings = {\n    baseUrl: '',\n    clientId: '',\n};\n\nexport function request(url, options = {}) {\n    let query = $.param(options.query || '', true);\n    let method = options.method || (options.data ? 'POST':'GET');\n    let data = options.data;\n    let localRequest = options.localRequest || false;\n\n    if (typeof data !== 'undefined' && method !== 'GET') {\n        data = JSON.stringify(data);\n    }\n    \n    if ((!url.startsWith('http')) && (!localRequest)) {\n        url = apiClientSettings.baseUrl + url;\n    }\n\n    if (query) {\n        if (url.indexOf('?') === -1) {\n            url += '?' + query;\n        } else {\n            url += '&' + query;\n        }\n    }\n\n    let headers = {\n        Accept: 'application/json; charset=utf-8',\n    }\n    if (url.startsWith(apiClientSettings.baseUrl)) {\n        let access_token = localStorage.getItem('access_token');\n        if (access_token)\n            headers.Authorization = `Bearer ${access_token}`;\n    }\n\n    return $.ajax({\n        url: url,\n        method: method,\n        data: data,\n        contentType: 'application/json',\n        headers: headers,\n        'error': handleError,\n    })\n}\n\nfunction getCookie(name) {\n    var r = document.cookie.match(\"\\\\b\" + name + \"=([^;]*)\\\\b\");\n    return r ? r[1] : null;\n}","\nexport function isAuthed() {\n    return (localStorage.getItem('access_token') !== null);\n}\n\nexport function requireAuthed() {\n    if (!isAuthed()) {\n        location.href = '/sign-in';\n        throw 'Not authed!';\n    }\n    return true;\n}\n\nexport function getUserId() {\n    requireAuthed();\n    return localStorage.getItem('user_id') || 0;\n}\n\nexport function getUserLevel() {\n    return localStorage.getItem('user_level') || null;\n}\n\nexport function pad(str, max) {\n  str = str.toString();\n  return str.length < max ? pad(\"0\" + str, max) : str;\n}\n\nexport function episodeNumber(show, episode) {\n    switch (show.episode_type) {\n        case 1: return`Episode ${episode.number}`; break;\n        case 2: return`S${pad(episode.season,2)} · E${pad(episode.episode, 2)} (${episode.number})`; break;\n        case 3: return`Airdate: ${episode.air_date}`; break;\n    }\n}\n\nexport function episodeTitle(show, episode) {\n    switch (show.episode_type) {\n        case 1: return`${episode.number}: ${episode.title}`; break;\n        case 2: return`S${pad(episode.season,2)}E${pad(episode.episode, 2)}: ${episode.title}`; break;\n        case 3: return`${episode.air_date}: ${episode.title}`; break;\n    }\n}\n\nexport function guid() {\n    function s4() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n        s4() + '-' + s4() + s4() + s4();\n}\n\nexport function secondsToTime(secs) {\n    let hours = Math.floor(secs / 3600);\n    let minutes = Math.floor((secs - (hours * 3600)) / 60);\n    let seconds = Math.floor(secs - (hours * 3600) - (minutes * 60));\n\n    if (hours < 10) \n        hours = \"0\"+hours;\n    if (minutes < 10) \n        minutes = \"0\"+minutes;\n    if (seconds < 10)\n        seconds = \"0\"+seconds;\n    return (hours>0?hours+':':'')+minutes+':'+seconds;\n}\n\nexport function dateInDays(dt) {\n    if (typeof(dt) == \"string\") {\n        dt = new Date(dt);\n    }\n    let secs = Math.abs(dt-new Date().getTime())/1000;\n    let r = '';\n    let days = Math.floor(secs/86400);\n    let hours = Math.floor((secs-(days * 86400))/3600);\n    let minutes = Math.floor((secs-(days * 86400)-(hours*3600))/60);\n    if (days > 0) {\n        r = days + ((days == 1)?' day':' days');\n    }\n    if (hours > 0) {\n        r += ' ' + hours + ((hours == 1)?' hour':' hours');\n    }\n    if ((days < 1) && (hours < 1)) {\n        r = minutes + ((minutes == 1)?' minute':' minutes');\n    }\n    return r.trim();\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\n\nimport './Loader.scss';\n\nconst propTypes = {\n    hcenter: PropTypes.bool,\n}\n\nconst defaultProps = {\n    hcenter: false,\n}\n\nclass Loader extends React.Component {\n\n    render() {        \n        let cls = ClassNames({\n            loader: true,\n            'loader-hcenter': this.props.hcenter,\n        });\n        return (\n            <div className={cls}></div>\n        )\n    }\n\n}\nLoader.propTypes = propTypes;\nLoader.defaultProps = defaultProps;\n\nexport default Loader;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport LinkParser from 'parse-link-header';\n\nconst propTypes = {\n    jqXHR: PropTypes.object.isRequired,\n    onPageChange: PropTypes.func,\n}\n\nclass Pagination extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = this.parseJqXHR();\n        this.onPageChange = this.pageChange.bind(this);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState(\n            this.parseJqXHR(nextProps.jqXHR)\n        );\n    }\n\n    pageChange(e) {\n        this.state.page = e.target.value;\n        if (this.props.onPageChange != undefined) \n            this.props.onPageChange(e);\n    }\n\n    parseJqXHR(jqXHR) {\n        return {\n            pages: this.props.jqXHR.getResponseHeader('X-Total-Pages'),\n            page: this.props.jqXHR.getResponseHeader('X-Page'),\n        };\n    }\n\n    renderOptions() {\n        let options = [];\n        for (let i = 1; i <= this.state.pages; i++) {\n            options.push(\n                <option \n                    key={i} \n                    value={i}\n                >\n                    Page {i}\n                </option>\n            );\n        }\n        return options;\n    }\n\n    render() {\n        if (this.state.pages <= 1)\n            return null;\n        return (\n            <select\n                className=\"form-control col-margin\"\n                onChange={this.onPageChange}\n                value={this.state.page}\n            >\n                {this.renderOptions()}\n            </select>\n        )\n    }\n}\nPagination.propTypes = propTypes;\n\nexport default Pagination;","import {getPlayServer} from './Player';\nimport {request} from 'api';\nimport {guid} from 'utils';\n\nvar events = {\n    ANY_CHANGED: 'anyChanged',\n    AVAILABLE: 'isAvailable',\n    IS_CONNECTED: 'isConnected',\n    PLAYER_STATE: 'playerState',\n    CURRENT_TIME: 'currentTime',\n};\n\nclass Chromecast {\n \n    constructor() {\n        this.loaded = false;\n    }\n\n    load(onInit) {\n        this.onInit = onInit;\n        if (!Chromecast.initialized) {\n            this.loadCastScript();\n        } else {\n            this.initCast(true);\n        }\n    }\n \n    loadCastScript() {\n        Chromecast.initList.push(this);\n        if (Chromecast.loaded)\n            return;\n        Chromecast.loaded = true;\n        window['__onGCastApiAvailable'] = (isAvailable) => {\n            // Temp fix for cast not reconnecting randomly\n            setTimeout(() => {\n                let sessionRequest = new chrome.cast.SessionRequest(Chromecast.appId);\n                let apiConfig = new chrome.cast.ApiConfig(\n                    sessionRequest,\n                    sessionListener,\n                    receiverListener,\n                    chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n                );\n                chrome.cast.initialize(apiConfig, () => {\n                    Chromecast.initialized = true;\n                    for (let obj of Chromecast.initList) {\n                        obj.initCast(isAvailable);\n                    }\n                });\n            }, 500);\n        };\n        let script = document.createElement('script');\n        script.src = 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js';\n        document.head.appendChild(script);\n    }\n \n    initCast(isAvailable) {\n        this.loaded = isAvailable;\n        if (!isAvailable) \n            return;\n        if (this.onInit)\n            this.onInit(this);\n    }\n\n    requestSession() {\n        chrome.cast.requestSession(sessionListener);\n    }\n\n    isConnected() {\n        if (!Chromecast.session)\n            return false;\n        return Chromecast.session.status == 'connected';\n    }\n\n    getSession() {\n        return Chromecast.session;\n    }\n\n    getMediaSession() {\n        return Chromecast.mediaSession;\n    }\n\n    getFriendlyName() {\n        return Chromecast.session.receiver.friendlyName;\n    }\n\n    getCurrentTime() {\n        return Chromecast.mediaSession.getEstimatedTime();\n    }\n\n    playOrPause(success, error) {\n        if (Chromecast.mediaSession.playerState == 'PLAYING')\n            this.pause(success, error)\n        else\n            this.play(success, error);\n    }    \n\n    play(success, error) {\n        Chromecast.mediaSession.play(null, success, error);\n    }\n\n    pause(success, error) {\n        Chromecast.mediaSession.pause(null, success, error);\n    }\n\n    playEpisode(showId, episodeNumber, startTime) {\n        return new Promise((resolve, reject) => {\n            if (!this.isConnected()) {\n                console.log('Not connected to a cast device.');\n                reject();\n                return;\n            }\n            let url =`/1/shows/${showId}/episodes/${episodeNumber}/play-servers`;\n            Promise.all([\n                getPlayServer(url),\n                request('/1/progress-token'),\n                request(`/1/shows/${showId}`),\n                request(`/1/shows/${showId}/episodes/${episodeNumber}`),\n                request(`/1/shows/${showId}/episodes/${episodeNumber}/watched`),\n                request(`/1/shows/${showId}/user-subtitle-lang`),\n            ]).then((result) => {\n                if (!startTime) {\n                    if (result[4])\n                        startTime = result[4].position\n                    else\n                        startTime = 0;\n                }\n                this.getSession().sendMessage(\n                    'urn:x-cast:net.seplis.cast.info',\n                    {\n                        play: result[0]['playServer'],\n                        metadata: result[0]['metadata'],\n                        token: result[1]['token'],\n                        type: 'episode',\n                        show: result[2],\n                        episode: result[3],\n                        startTime: startTime,\n                        apiUrl: seplis.apiClientSettings.baseUrl,\n                    },\n                    () => {},\n                    (error) => {console.log(error);},\n                );\n                let playUrl = result[0].playServer.play_url+'/play'+\n                    '?play_id='+result[0].playServer.play_id;\n                playUrl += `&session=${guid()}`;\n                if (startTime)\n                    playUrl += `&start_time=${startTime}`;\n                if (result[5]) {\n                    playUrl += `&subtitle_lang=${result[5].subtitle_lang || ''}`;\n                    playUrl += `&audio_lang=${result[5].audio_lang || ''}`;\n                }\n                let request = new chrome.cast.media.LoadRequest(\n                    this._playEpisodeMediaInfo(playUrl, result[2], result[3])\n                );\n                this.getSession().loadMedia(\n                    request,\n                    (mediaSession) => { \n                        mediaListener(mediaSession);\n                        resolve(mediaSession); \n                    },\n                    (e) => { reject(e); },Chromecast\n                );\n            });\n        });\n    }\n\n    _playEpisodeMediaInfo(url, show, episode) {\n        var mediaInfo = new chrome.cast.media.MediaInfo(url);\n        mediaInfo.metadata = new chrome.cast.media.TvShowMediaMetadata();\n        mediaInfo.metadata.seriesTitle = show.title;\n        mediaInfo.metadata.title = episode.title;\n        mediaInfo.metadata.episode = episode.episode || episode.number;\n        mediaInfo.metadata.originalAirdate = episode.air_date;\n        mediaInfo.metadata.metadataType = chrome.cast.media.MetadataType.TV_SHOW;\n        return mediaInfo;\n    }\n\n    addEventListener(event, func) {\n        if (!(event in Chromecast.eventListener))\n            Chromecast.eventListener[event] = [];\n        let e = Chromecast.eventListener[event] ;\n        if (!Chromecast.eventListener[event].includes(func))\n            Chromecast.eventListener[event].push(func);\n    }\n \n    removeEventListener(event, func) {\n        let e = Chromecast.eventListener[event] || [];\n        let i = e.indexOf(func);\n        if (i > 0)\n            e.splice(i, 1);\n    }\n}\nChromecast.initialized = false;\nChromecast.loaded = false;\nChromecast.initList = [];\nChromecast.session = null;\nChromecast.mediaSession = null;\nChromecast.eventListener = {};\nChromecast.events = events;\nChromecast.timerGetCurrentTime = null;\nChromecast.appId = '';\n\nfunction sessionListener(session) {\n    Chromecast.session = session;\n    if (session.media.length != 0) {\n        mediaListener(session.media[0]);\n    }\n    Chromecast.timerGetCurrentTime = setInterval(() => {\n        if (!Chromecast.mediaSession)\n            return;\n        if (Chromecast.mediaSession.playerState == 'PLAYING')\n            dispatchEvent(events.CURRENT_TIME, Chromecast.mediaSession.getEstimatedTime());            \n    }, 1000);\n    session.addMediaListener(mediaListener);\n    session.addUpdateListener(sessionUpdateListener);\n    dispatchEvent(events.IS_CONNECTED, true);\n}\n\nfunction sessionUpdateListener(event) {\n    if (Chromecast.session.status !== chrome.cast.SessionStatus.CONNECTED) {\n        Chromecast.session = null;\n        Chromecast.mediaSession = null;\n        dispatchEvent(events.IS_CONNECTED, false);\n    }\n}\n\nfunction mediaListener(mediaSession) {\n    Chromecast.mediaSession = mediaSession;\n    mediaSession.addUpdateListener(mediaSessionUpdateListener);        \n    dispatchEvent(events.CURRENT_TIME, Chromecast.mediaSession.getEstimatedTime());            \n    // Chrome iOS fix\n    mediaSessionUpdateListener()\n}\n\nfunction mediaSessionUpdateListener() {\n    dispatchEvent(\n        events.PLAYER_STATE, \n        Chromecast.mediaSession.playerState\n    );\n}\n\nfunction receiverListener(state) {\n    if (state == 'available')\n        dispatchEvent(events.AVAILABLE, true)\n    else        \n        dispatchEvent(events.AVAILABLE, false);\n}\n\nfunction mediaStatusUpdateListener(isAlive) {\n\n}\n\nfunction dispatchEvent(event, data) {    \n    let e = {\n        field: event,\n        value: data,\n    }    \n    _dispatchEvent('anyChanged', e);\n    _dispatchEvent(event, e);\n}\n\nfunction _dispatchEvent(event, data) {\n    let e = Chromecast.eventListener[event] || [];\n    e.forEach(f => {\n        try {\n            f(data);\n        } catch (e) {\n            console.log(e);            \n        }\n    });\n}\n \nexport default Chromecast;","export const EVENT_EPISODE_WATCHED_STATUS = 'episode_watched_status';\n/**\n * @param {string} method - incr or decr\n * @param {int} show_id\n * @param {int} episode_number\n */\nexport function trigger_episode_watched_status(method, show_id, episode_number) {\n    let event = new Event(EVENT_EPISODE_WATCHED_STATUS, {\n        method: method,\n        show_id: show_id,\n        episode_number: episode_number,\n    });\n    document.dispatchEvent(event);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport WatchedButton from './WatchedButton';\nimport Chromecast from 'seplis/components/player/Chromecast';\n\nimport './EpisodeListItem.scss';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n    episode: PropTypes.object.isRequired,\n    displaySeason: PropTypes.bool,\n}\n\nconst defaultProps = {\n    displaySeason: true,\n}\n\nclass EpisodeListItem extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onPlayClick = this.playClick.bind(this);\n    }\n\n    playClick(e) {\n        if (Chromecast.session && (Chromecast.session.status == 'connected')) {\n            let cc = new Chromecast();\n            cc.playEpisode(\n                this.props.showId,\n                this.props.episode.number\n            );\n        } else {\n            location.href = this.getPlayUrl();\n        }\n    }\n\n    renderEpisodeNumber() {\n        if (this.props.episode.episode) {\n            return (\n                <span>\n                    {this.props.displaySeason?`S${this.props.episode.season} `: ''}\n                    Episode {this.props.episode.episode}\n                    &nbsp;\n                    <font color=\"grey\">\n                        ({this.props.episode.number})\n                    </font> \n                </span>\n            )\n        } else {\n            return (\n                <span>Episode {this.props.episode.number}</span>\n            )   \n        }\n    }\n\n    renderAirDate() {\n        if (this.props.episode.air_date) {\n            return (\n                <span \n                    className=\"air-date\" \n                    title={this.props.episode.air_date}\n                >\n                    {this.props.episode.air_date}\n                </span> \n            )\n        } else {\n            return (\n                <span>\n                    Unknown air date.\n                </span>\n            )\n        }\n    }\n\n    getPlayUrl() {\n        return `/show/${this.props.showId}/episode/${this.props.episode.number}/play`;\n    }\n\n    render() {\n        return (\n            <div className=\"episode-box-list-item\">\n                <div \n                    className=\"title\" \n                    title={this.props.episode.title}\n                >\n                    {this.props.episode.title?this.props.episode.title:'TBA'}\n                </div>\n                <div className=\"meta\">\n                    {this.renderEpisodeNumber()}\n                    <strong> · </strong>\n                    {this.renderAirDate()}\n                </div>\n                <div className=\"button-bar\">\n                    <WatchedButton \n                        showId={this.props.showId}\n                        episodeNumber={this.props.episode.number}\n                        watched={this.props.episode.user_watched}\n                    />\n                    <div \n                        className=\"play-button float-right\"\n                        onClick={this.onPlayClick}\n                    >\n                        <i className=\"fa fa-play-circle\"></i>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nEpisodeListItem.propTypes = propTypes;\nEpisodeListItem.defaultProps = defaultProps;\n\nexport default EpisodeListItem;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getUserId, episodeNumber} from 'utils';\nimport {request} from 'api';\n\nconst propTypes = {\n    perPage: PropTypes.number,\n    page: PropTypes.number,\n    items: PropTypes.array,\n}\n\nconst defaultProps = {\n    perPage: 6,\n    page: 1,\n    items: null,\n}\n\nclass EpisodesToWatch extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            items: [],\n        }\n    }\n\n    componentDidMount() {\n        if (!this.props.items) {\n            this.getData();\n        } else {\n            this.setState({items: this.props.items});\n        }\n    }\n\n    getData() {\n        getEpisodesToWatch(this.props.perPage, this.props.page).then((data) => {\n            this.setState({items: data.items});\n        });\n    }\n\n    renderItem(item) {\n        let show = item.show;\n        let episode = item.episode;\n        return (\n            <div key={show.id} className=\"col-4 col-md-3 col-lg-2 col-margin\">\n                <a href={`/show/${show.id}`}>\n                    <img \n                        title={show.title}\n                        alt={show.title}\n                        src={show.poster_image!=null?show.poster_image.url + '@SX180':''} \n                        className=\"img-fluid\"\n                    />\n                </a>\n                <div className=\"black-box\">{episodeNumber(show, episode)}</div>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.items.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    You have zero episodes to watch! :(\n                </div>\n            );\n        return (\n            <div className=\"row\">\n                {this.state.items.map(item => (\n                    this.renderItem(item)\n                ))}\n            </div>\n        )\n    }\n}\nEpisodesToWatch.propTypes = propTypes;\nEpisodesToWatch.defaultProps = defaultProps;\n\nexport default EpisodesToWatch;\n\nexport function getEpisodesToWatch(perPage, page) {\n    return new Promise((resolve, reject) => {\n        request(`/1/users/${getUserId()}/shows-etw`, {\n            query: {\n                'per_page': perPage,\n                page: page,\n            },\n        }).done((data, textStatus, jqXHR) => {\n            resolve({items: data, jqXHR: jqXHR});\n        }).fail((e) => {\n            reject(e);\n        })\n    })\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getUserId, dateInDays, episodeNumber} from 'utils';\nimport {request} from 'api';\n\nconst propTypes = {\n    perPage: PropTypes.number,\n    page: PropTypes.number,\n    items: PropTypes.array,\n}\n\nconst defaultProps = {\n    perPage: 6,\n    page: 1,\n    items: null,\n}\n\nclass Countdown extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            items: [],\n        }\n    }\n\n    componentDidMount() {\n        if (!this.props.items) {\n            this.getData();\n        } else {\n            this.setState({items: this.props.items});\n        }\n    }\n\n    getData() {\n        getCountdown(this.props.perPage, this.props.page).then((data) => {\n            this.setState({items: data.items});\n        });\n    }\n\n    renderShow(show, episode) {\n        return (\n            <div key={show.id} className=\"col-4 col-md-3 col-lg-2 col-margin\">\n                <div className=\"black-box\">In {dateInDays(episode.air_datetime)}</div>\n                <a href={`/show/${show.id}`}>\n                    <img \n                        title={show.title}\n                        alt={show.title}\n                        src={show.poster_image!=null?show.poster_image.url + '@SX180':''} \n                        className=\"img-fluid\"\n                    />\n                </a>\n                <div className=\"black-box\">{episodeNumber(show, episode)}</div>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.items.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    None of the shows you follow have episodes airing! :(\n                </div>\n            );\n        return (\n            <div className=\"row\">\n                {this.state.items.map(item => (\n                    this.renderShow(item.show, item.episode)\n                ))}\n            </div>\n        )\n    }\n}\nCountdown.propTypes = propTypes;\nCountdown.defaultProps = defaultProps;\n\nexport default Countdown;\n\nexport function getCountdown(perPage, page) {\n    return new Promise((resolve, reject) => {\n        request(`/1/users/${getUserId()}/shows-countdown`, {\n            query: {\n                'per_page': perPage,\n                page: page,\n            },\n        }).done((data, textStatus, jqXHR) => {\n            resolve({items: data, jqXHR: jqXHR});\n        }).fail((e) => {\n            reject(e);\n        })\n    })\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getUserId, episodeNumber} from 'utils';\nimport {request} from 'api';\n\nconst propTypes = {\n    perPage: PropTypes.number,\n    page: PropTypes.number,\n    items: PropTypes.array,\n}\n\nconst defaultProps = {\n    perPage: 6,\n    page: 1,\n    items: null,\n}\n\nclass Watched extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            shows: [],\n        }\n    }\n\n    componentDidMount() {\n        if (!this.props.items) {\n            this.getData();\n        } else {\n            this.setState({shows: this.props.items});\n        }\n    }\n\n    getData() {\n        getWatched(this.props.perPage, this.props.page).then((data) => {\n            this.setState({shows: data.items});\n        });\n    }\n\n    renderShow(show, episode) {\n        return (\n            <div key={show.id} className=\"col-4 col-md-3 col-lg-2 col-margin\">\n                <a href={`/show/${show.id}`}>\n                    <img \n                        title={show.title}\n                        alt={show.title}\n                        src={show.poster_image!=null?show.poster_image.url + '@SX180':''} \n                        className=\"img-fluid\"\n                    />\n                </a>\n                <div className=\"black-box\">{episodeNumber(show, episode)}</div>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.shows.length == 0) \n            return (\n                <div className=\"alert alert-info\">\n                    You have not watched any shows yet!\n                </div>\n            );\n        return (\n            <div className=\"row\">\n                {this.state.shows.map(item => (\n                    this.renderShow(item, item.user_watching.episode)\n                ))}\n            </div>\n        )\n    }\n}\nWatched.propTypes = propTypes;\nWatched.defaultProps = defaultProps;\n\nexport default Watched;\n\nexport function getWatched(perPage, page) {\n    return new Promise((resolve, reject) => {\n        request(`/1/users/${getUserId()}/shows-watched`, {\n            query: {\n                'per_page': perPage,\n                page: page,\n            },\n        }).done((data, textStatus, jqXHR) => {\n            resolve({items: data, jqXHR: jqXHR});\n        }).fail((e) => {\n            reject(e);\n        })\n    })\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getUserId, episodeNumber} from 'utils';\nimport {request} from 'api';\n\nimport './List.scss';\n\nconst propTypes = {\n    perPage: PropTypes.number,\n    page: PropTypes.number,\n    items: PropTypes.array,\n}\n\nconst defaultProps = {\n    perPage: 6,\n    page: 1,\n    items: null,\n}\n\nclass RecentlyAired extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            items: [],\n        }\n    }\n\n    componentDidMount() {\n        if (!this.props.items) {\n            this.getData();\n        } else {\n            this.setState({items: this.props.items});\n        }\n    }\n\n    getData() {\n        getRecentlyAired(this.props.perPage, this.props.page).then((data) => {\n            this.setState({items: data.items});\n        });\n    }\n\n    renderItem(item) {\n        let show = item.show;\n        let episode = item.episode;\n        return (\n            <div key={show.id} className=\"col-4 col-md-3 col-lg-2 col-margin\">\n                <a href={`/show/${show.id}`}>\n                    <img \n                        title={show.title}\n                        alt={show.title}\n                        src={show.poster_image!=null?show.poster_image.url + '@SX180':''} \n                        className=\"img-fluid\"\n                    />\n                </a>\n                <div className=\"black-box\">{episodeNumber(show, episode)}</div>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.items.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    No recently aired episodes from shows you are a fan of.\n                </div>\n            );\n        return (\n            <div className=\"row\">\n                {this.state.items.map(item => (\n                    this.renderItem(item)\n                ))}\n            </div>\n        )\n    }\n}\nRecentlyAired.propTypes = propTypes;\nRecentlyAired.defaultProps = defaultProps;\n\nexport default RecentlyAired;\n\nexport function getRecentlyAired(perPage, page) {\n    return new Promise((resolve, reject) => {\n        request(`/1/users/${getUserId()}/shows-recently-aired`, {\n            query: {\n                'per_page': perPage,\n                page: page,\n            },\n        }).done((data, textStatus, jqXHR) => {\n            resolve({items: data, jqXHR: jqXHR});\n        }).fail((e) => {\n            reject(e);\n        })\n    })\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\n\nimport './List.scss';\n\nconst propTypes = {\n    shows: PropTypes.array.isRequired,\n    mobile_xscroll: PropTypes.bool,\n}\n\nconst defaultProps = {\n    mobile_xscroll: false,\n}\n\nclass List extends React.Component {\n\n    renderShow(show) {\n        return (\n            <div key={show.id} className=\"col-4 col-sm-4 col-md-3 col-lg-2 col-margin\">\n                <a href={`/show/${show.id}`}>\n                    <img \n                        title={show.title}\n                        alt={show.title}\n                        src={show.poster_image!=null?show.poster_image.url + '@SX180':''} \n                        className=\"img-fluid\"\n                    />\n                </a>\n            </div>\n        )\n    }\n\n    render() {\n        let c = ClassNames({\n            row: true,\n            'slider': this.props.mobile_xscroll,\n        });\n        return (\n            <div className={c}>\n                {this.props.shows.map(show => (\n                    this.renderShow(show)\n                ))}\n            </div>\n        );\n    }\n}\nList.propTypes = propTypes;\nList.defaultProps = defaultProps;\n\nexport default List;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EditAlternativeTitles from './EditAlternativeTitles';\nimport {request} from 'api';\n\nconst propTypes = {\n    show: PropTypes.object,\n}\n\nconst externals = [\n    {\n        'key': 'imdb',\n        'title': 'IMDb',\n        'required': true,\n        'importer_info': false,\n        'importer_episodes': false,\n    },\n    {\n        'key': 'tvmaze',\n        'title': 'TVMaze',\n        'required': false,\n        'importer_info': true,\n        'importer_episodes': true,\n    },\n    {\n        'key': 'thetvdb',\n        'title': 'TheTVDB',\n        'required': false,\n        'importer_info': true,\n        'importer_episodes': true,\n    },\n]\n\nconst importerTypes = [\n    'info',\n    'episodes',\n]\n\nclass EditFields extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onImporterSelected = this.importerSelected.bind(this);\n        this.onInputChange = this.inputChanged.bind(this);\n        let show = props.show || {};\n        let showexternals = show.externals || {};\n        let importers = show.importers || {};\n        // Fill state\n        this.state = {\n            'importers.info': importers.info || '',\n            'importers.episodes': importers.episodes || '',\n            alternative_titles: show.alternative_titles?show.alternative_titles.slice():[],\n            episode_type: show.episode_type || 2,\n        }\n        for (let external of externals) {\n            this.state[`externals.${external.key}`] = showexternals[external.key] || '';\n        }\n    }\n\n    importerSelected(e) {\n        let s = {}\n        s[e.target.name] = e.target.value;\n        for (let type of importerTypes) {\n            if (`importers.${type}` == e.target.name)\n                continue;\n            if (this.state[`importers.${type}`] === '') {\n                s[`importers.${type}`] = e.target.value;\n            }\n        }\n        this.setState(s);\n    }\n\n    inputChanged(e) {\n        let s = {};\n        let name = e.target.name;\n        let value = e.target.value;\n        s[name] = value;\n        this.setState(s);\n        if ((name.startsWith('externals.')) && (value != '')) {\n            let query = {};\n            query[name.substring(name.indexOf('.')+1, name.length)] = value;\n            this.lookupExternals(query);\n        }\n    }\n\n    lookupExternals(query) {\n        request('/api/tvmaze-show-lookup', {\n            localRequest:true,\n            query: query,\n        }).done(data => {\n            let s = {'externals.tvmaze': data.id}\n            for (let key in data.externals) {\n                if (`externals.${key}` in this.state) {\n                    s[`externals.${key}`] = data.externals[key];\n                }\n            }\n            this.setState(s);\n        })\n    }\n\n    renderImporter(type) {\n        let importers = [];\n        for (let external of externals) {\n            if (external['importer_'+type]) {\n                importers.push(external);\n            }\n        }\n        return (\n            <fieldset className=\"form-group\" key={type}>\n                <label>Import {type} from</label>\n                <select \n                    name={'importers.'+type} \n                    className=\"form-control importers\" \n                    onChange={this.onImporterSelected}\n                    value={this.state[`importers.${type}`]}\n                >\n                    <option value=\"\"></option>\n                    {importers.map((external) => (\n                        <option key={external.key} value={external.key}>\n                            {external.title}\n                        </option>\n                    ))}\n                </select>\n            </fieldset>\n        )\n    }\n\n    renderExternals() {\n        return (\n            externals.map((external) => (\n                <fieldset key={external.key} className=\"form-group\">\n                    <label>{external.title} ID {external.required?<b>*</b>:''}</label>                    \n                    <input \n                        name={`externals.${external.key}`} \n                        className=\"form-control\" \n                        required={external.required}\n                        value={this.state[`externals.${external.key}`]}\n                        onChange={this.onInputChange}\n                    />\n                    {external.required?\n                        <small className=\"text-muted\"> Required to prevent show duplication.</small>:\n                        ''\n                    }\n                </fieldset>\n            ))\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6\">\n                    <h3>Externals</h3>\n                    {this.renderExternals()}\n\n                    <h3>Importers</h3>\n                    {importerTypes.map((type) => (\n                        this.renderImporter(type)\n                    ))}\n                </div>\n\n                <div className=\"col-md-6\">\n                    <h3>General</h3>\n                    <fieldset className=\"form-group\">\n                        <label>Alternative titles</label>\n                        <EditAlternativeTitles \n                            options={this.state.alternative_titles} \n                        />\n                    </fieldset>\n\n                    <fieldset className=\"form-group\">\n                        <label>Episode type</label>\n                        <select \n                            name=\"episode_type\"\n                            className=\"form-control\"\n                            defaultValue={this.state.episode_type}\n                        >\n                            <option value=\"1\">Absolute number</option>\n                            <option value=\"2\">Season episode</option>\n                            <option value=\"3\">Air date</option>\n                        </select>\n                    </fieldset>\n                </div>\n            </div>\n        )\n    }\n}\nEditFields.propTypes = propTypes;\n\nexport default EditFields;","import React from 'react';\nimport Chromecast from './Chromecast';\n\nimport './ChromecastIcon.scss';\n\nclass ChromecastIcon extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            connected: false,\n            available: false,\n        }\n    }\n\n    componentDidMount() {\n        this.onConnected = this.connected.bind(this);\n        this.onDeviceAvailable = this.deviceAvailable.bind(this);\n        this.cast = new Chromecast();\n        this.cast.load(this.onCastInit.bind(this));\n        this.iconClick = this.castIconClick.bind(this);\n    }\n\n    componentWillUnmount() {\n        this.cast.removeEventListener('isConnected', this.onConnected)\n    }\n\n    onCastInit() {\n        this.cast.addEventListener('isConnected', this.onConnected);\n        this.cast.addEventListener('isAvailable', this.onDeviceAvailable);\n    }\n\n    deviceAvailable(e) {\n        this.setState({available: e.value});        \n    }\n\n    connected(e) {\n        this.setState({connected: e.value});\n    }\n\n    castIconClick(event) {\n        this.cast.requestSession();\n    }\n\n    render() {\n        if (!this.state.available)\n            return null;\n        let icon = '/static/img/chromecast.svg';\n        if (this.state.connected)\n            icon = '/static/img/chromecast_connected.svg';\n        return (\n            <img \n                onClick={this.iconClick}\n                title=\"Chromecast\"\n                className=\"castbutton\"\n                src={icon}\n            />\n        );\n    }\n}\n\nexport default ChromecastIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './Slider.scss';\n\nconst propTypes = {\n    duration: PropTypes.number.isRequired,\n    onReturnCurrentTime: PropTypes.func.isRequired,\n    onNewTime: PropTypes.func.isRequired,\n}\n\nclass Slider extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentTime: 0,\n        }\n        this.onSliderClick = this.sliderClick.bind(this);\n        this.timerGetCurrentTime = null;\n    }\n\n    componentDidMount() {\n        this.getCurrentTime();\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timerGetCurrentTime);\n        this.timerGetCurrentTime = null;\n    }\n\n    sliderClick(event) {\n        let x = this.getEventXOffset(event);\n        let norm = this.props.duration / this.slider.offsetWidth;\n        var newTime = Math.trunc(norm*x);\n        this.setState({\n            currentTime: newTime,\n        });\n        this.props.onNewTime(newTime);\n    }\n\n    getCurrentTime() {\n        this.setState({\n            currentTime: this.props.onReturnCurrentTime(),\n        });\n        this.timerGetCurrentTime = setTimeout(() => {\n            this.getCurrentTime();\n        }, 1000);\n    }\n\n    progressPercent() {\n        return ((this.state.currentTime / this.props.duration) * 100).toString() + '%';\n    }\n\n    getEventXOffset(event) {\n        if (event.type.match('^touch')) {\n            event = event.originalEvent.touches[0] || \n                event.originalEvent.changedTouches[0];\n        }\n        \n        var offsetLeft = 0;\n        var elem = this.slider;\n        do {\n            if (!isNaN( elem.offsetLeft)) {\n                offsetLeft += elem.offsetLeft;\n            }\n        } while(elem = elem.offsetParent);\n\n        let x = event.clientX - offsetLeft;\n        if (x > this.slider.offsetWidth)\n            x = this.slider.offsetWidth;\n        return x;\n    }\n\n    render() {\n        return (\n            <div className=\"player-slider-wrapper\" onClick={this.onSliderClick}>\n                <div \n                    className=\"slider\"\n                    ref={(ref) => this.slider = ref}\n                >\n                    <div \n                        className=\"progress\" \n                        style={{width: this.progressPercent()}}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\nSlider.propTypes = propTypes;\n\nexport default Slider;","import React from 'react';\nimport ClassNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport './AudioSubBar.scss';\n\nconst propTypes = {\n    metadata: PropTypes.object,\n    onAudioChange: PropTypes.func,\n    onSubtitleChange: PropTypes.func,\n    bottom: PropTypes.bool,\n}\n\nclass AudioSubBar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: false,\n        }\n        this.audio = [];\n        this.subtitles = [];\n        this.parseMetadata();\n\n        this.onClick = this.click.bind(this);\n\n        this.onAudioClick = this.audioClick.bind(this);\n        this.onSubtitleClick = this.subtitleClick.bind(this);\n        this.onDocumentClick = this.documentClick.bind(this);\n    }\n\n    componentDidMount() {    \n        document.addEventListener('click', this.onDocumentClick);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.onDocumentClick);\n    }\n    \n    documentClick(e) {\n        if (this.icon == undefined) return;\n        if (!this.icon.contains(e.target)) {\n            this.setState({show: false});\n        }\n    }\n\n    parseMetadata() {\n        for (let stream of this.props.metadata.streams) {\n            if (!('tags' in stream))\n                continue;\n            if (!('language' in stream.tags))\n                continue;\n            let s = {\n                language: stream.tags.language,\n                title: stream.tags.title || stream.tags.language,\n                index: stream.index,\n            }\n            switch(stream.codec_type) {\n                case 'subtitle': this.subtitles.push(s); break;\n                case 'audio': this.audio.push(s); break;\n            }\n        }\n    }\n\n    click(event) {\n        this.setState({show: !this.state.show});\n    }\n\n    subtitleClick(event) {\n        event.preventDefault();\n        this.setState({show: false});\n        if (this.props.onSubtitleChange)\n            this.props.onSubtitleChange(\n                event.target.getAttribute('data-data')\n            );\n    }\n\n    audioClick(event) {\n        event.preventDefault();\n        this.setState({show: false});\n        if (this.props.onAudioChange)\n            this.props.onAudioChange(\n                event.target.getAttribute('data-data')\n            );\n    }\n\n    renderSubtitles() {\n        if (this.subtitles.length == 0)\n            return;\n        return (\n            <span>\n                <p className=\"title\">Subtitles</p>\n                <p><a href=\"#\" onClick={this.onSubtitleClick} data-data=\"\">None</a></p>\n                {this.subtitles.map(l => (\n                    <p key={l.index}>\n                        <a \n                            href=\"#\" \n                            onClick={this.onSubtitleClick}\n                            data-data={`${l.language}:${l.index}`}\n                        >\n                            {l.title}\n                        </a>\n                    </p>\n                ))}\n            </span>\n        )\n    }\n\n    renderAudio() {\n        if (this.audio.length <= 1)\n            return;\n        return (\n            <span>\n                <p className=\"title\">Audio</p>\n                {this.audio.map(l => (\n                    <p key={l.index}>                        \n                        <a \n                            href=\"#\" \n                            onClick={this.onAudioClick}\n                            data-data={`${l.language}:${l.index}`}\n                        >\n                            {l.title}\n                        </a>\n                    </p>\n                ))}\n            </span>\n        )\n    }\n\n    renderAudioSubtitles() {\n        if (!this.state.show)\n            return null;\n        let cls = ClassNames({\n            'audio-subtitles': true,\n            'audio-subtitles-bottom': this.props.bottom,\n        });\n        return (\n            <div \n                className={cls} \n                ref={(ref) => this.audioSubtitlesElem = ref}\n            >\n                {this.renderSubtitles()}\n                {this.renderAudio()}\n            </div>\n        )\n    }\n\n    render() {\n        if ((this.audio.length <= 1) && (this.subtitles.length == 0))\n            return null;\n        return (\n            <span\n                ref={(ref) => this.icon = ref}\n            >\n                <span className=\"fa fa-cc\" onClick={this.onClick} />\n                {this.renderAudioSubtitles()}\n            </span>\n        )\n    }\n}\nAudioSubBar.propTypes = propTypes;\n\nexport default AudioSubBar;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n    title: PropTypes.string,\n    description: PropTypes.string,\n    url: PropTypes.string,\n}\n\nclass PlayNext extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onNextClick = this.nextClick.bind(this);\n    }\n\n    nextClick(e) {\n        location.href = this.props.url;\n    }\n\n    render() {\n        return (\n            <a \n                className=\"fa fa-step-forward\"\n                title={this.props.title}\n                href={this.props.url}\n            />\n        )\n    }\n\n}\nPlayNext.propTypes = propTypes;\n\nexport default PlayNext;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Hls from 'hls.js';\nimport ClassNames from 'classnames';\nimport {request} from 'api';\nimport PlayNext from './PlayNext';\nimport VolumeBar from './VolumeBar';\nimport AudioSubBar from './AudioSubBar.jsx';\nimport Slider from './Slider.jsx';\nimport ChromecastIcon from './ChromecastIcon';\nimport Loader from 'seplis/components/Loader';\nimport {secondsToTime} from 'utils';\nimport './Player.scss';\n\nconst propTypes = {\n    playServerUrl: PropTypes.string,\n    playId: PropTypes.string,\n    session: PropTypes.string,\n    startTime: PropTypes.number,\n    metadata: PropTypes.object,\n    info: PropTypes.object,\n    nextInfo: PropTypes.object,\n    backToInfo: PropTypes.object,\n    currentInfo: PropTypes.object,\n    onAudioChange: PropTypes.func,\n    onSubtitleChange: PropTypes.func,\n    audio_lang: PropTypes.string,\n    subtitle_lang: PropTypes.string,\n    onTimeUpdate: PropTypes.func,\n}\n\nconst defaultProps = {\n    startTime: 0,\n    info: null,\n    nextInfo: null,\n}\n\nclass Player extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onPlayPauseClick = this.playPauseClick.bind(this);\n        this.duration = parseInt(props.metadata.format.duration);\n        this.pingTimer = null;\n        this.hls = null;\n        this.onFullscreenClick = this.fullscreenClick.bind(this);\n        this.onVolumeChange = this.volumeChange.bind(this);\n\n        this.onAudioChange = this.audioChange.bind(this);\n        this.onSubtitleChange = this.subtitleChange.bind(this);\n\n        this.volume = 1;\n        this.hideControlsTimer = null;\n\n        this.onSliderReturnCurrentTime = this.sliderReturnCurrentTime.bind(this);\n        this.onSliderNewTime = this.sliderNewTime.bind(this);\n\n        this.state = {\n            playing: false,\n            time: this.props.startTime,\n            startTime: this.props.startTime,\n            session: props.session,\n            fullscreen: false,\n            showControls: true,\n            audio: this.props.audio_lang,\n            subtitle: this.props.subtitle_lang,\n            loading: false,\n        }\n    }\n\n    componentDidMount() {        \n        this.video.addEventListener('timeupdate', this.timeupdateEvent.bind(this));\n        this.video.addEventListener('pause', this.pauseEvent.bind(this));\n        this.video.addEventListener('play', this.playEvent.bind(this));\n        \n        document.addEventListener('fullscreenchange', this.fullscreenchangeEvent.bind(this));\n        document.addEventListener('webkitfullscreenchange', this.fullscreenchangeEvent.bind(this));\n        document.addEventListener('mozfullscreenchange', this.fullscreenchangeEvent.bind(this));\n        document.addEventListener('msfullscreenchange', this.fullscreenchangeEvent.bind(this));\n        \n        this.video.addEventListener('error', this.playError.bind(this));\n        this.video.addEventListener('waiting', this.playWaiting.bind(this));\n        this.video.addEventListener('click', this.playClick.bind(this));\n        this.video.addEventListener('touchstart', this.playClick.bind(this));\n        this.video.addEventListener('loadeddata', this.loadedEvent.bind(this));\n        this.setPingTimer();\n        this.video.volume = this.volume;\n        this.loadStream(this.getPlayUrl());\n        document.onmousemove = this.mouseMove.bind(this);\n        document.onkeypress = this.keypress.bind(this);\n        document.onbeforeunload = this.beforeUnload.bind(this);\n    }\n\n    loadedEvent(e) {\n        this.setState({loading: false});\n    }\n\n    loadStream(url) {\n        this.setState({loading: true});\n        if (!Hls.isSupported()) {\n            this.video.src = url;\n            this.video.load();\n            this.video.play();\n            return;\n        }\n\n        if (this.hls) {\n            this.hls.destroy();\n            if (this.hls.bufferTimer) {\n                clearInterval(this.hls.bufferTimer);\n                this.hls.bufferTimer = undefined;\n            }\n            this.hls = null;\n        }\n        this.hls = new Hls({\n            enableWorker: false,\n            startLevel: 0,\n            manifestLoadingTimeOut: 30000,\n            maxSeekHole: 12,\n            debug: false,\n        });\n        this.hls.loadSource(url);\n        this.hls.attachMedia(this.video);\n        this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n            this.video.play();\n        });\n        this.hls.on(Hls.Events.ERROR, this.hlsError.bind(this));\n    }\n\n    hlsError(event, data) {\n        console.warn(data);\n        if(data.fatal) {\n            console.log('fatal error :' + data.details);\n            switch(data.type) {\n                case Hls.ErrorTypes.NETWORK_ERROR:\n                    console.log(\"fatal network error encountered, try to recover\");\n                    this.hls.startLoad();\n                    break;\n                case Hls.ErrorTypes.MEDIA_ERROR:\n                    console.log(\"fatal media error encountered, try to recover\");\n                    this.handleMediaError();\n                    break;\n            }\n        }\n    }\n\n    handleMediaError() {\n        this.setState({loading: true});\n        this.hls.recoverMediaError();\n        this.video.play();\n    }\n\n    keypress(e) {\n        if (e.code == 'Space')\n            this.playPauseClick();\n    }\n\n    playClick(e) {\n        e.preventDefault();\n        if (this.video.paused || this.state.loading)\n            return;\n        this.setState({showControls: !this.state.showControls});\n        this.setHideControlsTimer();\n    }\n\n    setPingTimer() {\n        clearTimeout(this.pingTimer);\n        this.pingTimer = setTimeout(() => {\n            request(this.getPlayUrl()+'&action=ping');\n            this.setPingTimer();\n        }, 2000);\n    }\n\n    setHideControlsTimer(timeout) {\n        if (timeout == undefined)\n            timeout = 6000;\n        clearTimeout(this.hideControlsTimer);\n        this.hideControlsTimer = setTimeout(() => {\n            if (this.video.paused || this.state.loading)\n                return;\n            this.setState({\n                showControls: false,\n            });\n        }, timeout);\n    }\n\n    mouseMove(e) {\n        if (this.state.showControls) return;\n        this.setState({\n            showControls: true,\n        });\n        this.setHideControlsTimer();\n    }\n\n    getPlayUrl() {\n        return `${this.props.playServerUrl}/play`+\n            `?play_id=${this.props.playId}`+\n            `&session=${this.props.session}`+\n            `&start_time=${this.state.startTime}`+\n            `&subtitle_lang=${this.state.subtitle || ''}`+\n            `&audio_lang=${this.state.audio || ''}`+\n            `&device=hls`;\n    }\n\n    playPauseClick() {\n        if (this.video.paused) {\n            this.video.play();\n            this.setHideControlsTimer(2000);\n        }\n        else {\n            this.video.pause();\n        }\n    }\n\n    fullscreenchangeEvent() {\n        this.setState({\n            fullscreen: !!(document.fullScreen || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement),\n        });\n    }\n\n    pauseEvent() {\n        this.setState({\n            playing: false,\n            showControls: true,\n        });\n    }\n\n    playEvent() {\n        this.setState({\n            playing: true,\n            loading: true,\n        });\n    }\n\n    playError(e) {\n        this.setState({loading: false});\n        console.warn(e.currentTarget.error)\n        if (e.currentTarget.error.code == e.currentTarget.error.MEDIA_ERR_DECODE) {\n            this.handleMediaError();\n        }\n    }\n\n    playWaiting() {\n        this.setState({loading: true});\n    }\n\n    timeupdateEvent(e) {\n        if (!this.video.paused) {\n            this.setState({loading: false});\n            let time = this.video.currentTime;\n            if (this.video.seekable.length <= 1 || this.video.seekable.end(0) <= 1)\n                time += this.state.startTime;\n            this.setState({\n                time: time,\n                playing: true,\n            }, () => {\n                if (this.props.onTimeUpdate)\n                    this.props.onTimeUpdate(this.state.time);\n            });\n            if (!this.hideControlsTimer) {\n                this.setHideControlsTimer();\n            }\n        }\n    }\n\n    changeVideoState(state) {\n        this.setState({'loading': true});\n        this.cancelPlayUrl().then(() => {\n            this.setState(state, () => {\n                this.loadStream(this.getPlayUrl());\n                this.setPingTimer();\n            });\n        });\n    }\n\n    beforeUnload() {\n        this.cancelPlayUrl();\n    }\n\n    cancelPlayUrl() {\n        return new Promise((resolve, reject) => {\n            request(\n                this.getPlayUrl()+'&action=cancel'\n            ).done(() => {\n                resolve();\n            }).fail(e => {\n                reject(e);\n            });\n        });\n    }\n\n    fullscreenClick(event) {\n        if (!this.state.fullscreen) {\n            let elem = document.getElementById('player');\n            if (elem.requestFullScreen) {\n                elem.requestFullScreen();\n            } else if (elem.mozRequestFullScreen) {\n                elem.mozRequestFullScreen();\n            } else if (elem.webkitRequestFullScreen) {\n                elem.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n            } else if (elem.webkitEnterFullscreen) {\n                elem.webkitEnterFullscreen();\n            }\n        } else {\n            if (document.cancelFullScreen) {\n                document.cancelFullScreen();\n            } else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            } else if (document.webkitCancelFullScreen) {\n                document.webkitCancelFullScreen();\n            }\n        }\n        this.setState({fullscreen: !this.state.fullscreen});\n    }\n\n    getDurationText() {\n        return secondsToTime(parseInt(this.duration));\n    }\n\n    getCurrentTimeText() {\n        return secondsToTime(parseInt(this.state.time));\n    }\n\n    renderPlayNext() {\n        if (!this.props.nextInfo) return;\n        return (\n            <PlayNext\n                title={this.props.nextInfo.title}\n                url={this.props.nextInfo.url}\n            />    \n        )\n    }\n\n    volumeChange(volume) {\n        this.volume = volume;\n        if (this.video)\n            this.video.volume = volume;\n    }\n\n    audioChange(lang) {\n        if (this.props.onAudioChange)\n            this.props.onAudioChange(lang);\n        this.changeVideoState({\n            audio: lang,\n            startTime: this.state.time,\n        });\n    }\n\n    subtitleChange(lang) {\n        if (this.props.onSubtitleChange)\n            this.props.onSubtitleChange(lang);\n        this.changeVideoState({\n            subtitle: lang,\n            startTime: this.state.time,\n        });\n    }\n\n    sliderNewTime(newTime) {\n        this.video.pause();        \n        clearTimeout(this.hideControlsTimer);\n        this.hideControlsTimer = null;\n        this.changeVideoState({\n            time: newTime,\n            startTime: newTime,\n        });\n    }\n\n    sliderReturnCurrentTime() {\n        return this.state.time;\n    }\n\n    showControlsVisibility() {\n        return this.state.showControls?'visible':'hidden';\n    }\n\n    renderControlsTop() {\n        return (\n            <div \n                className=\"controls controls-top\" \n                style={{visibility: this.showControlsVisibility()}}\n            >\n                <div className=\"control\">\n                    <a \n                        className=\"fa fa-times\" \n                        href={this.props.backToInfo.url}\n                        title={this.props.backToInfo.title}\n                    />\n                </div>\n                <div className=\"control-text control-text-title\">\n                    {this.props.currentInfo.title}\n                </div>\n                <div className=\"control-spacer\" />\n                <div className=\"control\">\n                    <ChromecastIcon />\n                </div>\n                <div className=\"control\">\n                    <AudioSubBar \n                        metadata={this.props.metadata} \n                        onAudioChange={this.onAudioChange}\n                        onSubtitleChange={this.onSubtitleChange}\n                    />\n                </div>\n                <div className=\"control\">\n                    <VolumeBar onChange={this.onVolumeChange} />\n                </div>\n                <div className=\"control\">\n                    {this.renderPlayNext()}\n                </div>\n            </div>\n        )\n    }\n\n    renderControlsBottom() {\n        let playPause = ClassNames({\n            fa: true,\n            'fa-pause': this.state.playing,\n            'fa-play': !this.state.playing,\n        });\n        let fullscreen = ClassNames({\n            fa: true,\n            'fa-expand': this.state.fullscreen,\n            'fa-arrows-alt': !this.state.fullscreen,\n        });\n        return (\n            <div \n                className=\"controls\" \n                style={{visibility: this.showControlsVisibility()}}\n            >\n                <div className=\"control\">\n                    <span \n                        className={playPause}\n                        onClick={this.onPlayPauseClick}\n                    >\n                    </span>\n                </div>\n                <div className=\"control-text\">\n                    {this.getCurrentTimeText()}\n                </div>\n                <Slider \n                    duration={this.duration}\n                    onReturnCurrentTime={this.onSliderReturnCurrentTime}\n                    onNewTime={this.onSliderNewTime}\n                />\n                <div className=\"control-text\" title=\"Timeleft\">\n                    {this.getDurationText()}\n                </div>\n                <div className=\"control\">\n                    <span \n                        className={fullscreen}\n                        onClick={this.onFullscreenClick}\n                    >\n                    </span>\n                </div>\n            </div>\n        )\n    }\n\n    renderLoading() {\n        if (!this.state.loading)\n            return null;\n        return <Loader hcenter={true} />\n    }\n\n    render() {\n        return (\n            <div id=\"player\">  \n                <div className=\"overlay\">\n                    <video \n                        className=\"video\" \n                        preload=\"none\" \n                        autoPlay={false}\n                        controls={false}\n                        ref={(ref) => this.video = ref}\n                    />\n                    {this.renderControlsTop()}\n                    {this.renderControlsBottom()}\n                    {this.renderLoading()}\n                </div>\n            </div>\n        )\n    }\n}\nPlayer.propTypes = propTypes;\nPlayer.defaultProps = defaultProps;\nexport default Player;\n\nexport function getPlayServer(url) {\n    /* `url` must be a url to the play servers. \n        Example: /1/shows/1/episodes/1/play-servers.\n        Returns a promise.\n    */\n    return new Promise((resolve, reject) => {\n        request(\n            url\n        ).done(playServers => {\n            var selected = false;\n            var i = 0;\n            if (playServers.length == 0) {\n                reject({code: 1, message: 'No play servers.'});\n                return;\n            }\n            for (var s of playServers) {\n                i += 1;\n                request(s.play_url+'/metadata', {\n                    query: {\n                        play_id: s.play_id,\n                    }\n                }).done(metadata => {\n                    if (selected) \n                        return;\n                    selected = true;\n                    resolve({\n                        playServer: s, \n                        metadata: metadata,\n                    });\n                }).always(() => {\n                    i -= 1;\n                    if ((i == 0) && (selected == false)) {\n                        reject({code: 2, message: 'This episode is not on any of your play servers.'});\n                    }\n                });\n            }\n        });\n    });\n}","import React from 'react';\nimport ClassNames from 'classnames';\nimport Chromecast from './Chromecast';\nimport Slider from './Slider';\nimport AudioSubBar from './AudioSubBar.jsx';\nimport PlayNext from './PlayNext';\nimport {episodeTitle, secondsToTime} from 'utils';\nimport {request} from 'api';\nimport {trigger_episode_watched_status} from 'seplis/events';\n\nimport './ChromecastBar.scss';\n\nclass ChromecastBar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            connected: false,\n            deviceName: \"\",\n            playerState: '',\n            info: null,\n            currentTime: 0,\n            loading: false,\n            changingTime: false,\n        }\n        this.cast = null;\n\n        this.onSliderReturnCurrentTime = this.sliderReturnCurrentTime.bind(this);\n        this.onSliderNewTime = this.sliderNewTime.bind(this);\n        this.onPlayPauseClick = this.playPauseClick.bind(this);\n        this.onAudioChange = this.audioChange.bind(this);\n        this.onSubtitleChange = this.subtitleChange.bind(this);\n        this.clickPlayNextEpisode = this.playNextEpisode.bind(this);\n    }\n\n    componentDidMount() {\n        this.cast = new Chromecast();\n        this.cast.load(this.initCast.bind(this));\n    }\n\n    componentWillUnmount() {\n        this.cast.removeEventListener(\n            'anyChanged',\n            this.castStateChanged.bind(this)\n        );\n\n        var session = this.cast.getSession();\n        if (session) {\n            session.removeMessageListener(\n                'urn:x-cast:net.seplis.cast.info',\n                this.receiveCastInfo.bind(this),\n            );\n        }\n    }\n\n    audioChange(lang) {\n        if (lang == '')\n            lang = null;\n        this.subAudioSubSave({audio_lang: lang});\n    }    \n\n    subtitleChange(lang) {\n        if (lang == '')\n            lang = null;\n        this.subAudioSubSave({subtitle_lang: lang});\n    }\n\n    subAudioSubSave(data) {\n        var show = this.state.info.show;\n        var episode = this.state.info.episode;\n        request(`/1/shows/${show.id}/user-subtitle-lang`, {\n            method: 'PATCH',\n            data: data,\n        }).done(() => {\n            this.cast.playEpisode(show.id, episode.number, this.state.currentTime);\n        });\n    }\n\n    initCast() {\n        this.cast.addEventListener(\n            'anyChanged',\n            this.castStateChanged.bind(this),\n        )\n    }\n\n    playPauseClick(event) {\n        this.cast.playOrPause();\n    }\n\n    castStateChanged(event) {\n        switch (event.field) {\n            case 'playerState':\n                this.playerStateChanged(event);\n                break;\n            case 'isConnected':\n                this.connectedChanged();\n                break;\n            case 'currentTime':\n                this.currentTimeChanged(event);\n                break;\n        }\n    }\n\n    connectedChanged() {\n        let connected = this.cast.isConnected();\n        this.setState({\n            connected: connected,\n            deviceName: (connected)?this.cast.getFriendlyName():'',\n        });\n        if (connected) {\n            this.setState({loading: false});\n            this.cast.getSession().addMessageListener(\n                'urn:x-cast:net.seplis.cast.info',\n                this.receiveCastInfo.bind(this),\n            );\n            this.cast.getSession().sendMessage(\n                'urn:x-cast:net.seplis.cast.sendinfo', \n                {}\n            );\n        } else {\n            this.setState({info: null});\n        }\n    }\n\n    receiveCastInfo(namespace, message) {\n        this.setState({\n            info: JSON.parse(message),\n            playNextEpisode: null,\n        }, () => {\n            if (this.cast.getMediaSession()) {\n                this.currentTimeChanged({\n                    value: this.cast.getMediaSession().getEstimatedTime()\n                });\n            }\n            this.getPlayNextEpisode();\n        });\n    }\n\n    playerStateChanged(event) {\n        this.setState({\n            playerState: event.value,\n            loading: (event.value == 'BUFFERING') || this.changingTime,\n        });\n        if (!this.state.info)\n            this.cast.getSession().sendMessage(\n                'urn:x-cast:net.seplis.cast.sendinfo', \n                {}\n            );\n        if (event.value == 'IDLE') {\n            trigger_episode_watched_status('refresh', 0, 0);\n        }\n    }\n\n    getPlayNextEpisode() {\n        if (!this.state.info)\n            return;\n        let number = parseInt(this.state.info.episode.number) + 1;\n        let showId = this.state.info.show.id;\n        request(\n            `/1/shows/${showId}/episodes/${number}`\n        ).done(data => {\n            this.setState({nextEpisode: data});\n        });\n    }\n\n    playNextEpisode() {\n        if ((!this.state.nextEpisode) || (!this.state.info))\n            return;\n        let info = this.state.info;\n        info['episode'] = this.state.nextEpisode;\n        info['startTime'] = 0;\n        this.setState({\n            nextEpisode: null,\n            info: info,\n            playerState: '',\n            loading: true,\n            changingTime: true,\n            currentTime: 0,\n        });\n        this.cast.playEpisode(\n            this.state.info.show.id,\n            this.state.nextEpisode.number,\n            0,\n        ).catch(() => {\n            this.setState({changingTime: false});\n        }).then(() => {\n            // iOS fix\n            this.cast.getSession().sendMessage(\n                'urn:x-cast:net.seplis.cast.sendinfo', \n                {}\n            );\n            this.setState({changingTime: false});\n        }); \n    }\n\n    currentTimeChanged(event) {\n        let time = event.value;\n        if (!this.cast.getMediaSession())\n            return;     \n        if (!this.cast.getMediaSession().items)\n            return;\n        if (this.cast.getMediaSession().items.length != 1)\n            return;\n        let startTime = this.cast.getMediaSession().items[0].startTime;\n        if (startTime == 0 && this.state.info)\n            time += this.state.info.startTime;\n        this.setState({currentTime: time});\n    }\n\n    sliderNewTime(newTime) {\n        this.cast.pause(() => {\n            this.state.info['startTime'] = newTime;\n            this.setState({\n                loading: true,\n                currentTime: newTime,\n                changingTime: true,\n            });\n            this.cast.playEpisode(\n                this.state.info.show.id,\n                this.state.info.episode.number,\n                newTime,\n            ).catch(() => {\n                this.setState({changingTime: false});\n            }).then(() => {\n                // iOS fix\n                this.cast.getSession().sendMessage(\n                    'urn:x-cast:net.seplis.cast.sendinfo', \n                    {}\n                );\n                this.setState({changingTime: false});\n            });            \n        });\n    }\n\n    sliderReturnCurrentTime() {\n        return this.state.currentTime;\n    }\n\n    renderPlayControl() {\n        if (this.state.loading) {\n            return (\n                <div className=\"control\">\n                    <img src=\"/static/img/spinner.svg\" />\n                </div>\n            )\n        }\n        let playPause = ClassNames({\n            fa: true,\n            'fa-pause': this.state.playerState == 'PLAYING',\n            'fa-play': this.state.playerState != 'PLAYING',\n        });\n        return (\n            <div className=\"control\">\n                <span \n                    className={playPause}\n                    onClick={this.onPlayPauseClick}\n                >\n                </span>\n            </div>\n        )\n    }\n\n    getDuration() {\n        if (!this.state.info)\n            return 0;\n        return parseInt(\n            this.state.info.metadata.format.duration\n        );\n    }\n\n    getPlayNextInfo() {\n        if (!this.state.info || !this.state.info.show || !this.state.nextEpisode) \n            return null;\n        let show = this.state.info.show;\n        let episode = this.state.nextEpisode;\n        let title = episodeTitle(show, episode);\n        return {\n            title: title,\n            url: `/show/${show.id}/episode/${episode.number}/play`\n        }\n    }\n\n    renderPlayNext() {\n        let info = this.getPlayNextInfo();\n        if (!info) return;\n        return <div className=\"control\">\n            <span \n                className=\"fa fa-step-forward\"\n                onClick={this.clickPlayNextEpisode}\n            />\n        </div>\n    }\n\n    renderPlaying() {\n        let show = this.state.info.show;\n        let episode = this.state.info.episode;\n        return (\n            <div id=\"castbar\">\n            <div className=\"container\">\n                <div className=\"text\">\n                    <b>\n                    &nbsp;{show.title} - {episodeTitle(show, episode)}\n                    </b>\n                    &nbsp;on {this.state.deviceName}\n                </div>\n                <div className=\"controls\">\n                </div>\n                <div className=\"controls\">\n                    {this.renderPlayControl()}\n                    <div className=\"control-text\">\n                        {secondsToTime(this.state.currentTime)}\n                    </div>\n                    <Slider\n                        duration={this.getDuration()}\n                        onReturnCurrentTime={this.onSliderReturnCurrentTime}\n                        onNewTime={this.onSliderNewTime}\n                    />\n                    <div className=\"control-text\">\n                        {secondsToTime(this.getDuration())}\n                    </div>\n                    <div className=\"control\">\n                        <AudioSubBar \n                            metadata={this.state.info.metadata}\n                            bottom={true}\n                            onAudioChange={this.onAudioChange}\n                            onSubtitleChange={this.onSubtitleChange}\n                        />\n                    </div>\n                    {this.renderPlayNext()}\n                </div>\n            </div>\n            </div>\n        )\n    }\n\n    renderFinished() {\n        let show = this.state.info.show;\n        let episode = this.state.info.episode;\n        let playNext = this.getPlayNextInfo();\n        if (!playNext) return null;\n        return (\n            <div id=\"castbar\">\n            <div className=\"container\">\n                <div className=\"text\">\n                    <b>{this.state.deviceName}</b>\n                    <br />\n                    <b>Play next episode:</b> \n                    &nbsp;<a onClick={this.clickPlayNextEpisode}>\n                        {show.title} - {playNext['title']}\n                    </a>\n                </div>\n            </div>\n            </div>\n        )\n    }\n\n    renderLoading() {\n        if (!this.state.loading)\n            return;\n        return <img src=\"/static/img/spinner.svg\" />;\n    }\n\n    renderReadyToPlay() {\n        return (\n            <div id=\"castbar\">\n            <div className=\"container\">\n            <div className=\"text\">\n                <b>Ready to cast on {this.state.deviceName}</b> <br />\n                {this.renderLoading()}\n                {this.renderPlayNext()}\n            </div>\n            </div>\n            </div>\n        )\n    }\n\n    render() {\n        if ((!this.cast) || (!this.state.connected)) {\n            return null;\n        }\n        if (this.state.info && (this.state.playerState == 'IDLE') && \n            !this.state.changingTime)\n            return this.renderFinished();\n        if (this.state.info)\n            return this.renderPlaying();\n        return this.renderReadyToPlay();\n    }\n}\n\nexport default ChromecastBar;","import React from 'react';\nimport {request} from 'api';\n\nimport './Search.scss';\n\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ENTER = 13;\n\nclass Search extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onInputChanged = this.inputChanged.bind(this);\n        this.onKeyDown = this.keyDown.bind(this);\n        this.onMouseOver = this.mouseOver.bind(this);\n        this.onMouseOut = this.mouseOut.bind(this);\n        this.onSubmit = this.submit.bind(this);\n        this.onClick = this.click.bind(this);\n        this.state = {\n            results: [],\n            show: false,\n            selectedResultId: null,\n        }\n        this.requesting = null;\n        this.selectedResultId = null;\n        this.onDocumentClick = this.documentClick.bind(this);\n    }\n\n    componentDidMount() {        \n        document.addEventListener('click', this.onDocumentClick);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.onDocumentClick);\n    }\n\n    documentClick(e) {\n        if (!this.form.contains(e.target)) {\n            this.setState({show: false});\n        }\n    }\n\n    inputChanged(e) {\n        if (this.requesting)\n            this.requesting.abort();\n        let val = e.target.value.trim();\n        if (val == '') {\n            this.setState({\n                results: [],\n                show: false,\n                selectedResultId: null,\n            });\n            return;\n        }\n        this.requesting = request('/1/shows', {\n            query: {\n                title_suggest: e.target.value.trim(),\n                per_page: 10,\n                fields: 'title,premiered,poster_image',\n            }\n        }).done(data => {\n            this.suggestNode.scrollTop = 0;\n            this.setState({\n                results: data,\n                show: true,\n                selectedResultId: null,\n            });\n            this.setNextSelectedId(0);\n        });\n    }\n\n    keyDown(e) {\n        switch (e.keyCode) {\n            case KEY_UP:\n                this.setNextSelectedId(-1);\n                break;\n            case KEY_DOWN: \n                this.setNextSelectedId(1);\n                break;\n            case KEY_ENTER:\n                if (this.state.selectedResultId)\n                    location.href = `/show/${this.state.selectedResultId}`;\n                break;\n        }\n    }\n\n    mouseOver(e) {\n        this.state.selectedResultId = parseInt(e.target.getAttribute('data-id'));\n        this.setNextSelectedId(0, true);\n    }\n\n    mouseOut(e) {\n        this.setState({selectedResultId: null});\n    }\n\n    setNextSelectedId(val, disableScroll) {\n        if (this.state.results.length == 0)\n            return;\n        let i = -1;\n        if (this.state.selectedResultId) {\n            i = 0;\n            for (let result of this.state.results) {\n                if (result.id == this.state.selectedResultId) {\n                    break;\n                }\n                i++;\n            }\n        }\n        i = i + val;\n        if (i < 0)\n            i = 0;\n        if (i > (this.state.results.length - 1))\n            i = this.state.results.length - 1;\n        let id = this.state.results[i].id;\n        this.setState({\n            selectedResultId: id,\n        });\n        if (disableScroll) \n            return;\n        let height = document.getElementById('sresult-'+id).offsetHeight;\n        if (((i+1) * height) > this.suggestNode.offsetHeight) {\n            let p = Math.floor(this.suggestNode.offsetHeight / height);\n            let g = (i-p+1);\n            let l = this.suggestNode.offsetHeight % height;\n            this.suggestNode.scrollTop = (g*height)+l;\n        } else {\n            this.suggestNode.scrollTop = 0;\n        }\n    }\n\n    submit(e) {\n        e.preventDefault();\n    }\n\n    click(e) {\n        if (this.state.selectedResultId)\n            location.href = `/show/${this.state.selectedResultId}`;\n    }\n\n    resultClassName(result) {\n        let className = 'result';\n        if (result.id == this.state.selectedResultId)\n            className += ' selected';\n        return className;\n    }\n\n    render() {\n        return (\n            <form \n                id=\"search\" \n                className=\"form-inline\" \n                onSubmit={this.onSubmit}                \n                ref={(ref) => this.form = ref}\n            >\n                <input \n                    className=\"form-control\" \n                    type=\"text\" \n                    placeholder=\"Search\" \n                    onChange={this.onInputChanged}\n                    onKeyDown={this.onKeyDown}\n                />\n                <div \n                    className=\"suggest\"\n                    ref={(ref) => this.suggestNode = ref}\n                    style={{display:this.state.show?'block':'none'}}\n                >\n                    {this.state.results.map(r => (\n                        <div \n                            key={r.id}\n                            id={`sresult-${r.id}`}\n                            data-id={r.id}\n                            href={`/show/${r.id}`} \n                            className={this.resultClassName(r)}\n                            onMouseOver={this.onMouseOver}\n                            onMouseOut={this.onMouseOut}\n                            onClick={this.onClick}\n                        >\n                            <div className=\"img\">\n                                <img \n                                    src={r.poster_image!=null?r.poster_image.url + '@SY100':''} \n                                />\n                            </div>\n                            <div className=\"title\">\n                                {r.title} ({r.premiered?r.premiered.substring(0, 4):''})\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </form>\n        )\n    }\n}\n\nexport default Search;","import React from 'react';\nimport {request} from 'api';\nimport {isAuthed, getUserLevel} from 'utils';\nimport Search from './Search';\nimport ChromecastIcon from './player/ChromecastIcon';\nimport ChromecastBar from './player/ChromecastBar';\n\nimport './Navbar.scss';\n\nclass Navbar extends React.Component {\n\n    renderShowDropdown() {\n        return (\n            <span className=\"dropdown\">\n                <a \n                    className=\"link dropdown-toggle\" \n                    data-toggle=\"dropdown\"\n                >\n                    Shows                      \n                </a>\n                <div className=\"dropdown-menu\">\n                    <a className=\"dropdown-item\" href=\"/countdown\">Countdown</a>\n                    <a className=\"dropdown-item\" href=\"/fan-of\">Fan of</a>\n                    <a className=\"dropdown-item\" href=\"/episodes-to-watch\">Episodes to Watch</a>\n                    <a className=\"dropdown-item\" href=\"/recently-aired\">Recently Aired</a>\n                    <a className=\"dropdown-item\" href=\"/shows-watched\">Watched</a>\n                    <a className=\"dropdown-item\" href=\"/user-shows-stats\">Stats</a>\n                    <div className=\"dropdown-divider\"></div>\n                    <a className=\"dropdown-item\" href=\"/show-new\">New show</a>\n                </div>\n            </span>\n        )\n    }\n\n    renderMain() {\n        return (\n            <a \n                className=\"link\" \n                href=\"/main\"\n            >\n                Main\n            </a>\n        )\n    }\n\n    renderAirDates() {\n        return (\n            <a \n                className=\"link\" \n                href=\"/air-dates\"\n            >\n                Air dates\n            </a>\n        )\n    }\n\n    renderUserMenu() {\n        if (!isAuthed())\n            return;\n        return (\n            <span className=\"dropdown\">\n                <a \n                    className=\"link dropdown-toggle\" \n                    data-toggle=\"dropdown\"\n                >\n                    <i className=\"fa fa-user\"></i>                      \n                </a>\n                <div className=\"dropdown-menu dropdown-menu-right\">\n                    <a className=\"dropdown-item\" href=\"/account\">Account</a>\n                    <a className=\"dropdown-item\" href=\"/play-servers\">Play servers</a>\n                    <div className=\"dropdown-divider\"></div>\n                    <a className=\"dropdown-item\" href=\"/sign-out\">Sign out</a>\n                </div>\n            </span>\n        )\n    }\n\n    renderChromecast() {\n        if (!isAuthed())\n            return;\n        return (               \n            <span className=\"link\">\n                <ChromecastBar />\n                <ChromecastIcon />\n            </span>\n        )    \n    }\n\n    renderSignIn() {\n        if (isAuthed()) \n            return;\n        return (\n            <a \n                className=\"link\" \n                href=\"/sign-in\"\n            >\n                Sign in\n            </a>\n        )\n    }\n\n    renderCreateUser() {\n        if (isAuthed()) \n            return;\n        return (\n            <a \n                className=\"link\" \n                href=\"/create-user\"\n            >\n                Create user\n            </a>\n        )\n    }\n\n    render() {\n        return (\n            <nav className=\"navbar-seplis\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-auto\">\n                            {this.renderMain()}\n                            {this.renderAirDates()}\n                            {this.renderShowDropdown()}\n                        </div>                        \n\n                        <div className=\"col-auto ml-auto order-sm-2 order-md-12\">\n                            {this.renderChromecast()}                            \n                            {this.renderCreateUser()}\n                            {this.renderSignIn()}\n                            {this.renderUserMenu()}\n                        </div>\n\n                        <div className=\"col-12 col-md-6 m-auto order-sm-12 order-md-2\">\n                            <Search key=\"Search\" />\n                        </div>\n                    </div>\n                </div>\n            </nav>\n        )\n    }\n\n}\n\nexport default Navbar;\n","import React from 'react';\nimport Loader from 'components/Loader';\nimport {requireAuthed, getUserId} from 'utils';\nimport {request} from 'api';\n\nclass UserShowsStats extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.state = {\n            loading: true,\n            stats: null,\n        }\n    }\n\n    componentDidMount() {\n        this.getStats();\n    }\n\n    getStats() {\n        let userId = getUserId();\n        request(`/1/users/${userId}/show-stats`).done((stats) => {\n            this.setState({\n                loading: false,\n                stats: stats,\n            });\n        });\n    }\n\n    render() {\n        if (this.state.loading)\n            return (\n                <span>\n                    <Loader />\n                    <center><h2>Loading your stats</h2></center>\n                </span>\n            );\n        return (\n            <span>\n            <h2>Your TV show stats</h2>\n            <table className=\"table table-striped\">\n                <tbody>\n                <tr><th width=\"220px\">Fan of</th>\n                    <td>{this.state.stats.fan_of} shows</td></tr>\n                <tr><th>Time spent watching</th>\n                    <td>{Math.round(((this.state.stats.episodes_watched_minutes/60)*10))/10} hours</td></tr>\n                <tr><th>Episodes watched</th>\n                    <td>{this.state.stats.episodes_watched}</td></tr>\n                <tr><th>Watched episodes from</th>\n                    <td>{this.state.stats.shows_watched} shows</td></tr>\n                </tbody>\n            </table>\n            </span>\n        )\n    }\n}\n\nexport default UserShowsStats;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withRouter} from 'react-router';\nimport Loader from 'components/Loader';\nimport {requireAuthed} from 'utils';\nimport {request} from 'api';\n\nconst propTypes = {\n    location: PropTypes.object.isRequired,\n}\n\nclass PlayServer extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onDelete = this.onDelete.bind(this);\n        this.onGiveAccess = this.onGiveAccess.bind(this);\n        this.onRemoveUserAccess = this.onRemoveUserAccess.bind(this);\n        this.state = {\n            loading: 0,\n            error: null,\n            success: false,\n            playServer: {\n                name: '',\n                url: '',\n                secret: '',\n            },\n            users: [],\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.location.query.id) {\n            this.getPlayServer();\n            this.getUsersWithAccess();\n        }\n    }\n\n    incLoading(val) {\n        this.setState((state) => {\n            return {loading: state.loading + val}\n        })\n    }\n\n    getPlayServer() {\n        this.incLoading(1);\n        request(\n            `/1/play-servers/${this.props.location.query.id}`\n        ).fail(e => {\n            // TODO: display the error...\n        }).done(data => {\n            this.setState({playServer: data});\n        }).always(() => {\n            this.incLoading(-1);\n        });\n    }\n\n    getUsersWithAccess() {\n        this.incLoading(1);\n        request(\n            `/1/play-servers/${this.props.location.query.id}/users`\n        ).fail(e => {\n            // TODO: display the error...\n        }).done(data => {\n            this.setState({users: data});\n        }).always(() => {\n            this.incLoading(-1);\n        });\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        let url = `/1/play-servers`;\n        if (this.props.location.query.id) {\n            url += `/${this.props.location.query.id}`;\n        }\n        request(url, {\n            method: this.props.location.query.id?'PUT':'POST',\n            data: {\n                name: this.name.value,\n                url: this.url.value,\n                secret: this.secret.value,\n            }\n        }).fail(e => {\n            this.setState({error: e.responseJSON});\n        }).done(data => {\n            this.props.router.push(`/play-server?id=${data.id}`);\n        });\n    }\n\n    onDelete(e) {\n        e.preventDefault();\n        if (!confirm('Are you sure you wan\\'t to delete this play server?'))\n            return;\n        request(`/1/play-servers/${this.props.location.query.id}`, {\n            method: 'DELETE',\n        }).fail(e => {\n            this.setState({error: e.responseJSON});\n        }).done(() => {\n            this.props.router.push('/play-servers');\n        });\n    }\n\n    onGiveAccess(e) {\n        e.preventDefault();\n        var value = e.target.name.value;\n        request('/1/users', {\n            query: {\n                username: value,\n            }\n        }).fail(e => {\n            alert(e.message);\n        }).done(data => {\n            if (data.length != 1) {\n                alert(`Unknown user: ${value}`);\n                return;\n            }\n            let id = this.props.location.query.id;\n            request(`/1/play-servers/${id}/users/${data[0].id}`, {\n               method: 'PUT',\n            }).fail(e => {\n                alert(e.message);\n            }).done(() => {\n                this.getUsersWithAccess();\n            });\n        });\n    }\n\n    onRemoveUserAccess(e) {\n        e.preventDefault();\n        let id = this.props.location.query.id;\n        request(`/1/play-servers/${id}/users/${e.target.userId.value}`, {\n           method: 'DELETE',\n        }).fail(e => {\n            alert(e.message);\n        }).done(() => {\n            this.getUsersWithAccess();\n        });\n    }\n\n    renderUsers() {\n        if (this.state.users.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    No one has access to this play server. \n                </div>\n            );\n        return (\n            <table className=\"table table-sm\">\n                <tbody>\n                    {this.state.users.map(u => (\n                        <tr key={u.id}>\n                            <td style={{verticalAlign: 'middle'}}>{u.name}</td>\n                            <td width=\"10px\" className=\"text-xs-right\">\n                                <form onSubmit={this.onRemoveUserAccess}>\n                                    <input \n                                        type=\"hidden\"\n                                        name=\"userId\"\n                                        value={u.id}\n                                    />\n                                    <button type=\"submit\" className=\"btn btn-danger\" title=\"Delete user\">\n                                        <i className=\"fa fa-times\"></i>\n                                    </button>\n                                </form>\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        )\n    }\n\n    renderGiveAccessForm() {\n        return (\n            <form className=\"col-margin row\" onSubmit={this.onGiveAccess}>\n                <div className=\"col-6\">\n                <input \n                    type=\"text\"\n                    name=\"name\"\n                    className=\"form-control dark-form-control\" \n                    placeholder=\"Username\"\n                />\n                </div>\n                <div className=\"col-4\">\n                <button className=\"btn btn-success\">\n                    Give access\n                </button>\n                </div>\n            </form>\n        )\n    }\n\n    renderUsersWithAccess() {\n        if (!this.props.location.query.id) return;\n        return (\n            <span>\n                <h2 className=\"col-margin\">Users with access</h2>\n                {this.renderGiveAccessForm()}\n                {this.renderUsers()}\n            </span>\n        )\n    }\n\n    renderDeleteButton() {\n        if (!this.props.location.query.id) return;\n        return (\n            <button className=\"btn btn-danger\" onClick={this.onDelete}>\n                Delete\n            </button>\n        )\n    }\n\n    renderError() {\n        if (!this.state.error) return;\n        return (\n            <div className=\"alert alert-warning capitalize-first-letter col-margin\">\n                <strong>{this.state.error.message}</strong>\n            </div>\n        )\n    }\n\n    renderFieldError(field) {\n        if ((!this.state.error) || ((!this.state.error.errors))) return;\n        for (let error of this.state.error.errors) {\n            if (error.field == field) {\n                return (\n                    <p className=\"text-danger\">{error.message}</p>\n                )\n            }\n        }\n    }\n\n    render2() {\n        if (this.state.loading > 0)\n            return <Loader />\n        return (\n            <div className=\"col-12 col-sm-8 col-md-6\">\n                {this.renderError()}\n                <form \n                    method=\"post\" \n                    className=\"col-margin\" \n                    onSubmit={this.onSubmit}\n                >\n                    <div className=\"form-group\">\n                        <label>Name</label>\n                        {this.renderFieldError('name')}\n                        <input\n                            ref={(ref) => (this.name = ref)}\n                            type=\"text\"\n                            className=\"form-control dark-form-control\"\n                            defaultValue={this.state.playServer.name}\n                            placeholder=\"My play server\"\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>URL</label>\n                        {this.renderFieldError('url')}\n                        <input\n                            ref={(ref) => (this.url = ref)}\n                            type=\"text\"\n                            className=\"form-control dark-form-control\"\n                            defaultValue={this.state.playServer.url}\n                            placeholder=\"https://example.net\"\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Secret</label>\n                        {this.renderFieldError('secret')}\n                        <input\n                            ref={(ref) => (this.secret = ref)}\n                            type=\"text\"\n                            className=\"form-control dark-form-control\"\n                            defaultValue={this.state.playServer.secret}\n                            placeholder=\"A super long secret\"\n                        />\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-primary m-r-1\">\n                        Save\n                    </button> \n                    {this.renderDeleteButton()}\n                </form>\n\n                {this.renderUsersWithAccess()}\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <h1 className=\"col-margin\">Play server</h1>\n                </div>\n                {this.render2()}\n            </div>\n        )\n    }\n}\nPlayServer.propTypes = propTypes;\n\nexport default withRouter(PlayServer);","import React from 'react';\nimport {Link} from 'react-router';\nimport Loader from 'components/Loader';\nimport {requireAuthed} from 'utils';\nimport {request} from 'api';\n\nclass PlayServers extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.state = {\n            loading: true,\n            playServers: [],\n        }\n    }\n\n    componentDidMount() {\n        this.getPlayServers();\n    }\n\n    getPlayServers() {\n        this.setState({loading: true});\n        request(`/1/play-servers`, {\n            body: {\n                per_page: 100,\n            }\n        }).done(data => {\n            this.setState({playServers: data, loading: false});\n        });\n    }\n\n    renderPlayServers() {\n        if (this.state.playServers.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    You have no play servers.\n                </div>\n            );\n        return (\n            <table className=\"table\">\n            <tbody>\n            {this.state.playServers.map(s => (\n                <tr key={s.id}>\n                    <td>{s.name}</td>\n                    <td>{s.url}</td>\n                    <td width=\"10px\">\n                        <Link to={`/play-server?id=${s.id}`}>\n                            <i className=\"fa fa-pencil-square-o\"></i>\n                        </Link>\n                    </td>\n                </tr>\n            ))}\n            </tbody>\n            </table>\n        )\n    }\n\n    render2() {\n        if (this.state.loading)\n            return <Loader />;\n        return (\n            <div className=\"col-12 col-sm-7 col-md-5\">\n                <Link \n                    to=\"/play-server\"\n                    className=\"btn btn-success col-margin\"\n                >\n                    New play server\n                </Link>\n                {this.renderPlayServers()}\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <h1 className=\"col-margin\">Play servers</h1>\n                </div>\n                {this.render2()}\n            </div>\n        )\n    }\n}\n\nexport default PlayServers;","import React from 'react';\nimport {requireAuthed} from 'utils';\nimport {request} from 'api';\n\n\nclass Password extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.state = {\n            error: null,\n            success: null,\n            loading: false,\n        }\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        this.setState({error:null, success: null, loading: true});\n        request('/1/users/current/change-password', {\n            data: {\n                'password': this.password.value,\n                'new_password': this.newPassword.value,\n            }\n        }).fail(e => {\n            this.password.focus();\n            this.setState({error: e.responseJSON, loading: false});\n        }).done(() => {\n            this.setState({success: true, loading: false});\n        }).always(() => {            \n            this.password.value = '';\n            this.newPassword.value = '';\n        });\n    }\n\n    renderError() {\n        if (!this.state.error) return;\n        return (\n            <div className=\"alert alert-warning capitalize-first-letter\">\n                <strong>{this.state.error.message}</strong>\n            </div>\n        )\n    }\n\n    renderFieldError(field) {\n        if ((!this.state.error) || ((!this.state.error.errors))) return;\n        for (let error of this.state.error.errors) {\n            if (error.field == field) {\n                return (\n                    <p className=\"text-danger\">{error.message}</p>\n                )\n            }\n        }\n    }\n\n    renderSuccess() {\n        if (!this.state.success) return;\n        return (\n            <div className=\"alert alert-success\">\n                <strong>Your password was successfully changed.</strong>\n            </div>\n        )\n    }\n\n    renderButton() {\n        if (this.state.loading == false)\n            return (\n                <button type=\"submit\" className=\"btn btn-primary\">Save</button>\n            );\n        if (this.state.loading == true) \n            return (\n                <button type=\"submit\" className=\"btn btn-primary\" disabled={true}>\n                    Changing your password...\n                </button>\n            );        \n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <h1 className=\"col-margin\">Change password</h1>\n                </div>\n                <div className=\"col-12 col-sm-8 col-md-6\">\n                    {this.renderSuccess()}\n                    {this.renderError()}\n                    <form method=\"post\" onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                            <label>Current password</label>\n                            {this.renderFieldError('password')}\n                            <input \n                                ref={(ref) => (this.password = ref)}\n                                type=\"password\"\n                                name=\"password\"\n                                className=\"form-control dark-form-control\" \n                            />\n                        </div>                        \n                        <div className=\"form-group\">\n                            <label>New password</label>\n                            {this.renderFieldError('new_password')}\n                            <input \n                                ref={(ref) => (this.newPassword = ref)}\n                                type=\"password\"\n                                name=\"new_password\"\n                                className=\"form-control dark-form-control\"\n                            />\n                        </div>\n                        {this.renderButton()}\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Password;","import React from 'react';\nimport {requireAuthed} from 'utils';\n\nclass Account extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <h1>Account</h1>\n                </div>\n                <div className=\"col-12\">\n                    <a href=\"/password\">Change password</a>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Account;","import React from 'react';\nimport {request} from 'api';\nimport {getUserId} from 'utils';\nimport Loader from 'components/Loader';\nimport ShowList from 'components/shows/List';\n\nconst oneDay = 24*60*60*1000;\nconst weekdays = [\n    'Sunday',\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n];\n\nclass Main extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            loading: true,\n            data: [],\n        }\n    }\n\n    componentDidMount() {\n        this.getData();\n    }\n\n    getData() {\n        request(`/1/users/${getUserId()}/air-dates`)\n            .done((data) => {\n                this.setState({\n                    loading: false,\n                    data: data,\n                });\n            });\n    }\n\n    renderWeekday(date) {\n        let d = new Date(date);\n        return weekdays[d.getDay()];\n    }\n\n    renderHeaderDate(date) {\n        let d1 = Date.parse(date);\n        let d2 = Date.now();\n        let days = Math.round(\n            Math.ceil(\n                (d1 - d2) / oneDay\n            )\n        );\n        switch (days) {\n            case -1:\n                return (<span>Yesterday <small className=\"text-muted\">{this.renderWeekday(date)}</small></span>);\n                break;\n            case 0:\n                return (<span>Today <small className=\"text-muted\">{this.renderWeekday(date)}</small></span>);;\n                break;\n            case 1: \n                return (<span>Tomorrow <small className=\"text-muted\">{this.renderWeekday(date)}</small></span>);;\n                break;\n            default:\n                return this.renderWeekday(date);\n                break;\n        }\n    }\n\n    renderMain() {\n        if (this.state.data.length == 0)\n            return (\n                <div className=\"alert alert-info\">\n                    <h1>There's nothing to watch this week!</h1>\n                    But, how can this be?<br />\n                    Well, you're properly not a fan of any shows that has \n                    episodes airing this week.\n                </div>\n            );\n        else\n            return (\n                <span>\n                    {this.state.data.map(a => (\n                    <span key={a.air_date}>\n                        <h3 className=\"header header-border\" title={a.air_date}>\n                            {this.renderHeaderDate(a.air_date)}\n                        </h3>\n                        <ShowList \n                            shows={a.shows} \n                        />\n                    </span>\n                    ))}\n                </span>\n            );\n    }\n\n    render() {\n        if (this.state.loading)\n            return <Loader />;\n        return this.renderMain();\n    }\n}\n\nexport default Main;","import React from 'react';\nimport ShowsAirDates from 'components/shows/AirDates';\nimport {requireAuthed} from 'utils';\n\nclass AirDates extends React.Component {    \n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n    }\n\n\n    render() {\n        return (\n            <ShowsAirDates />\n        )\n    }\n}\n\nexport default AirDates;","import React from 'react';\nimport Loader from 'seplis/components/Loader';\nimport ShowsWatched, {getWatched} from 'components/shows/Watched';\nimport ShowsCountdown, {getCountdown} from 'components/shows/Countdown';\nimport ShowsRecentlyAired, {getRecentlyAired} from 'components/shows/RecentlyAired';\nimport ShowsEpisodesToWatch, {getEpisodesToWatch} from 'components/shows/EpisodesToWatch';\nimport {requireAuthed} from 'utils';\n\nclass Main extends React.Component {\n    \n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.visChange = this.visibilitychange.bind(this);\n        document.addEventListener('visibilitychange', this.visChange);\n        this.state = {\n            key: 0,\n            loading: true,\n            failed: false,\n        }\n    }\n\n    componentDidMount() {\n        this.getData();\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('visibilitychange', this.visChange);\n    }\n\n    getData() {\n        this.setState({\n            loading: true,\n            failed: false,\n        });\n        Promise.all([\n            getWatched(6, 1),\n            getCountdown(6, 1),\n            getRecentlyAired(6, 1),\n            getEpisodesToWatch(6, 1),\n        ]).then((result) => {\n            this.setState({\n                'loading': false,\n                'failed': false,\n                'watched': result[0].items,\n                'countdown': result[1].items,\n                'recentlyWatched': result[2].items,\n                'episodesToWatch': result[3].items,\n            })\n        }).catch(() => {\n            this.setState({\n                loading: false,\n                failed: true,\n                key: this.state.key + 1,\n            })\n        });\n    }\n\n    visibilitychange() {\n        if (document.hidden) return;\n        this.getData();\n    }\n\n    render() {\n        if (this.state.failed)\n            return (\n                <div className=\"alert alert-warning\">\n                    Failed to load, try refreshing.\n                </div>\n            )\n        if (this.state.loading)\n            return <Loader />;\n        return (\n            <span>\n            <h2 className=\"header header-border\">\n                <a href=\"/shows-watched\">Recently watched</a>\n            </h2>    \n            <div className=\"slider mb-2\">\n                <ShowsWatched key={`sw-${this.state.key}`} items={this.state.watched} />\n            </div>\n\n            <h2 className=\"header header-border\">\n                <a href=\"/recently-aired\">Recently Aired</a>\n            </h2>\n            <div className=\"slider mb-2\">\n                <ShowsRecentlyAired key={`sra-${this.state.key}`} items={this.state.recentlyWatched} />\n            </div>\n\n            <h2 className=\"header header-border\">\n                <a href=\"/countdown\">Countdown</a>\n            </h2>\n            <div className=\"slider mb-2\">\n                <ShowsCountdown key={`sc-${this.state.key}`} items={this.state.countdown} />\n            </div>            \n\n            <h2 className=\"header header-border\">\n                <a href=\"/episodes-to-watch\">Episodes To Watch</a>\n            </h2>\n            <div className=\"slider mb-2\">\n                <ShowsEpisodesToWatch key={`etw-${this.state.key}`} items={this.state.episodesToWatch} />\n            </div>\n            </span>\n        )\n    }\n}\n\nexport default Main;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport {request} from 'api';\nimport Loader from 'components/Loader';\nimport Pagination from 'components/Pagination';\nimport EpisodesToWatchList from 'components/shows/EpisodesToWatch.jsx';\nimport {getEpisodesToWatch} from 'components/shows/EpisodesToWatch.jsx';\nimport {requireAuthed} from 'utils';\n\nclass EpisodesToWatch extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onPageChange = this.pageChange.bind(this);\n        this.state = {\n            loading: true,\n            items: [],\n            jqXHR: null,\n            page: this.props.location.query.page || 1,\n        }\n    }\n\n    setBrowserPath() {\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                page: this.state.page,\n            },\n        });\n    }\n\n    pageChange(e) {\n        this.setState({\n            page: e.target.value,\n            loading: true,\n        }, () => {\n            this.setBrowserPath();\n            this.getItems();\n        });\n    }\n\n    componentDidMount() {\n        this.getItems();\n    }\n\n    getItems() {\n        getEpisodesToWatch(60, this.state.page).then((data) => {\n            this.setState({\n                items: data.items,\n                jqXHR: data.jqXHR,\n                loading: false,\n            })\n        });\n    }\n\n    render() {\n        if (this.state.loading==true)\n            return (\n                <span>\n                    <h2 className=\"header\">Episodes to Watch</h2>\n                    <Loader />\n                </span>\n            );\n        return (\n            <span>\n                <div className=\"row\">\n                    <div className=\"col-12 col-sm-9 col-md-10\">\n                        <h2 className=\"header\">Episodes to Watch</h2>\n                    </div>\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n                <EpisodesToWatchList items={this.state.items} />\n                <div className=\"row\">\n                    <div className=\"col-sm-9 col-md-10\" />\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default EpisodesToWatch;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport {request} from 'api';\nimport Loader from 'components/Loader';\nimport Pagination from 'components/Pagination';\nimport ShowsRecentlyAired from 'components/shows/Countdown.jsx';\nimport {getCountdown} from 'components/shows/Countdown.jsx';\nimport {requireAuthed} from 'utils';\n\nclass Countdown extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onPageChange = this.pageChange.bind(this);\n        this.state = {\n            loading: true,\n            items: [],\n            jqXHR: null,\n            page: this.props.location.query.page || 1,\n        }\n    }\n\n    setBrowserPath() {\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                page: this.state.page,\n            },\n        });\n    }\n\n    pageChange(e) {\n        this.setState({\n            page: e.target.value,\n            loading: true,\n        }, () => {\n            this.setBrowserPath();\n            this.getItems();\n        });\n    }\n\n    componentDidMount() {\n        this.getItems();\n    }\n\n    getItems() {\n        getCountdown(60, this.state.page).then((data) => {\n            this.setState({\n                items: data.items,\n                jqXHR: data.jqXHR,\n                loading: false,\n            })\n        });\n    }\n\n    render() {\n        if (this.state.loading==true)\n            return (\n                <span>\n                    <h2 className=\"header\">Countdown</h2>\n                    <Loader />\n                </span>\n            );\n        return (\n            <span>\n                <div className=\"row\">\n                    <div className=\"col-12 col-sm-9 col-md-10\">\n                        <h2 className=\"header\">Countdown</h2>\n                    </div>\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n                <ShowsRecentlyAired items={this.state.items} />\n                <div className=\"row\">\n                    <div className=\"col-sm-9 col-md-10\" />\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default Countdown;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport {request} from 'api';\nimport Loader from 'components/Loader';\nimport Pagination from 'components/Pagination';\nimport Watched from 'components/shows/Watched.jsx';\nimport {getWatched} from 'components/shows/Watched.jsx';\nimport {requireAuthed} from 'utils';\n\nclass ShowsWatched extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onPageChange = this.pageChange.bind(this);\n        this.state = {\n            loading: true,\n            items: [],\n            jqXHR: null,\n            page: this.props.location.query.page || 1,\n            totalCount: '...',\n        }\n    }\n\n    setBrowserPath() {\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                page: this.state.page,\n            },\n        });\n    }\n\n    pageChange(e) {\n        this.setState({\n            page: e.target.value,\n            loading: true,\n        }, () => {\n            this.setBrowserPath();\n            this.getItems();\n        });\n    }\n\n    componentDidMount() {\n        this.getItems();\n    }\n\n    getItems() {\n        getWatched(60, this.state.page).then((data) => {\n            this.setState({\n                items: data.items,\n                jqXHR: data.jqXHR,\n                loading: false,\n                totalCount: data.jqXHR.getResponseHeader('X-Total-Count'),\n            })\n        });\n    }\n\n    render() {\n        if (this.state.loading==true)\n            return (\n                <span>\n                    <h2 className=\"header\">Watched {this.state.totalCount} shows</h2>\n                    <Loader />\n                </span>\n            );\n        return (\n            <span>\n                <div className=\"row\">\n                    <div className=\"col-12 col-sm-9 col-md-10\">                        \n                        <h2 className=\"header\">Watched {this.state.totalCount} shows</h2>\n                    </div>\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n                <Watched items={this.state.items} />\n                <div className=\"row\">\n                    <div className=\"col-sm-9 col-md-10\" />\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default ShowsWatched;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport {request} from 'api';\nimport Loader from 'components/Loader';\nimport Pagination from 'components/Pagination';\nimport ShowsRecentlyAired from 'components/shows/RecentlyAired.jsx';\nimport {getRecentlyAired} from 'components/shows/RecentlyAired.jsx';\nimport {requireAuthed} from 'utils';\n\nclass RecentlyAired extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onPageChange = this.pageChange.bind(this);\n        this.state = {\n            loading: true,\n            items: [],\n            jqXHR: null,\n            page: this.props.location.query.page || 1,\n        }\n    }\n\n    setBrowserPath() {\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                page: this.state.page,\n            },\n        });\n    }\n\n    pageChange(e) {\n        this.setState({\n            page: e.target.value,\n            loading: true,\n        }, () => {\n            this.setBrowserPath();\n            this.getItems();\n        });\n    }\n\n    componentDidMount() {\n        this.getItems();\n    }\n\n    getItems() {\n        getRecentlyAired(60, this.state.page).then((data) => {\n            this.setState({\n                items: data.items,\n                jqXHR: data.jqXHR,\n                loading: false,\n            })\n        });\n    }\n\n    render() {\n        if (this.state.loading==true)\n            return (\n                <span>\n                    <h2 className=\"header\">Recently aired</h2>\n                    <Loader />\n                </span>\n            );\n        return (\n            <span>\n                <div className=\"row\">\n                    <div className=\"col-12 col-sm-9 col-md-10\">\n                        <h2 className=\"header\">Recently aired</h2>\n                    </div>\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n                <ShowsRecentlyAired items={this.state.items} />\n                <div className=\"row\">\n                    <div className=\"col-sm-9 col-md-10\" />\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default RecentlyAired;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport {request} from 'api';\nimport {getUserId} from 'utils';\nimport Loader from 'components/Loader';\nimport Pagination from 'components/Pagination';\nimport ShowList from 'components/shows/List.jsx';\nimport {requireAuthed} from 'utils';\n\nclass FanOf extends React.Component {\n\n    constructor(props) {\n        super(props);\n        requireAuthed();\n        this.onPageChange = this.pageChange.bind(this);\n        this.state = {\n            loading: true,\n            shows: [],\n            jqXHR: null,\n            totalCount: '...',\n            page: this.props.location.query.page || 1,\n        }\n    }\n\n    setBrowserPath() {\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                page: this.state.page,\n            },\n        });\n    }\n\n    pageChange(e) {\n        this.setState({\n            page: e.target.value,\n            loading: true,\n        }, () => {\n            this.setBrowserPath();\n            this.getShows();\n        });\n    }\n\n    componentDidMount() {\n        this.getShows();\n    }\n\n    getShows() {\n        let userId = getUserId();\n        request(`/1/users/${userId}/fan-of`, {\n            query: {\n                page: this.state.page,\n                per_page: 60,\n            }\n        }).done((shows, textStatus, jqXHR) => {\n            this.setState({\n                shows: shows,\n                loading: false,\n                jqXHR: jqXHR,\n                totalCount: jqXHR.getResponseHeader('X-Total-Count'),\n            });\n        });\n    }\n\n    render() {\n        if (this.state.loading==true)\n            return (\n                <span>\n                    <h2>Fan of {this.state.totalCount} shows</h2>\n                    <Loader />\n                </span>\n            );\n        return (\n            <span>\n                <div className=\"row\">\n                    <div className=\"col-12 col-sm-9 col-md-10\">\n                        <h2 className=\"header\">\n                            Fan of {this.state.totalCount} shows\n                        </h2>\n                    </div>\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n                <ShowList shows={this.state.shows} />\n                <div className=\"row\">\n                    <div className=\"col-sm-9 col-md-10\" />\n                    <div className=\"col-sm-3 col-md-2\">\n                        <Pagination \n                            jqXHR={this.state.jqXHR} \n                            onPageChange={this.onPageChange}\n                        />\n                    </div>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default FanOf;","import React from 'react';\nimport {request, apiClientSettings} from 'api';\nimport {withRouter} from 'react-router';\n\nimport 'styles/StandardForm.scss';\n\nclass CreateUser extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n        }\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        this.setState({\n            error: null,\n        });\n        var email = e.target.email.value;\n        var password = e.target.password.value;\n        request('/1/users', {\n            data: {\n                name: e.target.name.value,\n                email: email,\n                password: password,\n            }\n        }).fail(e => {\n            this.setState({\n                error: e.responseJSON,\n            });\n        }).done(data => {\n            localStorage.setItem('user_id', data.id);\n            localStorage.setItem('user_level', data.level);\n            this.signin(email, password);\n        });\n    }\n\n    signin(email, password) {\n        request('/1/token', {\n            data: {\n                client_id: apiClientSettings.clientId,\n                grant_type: 'password',\n                email: email,\n                password: password,\n            }\n        }).fail(e => {\n            this.setState({\n                error: e.responseJSON,\n            });\n        }).done(data => {\n            localStorage.setItem('access_token', data.access_token);\n            location.href = '/';\n        });\n    }\n\n    renderForm() {\n        return (\n            <form onSubmit={this.onSubmit}>\n                <div className=\"form-group\">\n                    <label>Username</label>\n                    {this.renderFieldError('name')}\n                    <input \n                        name=\"name\"\n                        type=\"text\"\n                        className=\"form-control dark-form-control\"\n                        autoFocus\n                        required\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>Email</label>\n                    {this.renderFieldError('email')}\n                    <input \n                        name=\"email\"\n                        type=\"text\"\n                        className=\"form-control dark-form-control\" \n                        placeholder=\"test@example.net\"\n                        required\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>Password</label>\n                    {this.renderFieldError('password')}\n                    <input\n                        name=\"password\"\n                        type=\"password\"\n                        className=\"form-control dark-form-control\" \n                        placeholder=\"Minimum 6 chars\"\n                        required\n                    />\n                </div>\n                <a className=\"btn\" href=\"/sign-in\">Sign in</a>\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary pull-right\"\n                >\n                    Create user\n                </button>\n            </form>\n        )\n    }\n\n    renderError() {\n        if (!this.state.error) return;\n        return (\n            <div className=\"alert alert-warning capitalize-first-letter\">\n                <strong>{this.state.error.message}</strong>\n            </div>\n        )\n    }\n\n    renderFieldError(field) {\n        if ((!this.state.error) || ((!this.state.error.errors))) return;\n        for (let error of this.state.error.errors) {\n            if (error.field == field) {\n                return (\n                    <p className=\"text-danger\">{error.message}</p>\n                )\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"standard-form\">\n                <div className=\"logo\">SEPLIS</div>\n                <div className=\"title\">Create user</div>\n                {this.renderError()}\n                {this.renderForm()}\n            </div>            \n        )\n    }\n}\n\nexport default withRouter(CreateUser);","import React from 'react';\n\nclass SignOut extends React.Component {\n\n    componentDidMount() {\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('user_id');\n        localStorage.removeItem('accessLevel');\n        location.href = '/sign-in';\n    }\n\n    render() {\n        return null;\n    }\n}\n\nexport default SignOut;","import React from 'react';\nimport $ from 'jquery';\nimport {request, apiClientSettings} from 'api';\n\nimport 'styles/StandardForm.scss';\n\nclass SignIn extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: '',\n            email: '',\n            password: '',\n        }\n        this.onSignIn = this.onSignIn.bind(this);\n        this.onDataChange = this.onDataChange.bind(this);\n    }\n\n    onSignIn(e) {\n        e.preventDefault();\n        request('/1/token', {\n            data: {\n                client_id: apiClientSettings.clientId,\n                grant_type: 'password',\n                email: this.state.email,\n                password: this.state.password,\n            }\n        }).fail(e => {\n            this.setState({\n                error: e.responseJSON.message,\n                password: '',\n            });\n        }).done(data => {\n            localStorage.setItem('access_token', data.access_token);\n            this.saveUserIdAndRedirect();\n        });\n    }\n\n    saveUserIdAndRedirect() {\n        request('/1/users/current').done(user => {\n            localStorage.setItem('user_id', user.id);\n            localStorage.setItem('user_level', user.level);\n            location.href = '/';\n        });\n    }\n\n    onDataChange(e) {\n        this.state[e.target.name] = e.target.value;\n        this.setState({error:''});\n    }\n\n    renderForm() {\n        return (\n            <form onSubmit={this.onSignIn}>\n                <div className=\"form-group\">\n                    <input \n                        name=\"email\"\n                        type=\"text\"\n                        className=\"form-control dark-form-control\" \n                        placeholder=\"Email or name\"\n                        onChange={this.onDataChange}\n                        value={this.state.email}\n                        autoFocus\n                        required\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <input\n                        name=\"password\"\n                        type=\"password\"\n                        className=\"form-control dark-form-control\" \n                        placeholder=\"Password\"\n                        onChange={this.onDataChange}\n                        value={this.state.password}\n                        required\n                    />\n                </div>\n                <a className=\"btn\" href=\"/create-user\">Create user</a>\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary pull-right\"\n                >\n                    Sign in\n                </button>\n            </form>\n        )\n    }\n\n    renderError() {\n        if (!this.state.error) return;\n        return (\n            <div \n                className=\"alert alert-warning capitalize-first-letter\" \n                role=\"alert\"\n            >\n                <strong>{this.state.error}</strong>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"standard-form\">\n                <div className=\"logo\">SEPLIS</div>\n                <div className=\"title\">Sign in</div>\n                {this.renderError()}\n                {this.renderForm()}\n            </div>            \n        )\n    }\n}\n\nexport default SignIn;","import React from 'react';\nimport EditFields from 'components/shows/EditFields';\nimport Serialize from 'form-serialize';\nimport {unflatten} from 'flat';\nimport {request} from 'api';\n\nclass New extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onSubmit = this.submit.bind(this);\n        this.state = {\n            success: null,\n            error: null,\n            loading: false,\n        }\n    }\n\n    submit(e) {\n        e.preventDefault();\n        this.setState({\n            success: null,\n            error: null,\n            loading: true,\n        })\n        let data = unflatten(\n            Serialize(e.target, {hash: true})\n        );\n        request('/1/shows', {\n            data: data,\n            method: 'POST',\n        }).done(show => {\n            this.setState({success: show})\n        }).fail(e => {\n            this.setState({error: e.responseJSON});\n        }).always(() => {\n            this.setState({loading: false});\n        });\n    }\n\n    renderError() {\n        if (!this.state.error) return '';\n        switch (this.state.error.code) {\n            case 1403:\n                let title = this.state.error.extra.show.title || 'the show';\n                return (\n                    <div className=\"alert alert-danger\">\n                        {this.state.error.message}.<br />\n                        <a href={`/show/${this.state.error.extra.show.id}`}>\n                            Go to {title}\n                        </a>.\n                    </div>\n                )\n               break;\n            default: \n                return (\n                    <div className=\"alert alert-danger\">\n                        {this.state.error.message}\n                    </div>\n                )\n                break;\n        }\n    }\n\n    renderSuccess() {\n        return (\n            <span>\n            <h1>Show successfully created</h1>\n            <div className=\"alert alert-success\">\n                The show has been created. It will be imported shortly.\n                <ul>\n                    <li><a href={`/show/${this.state.success.id}`}>Go to the show</a></li>\n                    <li><a href=\"/show-new\">Create another show</a></li>\n                </ul>\n            </div>\n            </span>\n        )        \n    }\n\n    render() {\n        if (this.state.success != null)\n            return this.renderSuccess();\n\n        return (\n            <form method=\"post\" onSubmit={this.onSubmit}>\n                <h1>New show</h1>\n                <EditFields />\n                {this.renderError()}\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary\"\n                    disabled={this.state.loading}\n                >\n                    {this.state.loading?'Creating...':'Create'}\n                </button>\n            </form>\n        )\n    }\n}\n\nexport default New;","import React from 'react';\nimport Player, {getPlayServer} from 'components/player/Player';\nimport Loader from 'components/Loader';\nimport Chromecast from 'components/player/Chromecast';\nimport {request} from 'api';\nimport {apiClientSettings} from 'api.jsx';\nimport {pad, episodeTitle, guid} from 'utils';\n \nclass PlayEpisode extends React.Component {\n \n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingPlayServers: true,\n            loadingShow: true,\n            loadingEpisode: true,\n            loadingNextEpisode: true,\n            loadingLang: true,\n            loadingStartTime: true,\n            playServer: null,\n            playServerError: null,\n            show: null,\n            episode: null,\n            nextEpisode: null,\n            audio_lang: null,\n            subtitle_lang: null,\n            metadata: null,\n            startTime: 0,\n        }        \n        this.onAudioChange = this.audioChange.bind(this);\n        this.onSubtitleChange = this.subtitleChange.bind(this);\n        this.onTimeUpdate = this.timeUpdate.bind(this);\n \n        this.showId = this.props.params.showId;\n        this.number = this.props.params.number;\n        this.session = guid();\n        this.lastPos = 0;\n        this.cast = null;\n        this.markedAsWatched = false;\n    }\n \n    componentDidMount() {\n        this.getShow();\n        this.getEpisode();\n        this.getPlayServers();\n        this.getNextEpisode();\n        this.getLanguage();\n        this.getStartTime();\n    }\n \n    timeUpdate(time) {\n        time = Math.floor(time);\n        if (time == this.lastPos) \n            return;\n        this.lastPos = time;\n        if (time < 10)\n            return;\n        if ((time % 10) != 0) \n            return;\n        let duration = parseInt(this.state.metadata['format']['duration']);\n        let watched = (((time / 100) * 10) > (duration-time));\n        if (watched) {\n            if (!this.markedAsWatched) {\n                request(`/1/shows/${this.showId}/episodes/${this.number}/watched`, {\n                    method: 'PUT',\n                }).done(() => {\n                    this.markedAsWatched = true;\n                });\n            }\n        } else {\n            this.markedAsWatched = false;\n            request(`/1/shows/${this.showId}/episodes/${this.number}/position`, {\n                method: 'PUT',\n                data: {\n                    'position': time,\n                }\n            });\n        }\n    }\n \n    getPlayServers() {\n        let url = `/1/shows/${this.showId}/episodes/${this.number}/play-servers`;\n        getPlayServer(url).then((obj) => {\n            this.setState({\n                loadingPlayServers: false,\n                playServer: obj.playServer,\n                metadata: obj.metadata,\n            });\n        }).catch((error) => {\n            this.setState({\n                loadingPlayServers: false,\n                playServerError: error,\n            })\n        });\n    }\n \n    getShow() {\n        request(\n            `/1/shows/${this.showId}`\n        ).done(data => {\n            this.setState({show: data});\n        }).always(() => {\n            this.setState({loadingShow: false});\n        });        \n    }\n \n    getEpisode() {\n        let number = parseInt(this.number);\n        request(\n            `/1/shows/${this.showId}/episodes/${number}`\n        ).done(data => {\n            this.setState({episode: data});\n        }).always(() => {\n            this.setState({loadingEpisode: false});\n        });\n    }    \n \n    getNextEpisode() {\n        let number = parseInt(this.number) + 1;\n        request(\n            `/1/shows/${this.showId}/episodes/${number}`\n        ).done(data => {\n            this.setState({nextEpisode: data});\n        }).always(() => {\n            this.setState({loadingNextEpisode: false});\n        });\n    }\n \n    getLanguage() {\n        request(\n            `/1/shows/${this.showId}/user-subtitle-lang`\n        ).done(data => {\n            if (!data)\n                data = {};\n            this.setState({\n                audio_lang: data.audio_lang || null,\n                subtitle_lang: data.subtitle_lang || null,\n            });\n        }).always(() => {\n            this.setState({loadingLang: false});\n        });\n    }\n \n    getStartTime() {\n        request(\n            `/1/shows/${this.showId}/episodes/${this.number}/watched`\n        ).done(data => {\n            if (data) {\n                this.setState({\n                    startTime: data.position,\n                });\n            } else {\n                this.setState({\n                    startTime: 0,\n                });                \n            }\n        }).always(() => {\n            this.setState({loadingStartTime: false});\n        });\n    }\n \n    audioChange(lang) {\n        if (lang == '') \n            lang = null;\n        this.saveSub({\n            audio_lang: lang,\n        });\n    } \n \n    subtitleChange(lang) {\n        if (lang == '') \n            lang = null;\n        this.saveSub({\n            subtitle_lang: lang,\n        });\n    }\n \n    saveSub(data) {\n        request(`/1/shows/${this.showId}/user-subtitle-lang`, {\n            method: 'PATCH',\n            data: data,\n        })\n    }\n \n    getInfo() {\n        if (!this.state.show) return null;\n        return {\n            title: this.state.show.title,\n        }\n    }\n \n    episodeTitle(show, episode) {\n        return episodeTitle(show, episode);\n    }\n \n    getPlayNextInfo() {\n        if (!this.state.show || !this.state.nextEpisode) return null;\n        let show = this.state.show;\n        let episode = this.state.nextEpisode;\n        let title = this.episodeTitle(show, episode);\n        return {\n            title: title,\n            url: `/show/${show.id}/episode/${episode.number}/play`\n        }\n    }\n \n    getBackToInfo() {\n        if (!this.state.show) return null;\n        return {\n            title: `Back to: ${this.state.show.title}`,\n            url: `/show/${this.showId}`\n        }\n    }\n \n    getCurrentInfo() {\n        if (!this.state.show || !this.state.episode) return null;\n        let show = this.state.show;\n        let title = `${show.title} - `;\n        title += this.episodeTitle(show, this.state.episode);\n        return {\n            title: title,\n        }\n    }\n  \n    initCast() {\n        this.cast.addEventListener(\n            'isConnected',\n            (e) => {\n                if (!e.value) \n                    return;\n                if (!confirm(`Play ${this.getCurrentInfo().title} on ${this.cast.getFriendlyName()}?`))\n                    return;\n                request(this.getPlayUrl()+'&action=cancel');\n                this.cast.playEpisode(this.showId, this.number).then(() => {\n                    location.href = `/show/${this.showId}`;\n                });\n            },\n        );\n    }\n \n    loadCast() {\n        if (this.cast)\n            return;    \n        this.cast = new Chromecast();\n        this.cast.load(this.initCast.bind(this));\n    }    \n \n    getPlayUrl() {\n        return `${this.state.playServer.play_url}/play`+\n            `?play_id=${this.state.playServer.play_id}`+\n            `&session=${this.session}`\n    }\n\n    renderPlayServerErrorMessage() {\n        if (this.state.playServerError.code == 2) {\n            return (\n                <span>\n                    <b>\n                    {this.state.show.title} {episodeTitle(this.state.show, this.state.episode)}\n                    </b> is not on any of your play servers.\n                </span>\n            )\n        }\n        return this.state.playServerError.message;\n    }\n\n    renderPlayServerError() {\n        return (\n            <div \n                className=\"alert alert-warning\" \n                style={{width: '75%', margin: 'auto', marginTop: '100px'}}\n            >\n                <h3>{this.renderPlayServerErrorMessage()}</h3>\n\n                Go back to <a href={`/show/${this.showId}`}>\n                    {this.state.show.title}\n                </a>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.loadingPlayServers || this.state.loadingShow ||\n            this.state.loadingEpisode || this.state.loadingNextEpisode ||\n            this.state.loadingLang || this.state.loadingStartTime)\n            return <Loader />;\n        if (this.state.playServerError) {\n            return this.renderPlayServerError();\n        }\n        this.loadCast();\n        return <Player \n            playServerUrl={`${this.state.playServer.play_url}`}\n            playId={this.state.playServer.play_id}\n            metadata={this.state.metadata}\n            info={this.getInfo()}\n            nextInfo={this.getPlayNextInfo()}\n            backToInfo={this.getBackToInfo()}\n            currentInfo={this.getCurrentInfo()}\n            onAudioChange={this.onAudioChange}\n            onSubtitleChange={this.onSubtitleChange}\n            audio_lang={this.state.audio_lang}\n            subtitle_lang={this.state.subtitle_lang}\n            onTimeUpdate={this.onTimeUpdate}\n            startTime={this.state.startTime}\n            session={this.session}\n        />;\n    }\n}\nexport default PlayEpisode;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport $ from 'jquery';\nimport 'select2';\nimport 'select2/dist/css/select2.css';\n\nconst propTypes = {\n    options: PropTypes.arrayOf(PropTypes.string),\n}\n\nconst defaultProps = {\n    options: [],\n}\n\nclass EditAlternativeTitles extends React.Component {\n\n    componentDidMount() {\n        $('select#alternative-titles').select2({\n            tags: true,\n        });\n    }\n\n    render() {\n        return (\n            <span style={{color:'#000000'}}>\n                <select \n                    name=\"alternative_titles\"\n                    id=\"alternative-titles\"\n                    className=\"form-control\"\n                    defaultValue={this.props.options}\n                    multiple\n                >\n                    {this.props.options.map((title) => (\n                        <option key={title} value={title}>{title}</option>\n                    ))}\n                </select>\n            </span>\n        );\n    }\n}\nEditAlternativeTitles.propTypes = propTypes;\nEditAlternativeTitles.defaultProps = defaultProps;\n\nexport default EditAlternativeTitles;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EditFields from 'components/shows/EditFields';\nimport Serialize from 'form-serialize';\nimport {unflatten} from 'flat';\nimport {request} from 'api';\n\nconst propTypes = {\n    show: PropTypes.object,\n}\n\nclass Edit extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onSubmit = this.submit.bind(this);\n        this.state = {\n            error: null,\n            success: null,\n            loading: false,\n        }\n    }\n\n    submit(e) {\n        e.preventDefault();\n        this.setState({\n            success: null,\n            error: null,\n            loading: true,\n        })\n        let data = unflatten(\n            Serialize(e.target, {hash: true})\n        );\n        request(`/1/shows/${this.props.show.id}`, {\n            data: data,\n            method: 'PUT',\n        }).done(show => {\n            this.setState({success: show});\n            request(`/1/shows/${this.props.show.id}/update`, {\n                method: 'POST',\n            });\n        }).fail(e => {\n            this.setState({error: e.responseJSON});\n        }).always(() => {\n            this.setState({loading: false});\n        });\n    }\n\n    renderError() {\n        if (!this.state.error) return '';\n        return (\n            <div className=\"alert alert-danger\">\n                {this.state.error.message}\n            </div>\n        )\n    }\n\n    renderSuccess() {\n        if (!this.state.success) return '';\n        return (\n            <div className=\"alert alert-success\">\n                The show was successfully updated.\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <form method=\"post\" onSubmit={this.onSubmit}>\n                <EditFields show={this.props.show} />\n                {this.renderError()}\n                {this.renderSuccess()}\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary\"\n                    disabled={this.state.loading}\n                >\n                    {this.state.loading?'Saving...':'Save'}\n                </button>\n            </form>\n        )\n    }\n}\nEdit.propTypes = propTypes;\n\nexport default Edit;","import React from 'react';\n\n\nclass Info extends React.Component {\n    \n    statusToText(status) {\n        switch (status) {\n            case 1: return 'Running';\n            case 2: return 'Ended';\n            default: return 'Unknown';\n        }\n    }\n\n    renderGeneral() {\n        let show = this.props.show;\n        return (\n            <div className=\"col-12\">\n                <table className=\"table table-sm borderless\">\n                    <tbody>\n                    <tr><th>Status</th><td>{this.statusToText(show.status)}</td></tr>\n                    <tr><th width=\"100\">Premiered</th><td>{show.premiered || 'unknown'}</td></tr>\n                    <tr><th>Runtime</th><td>{show.runtime?show.runtime + ' minutes':'Unknown'}</td></tr>\n                    <tr><th>Genres</th><td>{show.genres.join(', ')}</td></tr>\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n\n    renderDescription() {\n        let desc = this.props.show.description;\n        return (\n            <div className=\"col-12 col-md-12\">\n                <p className=\"text-justify\">\n                    {desc.text}\n                    <br />\n                    <font className=\"text-muted\">Source:</font> \n                    &nbsp;<a href={desc.url} target=\"_blank\">{desc.title}</a>\n                </p>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                {this.renderGeneral()}\n                \n                {this.renderDescription()}\n            </div>\n        )\n    }\n}\n\nexport default Info;","import React from 'react';\nimport {request} from 'api';\nimport {isAuthed} from 'utils';\n\nclass Stats extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            userStats: null,\n        }\n    }\n\n    componentDidMount() {\n        if (isAuthed()) \n            this.getUserStats();\n    }\n\n    getUserStats() {\n        request(`/1/shows/${this.props.show.id}/user-stats`).done((stats) => {\n            this.setState({\n                userStats: stats,\n            });\n        });\n    }\n\n    countEpisodes() {\n        if (!this.props.show.seasons)\n            return 0;\n        let totalEpisodes = 0;\n        for (let season of this.props.show.seasons) {\n            totalEpisodes += season.total;\n        }\n        return totalEpisodes;\n    }\n\n    renderUserStats() {\n        if (!this.state.userStats)\n            return null;\n        return (\n            <span>\n                <h2 className=\"mb-1 mt-3\">Your stats</h2>\n                <table className=\"table table-striped\">\n                    <tbody>\n                    <tr><th width=\"200px\">Episodes watched</th><td>{this.state.userStats.episodes_watched}</td></tr>\n                    <tr><th>Time spent watching</th>\n                        <td>{Math.round(((this.state.userStats.episodes_watched_minutes/60)*10))/10} hours</td></tr>\n                    </tbody>\n                </table>\n            </span>\n        )\n    }\n\n    render() {\n        let episodeCount = this.countEpisodes();\n        return (\n            <span>\n                {this.renderUserStats()}\n                \n                <h2 className=\"header\">Show stats</h2>\n                <table className=\"table table-striped\">\n                    <tbody>\n                    <tr><th width=\"200px\">Total episodes</th><td>{episodeCount}</td></tr>\n                    <tr><th>Hours worth of content</th>\n                        <td>{Math.round(((this.props.show.runtime*episodeCount/60)*10))/10} hours</td></tr>\n                    </tbody>\n                </table>\n            </span>\n        )\n    }\n\n}\n\nexport default Stats;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n    seasons: PropTypes.array.isRequired,\n    selectedSeason: PropTypes.number,\n    onChange: PropTypes.func,\n}\n\nclass SelectSeason extends React.Component {\n\n    render() {\n        return (\n            <select \n                className=\"form-control\" \n                value={this.props.selectedSeason}\n                onChange={this.props.onChange}\n            >\n                {this.props.seasons.map((item, key) => (\n                    <option \n                        key={item.season}\n                        value={item.season}\n                    >\n                        Season {item.season}\n                    </option>\n                ))}\n            </select>\n        )\n    }\n\n}\nSelectSeason.propTypes = propTypes;\n\nexport default SelectSeason;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n    seasons: PropTypes.array.isRequired,\n    selectedNumber: PropTypes.number,\n    onChange: PropTypes.func,\n    name: PropTypes.string,\n}\n\nclass SelectSeasonEpisode extends React.Component {\n\n    renderSeason(item) {\n        let rows = [];\n        for (let i = item.from; i <= item.to; i++) {\n            rows.push(\n                <option \n                    key={i} \n                    value={i}\n                >\n                    S{item.season}: Episode {i-item.from+1}\n                </option>\n            )\n        }\n        return (\n            <optgroup key={item.season} label={`Season ${item.season}`}>\n                {rows}\n            </optgroup>\n        )\n    }\n\n    render() {\n        return (\n            <select \n                name={this.props.name}\n                className=\"form-control\"\n                onChange={this.props.onChange}\n                value={this.props.selectedNumber}\n            >\n                {this.props.seasons.map((item, index) => (\n                    this.renderSeason(item)\n                ))}\n            </select>\n        )\n    }\n}\nSelectSeasonEpisode.propTypes = propTypes;\n\nexport default SelectSeasonEpisode;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SelectSeasonEpisode from './SelectSeasonEpisode';\nimport {request} from 'api';\nimport {getUserId} from 'utils';\n\nimport 'popper.js';\nimport 'bootstrap/js/src/dropdown';\nimport './WatchedProgression.scss';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n    seasons: PropTypes.array.isRequired,\n}\n\nclass WatchedProgression extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            showForm: false,\n            fromNumber: 1,\n            toNumber: 1,\n            saving: false,\n        }\n        this.dropdownButtonClick = this.dropdownButtonClick.bind(this);\n        this.selectChange = this.selectChange.bind(this);\n        this.formSubmit = this.formSubmit.bind(this);\n    }\n\n    selectChange(e) {\n        this.state[e.target.name] = parseInt(e.target.value);\n        if (this.state.fromNumber > this.state.toNumber)\n            this.state.toNumber = this.state.fromNumber;\n        this.setState(this.state);\n    }\n\n    dropdownButtonClick(e) {\n        this.getNextToWatch();\n    }\n\n    getNextToWatch() {\n        request(\n            `/1/shows/${this.props.showId}/episodes/to-watch`\n        ).done(episode => {\n            if (this.state.showForm === false)\n                // Render the form and it's options before \n                // setting the selected value. Otherwise it will not work.\n                this.setState({showForm:true});\n            this.setState({\n                fromNumber: episode.number,\n                toNumber: episode.number,\n            });\n        }).fail(error => {\n            if (error.responseJSON.code === 1301) {\n                this.setState({showForm:true});\n            }\n        });\n    }\n\n    formSubmit(e) {\n        e.preventDefault();\n        this.setState({'saving': true})\n        let id = this.props.showId;\n        let fromN = this.state.fromNumber;\n        let toN = this.state.toNumber;\n        request(\n            `/1/shows/${id}/episodes/${fromN}-${toN}/watched`,\n            {method: 'PUT'}\n        ).fail(() => {\n            this.setState({'saving': false});\n        }).done(() => {\n            location.reload();\n        });\n    }\n\n    renderForm() {\n        return (\n            <form onSubmit={this.formSubmit}>\n                <div className=\"form-group\">                    \n                    <label>From episode</label>\n                    <SelectSeasonEpisode\n                        seasons={this.props.seasons}\n                        name=\"fromNumber\"\n                        onChange={this.selectChange}\n                        selectedNumber={this.state.fromNumber}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>To episode</label>\n                    <SelectSeasonEpisode\n                        seasons={this.props.seasons}\n                        name=\"toNumber\"\n                        onChange={this.selectChange}\n                        selectedNumber={this.state.toNumber}\n                    />\n                </div>\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary\"\n                    disabled={this.state.saving}\n                >\n                    {this.state.saving?'Please wait...':'Watched'}\n                </button>\n            </form>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"dropdown watched-progression\">\n                <button \n                    className=\"btn btn-dark btn-transparent dropdown-toggle\" \n                    data-toggle=\"dropdown\"\n                    onClick={this.dropdownButtonClick}\n                >\n                    Set progression\n                </button>\n                <div className=\"dropdown-menu dropdown-menu-right\">                    \n                    {this.state.showForm?this.renderForm():''}\n                </div>\n            </div>\n        )\n    }\n\n}\nWatchedProgression.propTypes = propTypes;\n\nexport default WatchedProgression;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport {request} from 'api';\nimport {isAuthed} from 'utils';\nimport $ from 'jquery';\n\nimport EpisodeListItem from './EpisodeListItem';\nimport WatchedProgression from './WatchedProgression';\nimport SelectSeason from './SelectSeason';\n\nconst propTypes = {\n    'showId': PropTypes.number.isRequired,\n    'seasons': PropTypes.array.isRequired,\n    'seasonNumber': PropTypes.number.isRequired,\n    onSeasonChange: PropTypes.func,\n}\n\nclass SeasonList extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            episodes: [],\n            seasonNumber: this.props.seasonNumber,\n        }\n        this.onSeasonChange = this.onSeasonChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.getEpisodes();        \n    }\n\n    getEpisodes() {\n        if (this.props.seasons.length < 1) \n            return;\n        var position = $(window).scrollTop();\n        this.setState({episodes: []});\n        let season = this.seasonEpisodeNumbers(this.state.seasonNumber);\n        let query = {}\n        query.q = `number:[${season.from} TO ${season.to}]`;\n        query.per_page = season.total;\n        if (isAuthed()) {\n            query.append = 'user_watched';\n        }\n        request(`/1/shows/${this.props.showId}/episodes`, {\n            query: query,\n        }).done((episodes) => {\n            this.setState({episodes: episodes}, () => {\n                $(window).scrollTop(position);\n            });            \n        });\n    }\n\n    seasonEpisodeNumbers(seasonNumber) {\n        for (var s of this.props.seasons) {\n            if (s.season == seasonNumber) {\n                return s;\n            }\n        }\n        return null;\n    }\n\n    onSeasonChange(e) {\n        var seasonNum = parseInt(e.target.value);\n        this.setState(\n            {seasonNumber: seasonNum}, \n            ()=> {\n                if (this.props.onSeasonChange) {\n                    this.props.onSeasonChange(seasonNum);\n                }\n                else {\n                    this.getEpisodes();\n                }\n            }\n        );\n    }\n\n    render() {\n        if (this.props.seasons.length < 1) \n            return (\n                <div className=\"alert alert-warning\">\n                    <strong>This show has 0 episodes.</strong>  \n                </div>\n            );\n        return (\n            <span>\n            <div className=\"row\">\n                <div className=\"col-12 col-sm-auto ml-auto order-md-12 mb-2 mb-md-0\">\n                    <div className=\"float-right\">\n                        <WatchedProgression \n                            showId={this.props.showId}\n                            seasons={this.props.seasons}\n                        />\n                    </div>\n                </div>\n                <div className=\"col-12 col-md-4\">\n                    <SelectSeason                    \n                        seasons={this.props.seasons}\n                        selectedSeason={this.state.seasonNumber}\n                        onChange={this.onSeasonChange}\n                    />\n                </div>\n            </div>\n            <div className=\"row show-season-list\">\n                <div className=\"col-12 d-md-none col-margin\" />\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        {this.state.episodes.map((item, index) => (\n                            <div                            \n                                key={item.number} \n                                className=\"col-12 col-md-6 col-lg-4\"\n                            >\n                                <div className=\"d-none d-md-block col-margin\" />\n                                <EpisodeListItem \n                                    showId={this.props.showId}\n                                    episode={item} \n                                />\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            </span>\n        );\n    }\n}\n\nSeasonList.propTypes = propTypes;\n\nexport default SeasonList;","import React from 'react';\nimport {browserHistory} from 'react-router';\nimport SeasonList from 'components/shows/episodes/SeasonList';\n\nclass Seasons extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onSeasonChange = this.seasonChange.bind(this);\n        let season = parseInt(this.props.location.query.season) || null;\n        if (!season) {\n            if (this.props.show.seasons.length > 0)\n                season = this.props.show.seasons.slice(-1)[0].season;\n        }\n        this.state = {\n            season: season,\n        }\n    }\n\n    seasonChange(season) {\n        this.setState({\n            season: season,\n        });\n        browserHistory.push({\n            pathname: this.props.location.pathname,\n            query: { \n                season: season,\n            },\n        });\n    }\n\n    render() {\n        return (\n            <SeasonList\n                key={this.state.season}\n                showId={this.props.show.id}\n                seasons={this.props.show.seasons}\n                seasonNumber={this.state.season}\n                onSeasonChange={this.onSeasonChange}\n            />\n        );\n    }\n}\n\nexport default Seasons;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {request} from 'api'\nimport {isAuthed} from 'utils';\nimport EpisodeListItem from './EpisodeListItem';\nimport {EVENT_EPISODE_WATCHED_STATUS} from 'seplis/events';\n\nconst propTypes = {\n    'showId': PropTypes.number.isRequired,\n}\n\nclass EpisodeLastWatched extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            episode: null,\n        }\n        this.eventGet = this.get.bind(this);\n        document.addEventListener(EVENT_EPISODE_WATCHED_STATUS, this.eventGet);\n        document.addEventListener('visibilitychange', this.eventGet);\n    }\n\n    componentDidMount() {\n        this.get();        \n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(EVENT_EPISODE_WATCHED_STATUS, this.eventGet);\n        document.removeEventListener('visibilitychange', this.eventGet);\n    }\n\n    get(event={}) {\n        if (document.hidden) return;\n        if (!isAuthed())\n            return;\n        request(\n            `/1/shows/${this.props.showId}/episodes/last-watched`\n        ).done(episode => {\n            this.setState({episode: episode});\n        })\n    }\n\n    render() {\n        if (!this.state.episode)\n            return <p className=\"text-muted\">No episodes has been watched</p>;\n        \n        return (\n            <EpisodeListItem \n                key={this.state.episode.number}\n                showId={this.props.showId}\n                episode={this.state.episode}\n                displaySeason={true}\n            />\n        );\n    }\n\n}\nEpisodeLastWatched.propTypes = propTypes;\n\nexport default EpisodeLastWatched;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Fecha from 'fecha';\nimport {request} from 'api';\nimport {dateInDays} from 'utils';\n\nimport './LatestEpisodesSideBar.scss';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n    numberOfEpisodes: PropTypes.number,\n}\n\nconst defaultProps = {\n    numberOfEpisodes: 3,\n}\n\nclass LatestEpisodesSideBar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            episodes: [],\n        }\n        this.getEpisodes();\n    }\n\n    renderEpisodeNumber(episode) {\n        if (episode.episode) {\n            return (\n                <span>\n                    S{episode.season} · E{episode.episode}\n                    &nbsp;\n                    ({episode.number})\n                </span>\n            )\n        } else {\n            return (\n                <span>Episode {episode.number}</span>\n            )   \n        }\n    }\n\n    getEpisodes() {\n        let dateUTC = Fecha.format(new Date().getTime(), 'YYYY-MM-DD');\n        request(`/1/shows/${this.props.showId}/episodes`, {\n            query: {\n                q: `air_date:[${dateUTC} TO *]`,\n                per_page: this.props.numberOfEpisodes,\n                sort: 'number:asc',\n            }\n        }).done((episodes) => {\n            this.setState({episodes:episodes});\n        });\n    }\n\n    renderCountdown(episode) {\n        if (!episode.air_datetime)\n            return '';\n        let dt = new Date(episode.air_datetime);\n        let m = dt-new Date().getTime();\n        if (m > 0) {\n            return ' · In '+dateInDays(episode.air_datetime);\n        } else {\n            return ' · '+dateInDays(episode.air_datetime)+' ago';     \n        }\n    }\n\n    render() {\n        if (this.state.episodes.length == 0) {\n            return (\n                <p className=\"text-muted\">No ETA for new episodes.</p>\n            )\n        }\n        return (\n            <div className=\"latest-episodes-side-bar\">\n                {this.state.episodes.map((item, i) => (\n                    <div key={item.number} className=\"item\">\n                        <p>{item.title}</p>\n                        <p>{this.renderEpisodeNumber(item)}</p>\n                        <p>{item.air_date} {this.renderCountdown(item)}</p>\n                    </div>\n                ))}\n            </div>\n        )\n    }\n}\nLatestEpisodesSideBar.propTypes = propTypes;\nLatestEpisodesSideBar.defaultProps = defaultProps;\n\nexport default LatestEpisodesSideBar;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames'; \nimport {getUserId} from 'utils';\nimport {request} from 'api';\nimport {trigger_episode_watched_status} from 'seplis/events';\n\nimport 'bootstrap/js/src/dropdown';\nimport './WatchedButton.scss';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n    episodeNumber: PropTypes.number.isRequired,\n    watched: PropTypes.object,\n}\n\nclass WatchedButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.setWatchedState();\n        this.onWatchedIncr = this.onWatchedIncr.bind(this);\n        this.onWatchedDecr = this.onWatchedDecr.bind(this);\n        this.onWatchedClick = this.onWatchedClick.bind(this);\n    }\n\n    setWatchedState() {\n        if (this.props.watched) {\n            this.state = this.props.watched;\n        } else {            \n            this.state = {\n                times: 0,\n                position: 0,\n            }\n        }\n    }\n\n    watchedApiEndpoint() {\n        let id = this.props.showId;\n        let n = this.props.episodeNumber;\n        return `/1/shows/${id}/episodes/${n}/watched`;\n    }\n    onWatchedIncr(e) {\n        this.setState({times: ++this.state.times});\n        request(this.watchedApiEndpoint(), {\n            method: 'PUT', \n        }).done((data) => {\n            trigger_episode_watched_status(\n                'incr', \n                this.props.showId, \n                this.props.episodeNumber\n            );\n            this.setState(data);\n        }).fail(() => {            \n            this.setState({times: --this.state.times});\n        });\n    }    \n    onWatchedDecr(e) {\n        if (this.state.position > 0) {\n            request(this.watchedApiEndpoint()\n                .replace('watched', 'position'), {\n                method: 'DELETE', \n            }).done((data) => {\n                trigger_episode_watched_status(\n                    'decr', \n                    this.props.showId, \n                    this.props.episodeNumber\n                );\n                this.setState({position: 0});\n            });\n        } else if (this.state.times > 0) { \n            this.setState({times: --this.state.times});\n            request(this.watchedApiEndpoint(), {\n                data: {times: -1},\n                method: 'PUT', \n            }).done((data) => {\n                trigger_episode_watched_status(\n                    'decr', \n                    this.props.showId, \n                    this.props.episodeNumber\n                );\n                if (data) {\n                    this.setState(data);\n                } else {\n                    this.setState({\n                        times: 0,\n                        position: 0,\n                    });\n                }\n            }).fail(() => {            \n                this.setState({times: ++this.state.times});\n            });\n        }\n    }\n    onWatchedClick(e) {\n        if ((this.state.times > 0) || (this.state.position > 0))\n            return;\n        this.onWatchedIncr(e);\n    }\n\n    renderDropdown() {\n        return (\n            <ul \n                className=\"dropdown-menu dropdown-menu-right\" \n                role=\"menu\"\n            >\n                <li onClick={this.onWatchedIncr}>\n                    <i className=\"fa fa-plus\"></i>\n                </li>\n                <li onClick={this.onWatchedDecr}>\n                    <i className=\"fa fa-minus\"></i>\n                </li>\n            </ul>\n        )\n    }\n\n    render() {\n        let dropdown = (this.state.times>0) || (this.state.position>0);\n        let btnClass = ClassNames({\n            btn: true,\n            'btn-watched': true,\n            watched: this.state.times>0,\n            watching: this.state.position>0,\n            'watching-watched': this.state.position>0 && this.state.times>0,\n        });\n        return (\n            <div className=\"btn-group btn-episode-watched-group dropdown\">\n                {this.renderDropdown()}\n                <button \n                    className={btnClass}\n                    data-toggle={dropdown?'dropdown':'none'}\n                    onClick={this.onWatchedClick}\n                >\n                    Watched\n                </button>\n                <button className=\"btn btn-times\">\n                    {this.state.times} \n                </button>\n            </div>\n        );\n    }\n}\n\nWatchedButton.propTypes = propTypes;\n\nexport default WatchedButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {request} from 'api';\nimport {isAuthed} from 'utils';\nimport EpisodeListItem from './EpisodeListItem';\nimport {EVENT_EPISODE_WATCHED_STATUS} from 'seplis/events';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n}\n\nclass NextToWatch extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            episode: null,\n        }\n        this.eventGet = this.get.bind(this);\n        document.addEventListener(EVENT_EPISODE_WATCHED_STATUS, this.eventGet);\n        document.addEventListener('visibilitychange', this.eventGet);\n    }\n    \n    componentDidMount() {\n        this.get();        \n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(EVENT_EPISODE_WATCHED_STATUS, this.eventGet);\n        document.removeEventListener('visibilitychange', this.eventGet);\n    }\n\n    get(event={}) {\n        if (document.hidden) return;\n        if (!isAuthed()) {\n            request(\n                `/1/shows/${this.props.showId}/episodes/1`\n            ).done(episode => {\n                this.setState({episode: episode});\n            });\n            return;\n        }\n\n        request(\n            `/1/shows/${this.props.showId}/episodes/to-watch`\n        ).done(episode => {\n            this.setState({episode: episode});\n        });\n    }\n\n    render() {\n        if (this.state.episode == null) {\n            return <p className=\"text-muted\">No episodes to watch</p>;\n        }\n        return (\n            <EpisodeListItem \n                key={this.state.episode.number}\n                showId={this.props.showId}\n                episode={this.state.episode}\n                displaySeason={true}\n            />\n        )\n    }\n}\nNextToWatch.propTypes = propTypes;\n\nexport default NextToWatch;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NextToWatch from 'components/shows/episodes/NextToWatch';\nimport LatestEpisodesSideBar from 'components/shows/episodes/LatestEpisodesSideBar';\nimport EpisodeLastWatched from 'components/shows/episodes/EpisodeLastWatched'\n\nconst propTypes = {\n    show: PropTypes.object.isRequired,\n}\n\nclass Main extends React.Component {\n\n    constructor(props) {\n        super(props);\n    } \n\n    renderAirDates() {\n        if (this.props.show.status > 1) {\n            return;\n        }\n        return (\n            <div className=\"col-12 col-lg-4 col-margin\">\n                <h4 className=\"header\">\n                    Next to air\n                </h4>\n                <LatestEpisodesSideBar\n                    showId={parseInt(this.props.show.id)}\n                />\n            </div>\n        );\n    }\n\n    renderNextToWatch() {\n        return (\n            <div className=\"col-12 col-lg-8 col-margin\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-margin\">\n                    <h4 className=\"header\">\n                        To watch\n                    </h4>\n                    <NextToWatch\n                        showId={parseInt(this.props.show.id)}\n                        numberOfEpisodes={2}\n                    />                \n                    </div>\n                    <div className=\"col-12\">\n                    <h4 className=\"header\">\n                        Previous watched\n                    </h4>\n                    <EpisodeLastWatched showId={parseInt(this.props.show.id)} />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                {this.renderNextToWatch()}\n                {this.renderAirDates()}\n            </div>\n        )\n    }\n}\n\nexport default Main;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router';\n\nimport './ShowNav.scss';\n\nlet propTypes = {\n    showId: PropTypes.number.isRequired,\n}\n\nclass ShowNav extends React.Component {\n\n    render() {\n        return (\n            <ul className=\"nav nav-tabs col-margin nav-seplis\">\n                <li className=\"nav-item\">\n                    <Link \n                        className=\"nav-link\"                        \n                        to={`/show/${this.props.showId}/main`}\n                        activeClassName=\"active\"\n                    >\n                        Main\n                    </Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link \n                        className=\"nav-link\" \n                        to={`/show/${this.props.showId}/info`}\n                        activeClassName=\"active\"\n                    >\n                        Info\n                    </Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link \n                        className=\"nav-link\" \n                        to={`/show/${this.props.showId}/seasons`}\n                        activeClassName=\"active\"\n                    >\n                        Seasons\n                    </Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link \n                        className=\"nav-link\" \n                        to={`/show/${this.props.showId}/stats`}\n                        activeClassName=\"active\"\n                    >\n                        Stats\n                    </Link>\n                </li>\n                <li className=\"nav-item ml-auto\">\n                    <Link \n                        className=\"nav-link\" \n                        to={`/show/${this.props.showId}/edit`}\n                        activeClassName=\"active\"\n                    >\n                        <i className=\"fa fa-cog\"></i>\n                    </Link>\n                </li>\n            </ul>\n        );\n    }\n}\nShowNav.propTypes = propTypes;\n\nexport default ShowNav;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\nimport {isAuthed,getUserId} from 'utils';\nimport {request} from 'api';\n\nimport './FanButton.scss';\n\nconst propTypes = {\n    showId: PropTypes.number.isRequired,\n    isFan: PropTypes.bool,\n}\n\nclass FanButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isFan: props.isFan,\n        }\n        this.onClick = this.onClick.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.isFan == undefined)\n            this.getIsFan();\n    }\n\n    onClick(e) {\n        e.preventDefault();\n        this.setState({isFan: !this.state.isFan});\n        request(`/1/users/${getUserId()}/fan-of/${this.props.showId}`, {\n            method: this.state.isFan?'DELETE':'PUT',\n        }).fail(() => {            \n            this.setState({isFan: !this.state.isFan});\n        })\n    }\n\n    getIsFan() {\n        if (!isAuthed()) \n            return;\n        request(\n            `/1/users/${getUserId()}/fan-of/${parseInt(this.props.showId)}`\n        ).done(is_fan => {\n            this.setState({isFan: is_fan.is_fan});\n        });\n    }\n\n    render() {\n        let btnClass = ClassNames({\n            btn: true,\n            'btn-fan': true,\n            'btn-fan__is-fan': this.state.isFan, \n        });\n        return (\n            <button \n                className={btnClass}\n                onClick={this.onClick}\n                title={this.state.isFan?'Unfan':'Become a Fan'}\n                aria-label={this.state.isFan?'Unfan':'Become a Fan'}                \n            >\n                {this.state.isFan?\n                    <span className=\"fa fa-star\"></span>\n                    :\n                    <span className=\"fa fa-star-o\"></span>\n                }\n            </button>\n        );\n    }\n}\nFanButton.propTypes = propTypes;\n\nexport default FanButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {request} from 'api';\nimport {isAuthed, getUserId} from 'utils';\n\nimport Loader from 'components/Loader';\nimport FanButton from 'components/shows/FanButton';\nimport ShowNav from 'components/shows/ShowNav';\n\nimport './Show.scss';\n\nconst propTypes = {\n    params: PropTypes.object.isRequired,\n}\n\nclass Show extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: document.seplis_tv_show,\n        };\n    }\n\n    renderShow() {\n        let show = this.state.show;\n        return (\n            <div>\n                <div className=\"row\">\n                    <div className=\"col-12 show-header\">\n                        <div className=\"btn-fan__pull-left\">\n                            <FanButton showId={show.id} />\n                        </div>\n                        <div className=\"title\">\n                            {show.title}\n                            &nbsp;\n                            <small className=\"text-muted\">{show.premiered!=null?show.premiered.substring(0,4):''}</small>\n                        </div>\n                    </div> \n\n                    <div className=\"col-4 col-sm-4 col-md-4 col-margin d-none d-sm-block\">\n                        <img \n                            src={show.poster_image!=null?show.poster_image.url + '@SX360':''} \n                            width=\"100%\" \n                        />\n                    </div>\n                    <div className=\"col-4 d-sm-none\" />\n\n                    <div className=\"col-12 col-sm-8\">\n                        <ShowNav showId={parseInt(this.state.show.id)} />\n                        {React.cloneElement(this.props.children, {show: show})}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    renderShowImporting() {\n        setTimeout(() => {\n            location.reload();\n        }, 5000);\n        return (\n            <center>\n                <h1>The show is currently in the import queue</h1>\n                <h2>Check back later!</h2>\n                <a \n                    className=\"btn btn-warning\" \n                    href={`/show/${this.state.show.id}/edit`}\n                >\n                    Edit show\n                </a>\n                <Loader />\n            </center>\n        )\n    }\n\n    render() {\n        if (!this.state.show) {\n            return (\n                <Loader />\n            )\n        } \n        else if (\n            (this.state.show.status == 0)\n            && !(this.props.location.pathname.endsWith('/edit'))\n            && (this.state.show.importers.info != null)) {\n            return this.renderShowImporting();\n        }\n        else {\n            return this.renderShow();\n        }\n    }\n}\nShow.propTypes = propTypes;\n\nexport default Show;","import React from 'react';\nimport {Router, Route, browserHistory, IndexRedirect} from 'react-router';\n\nimport Show from './views/show/Show';\nimport ShowMain from './views/show/Main';\nimport ShowSeasons from './views/show/Seasons';\nimport ShowStats from './views/show/Stats';\nimport ShowInfo from './views/show/Info';\nimport ShowEdit from './views/show/Edit';\nimport PlayEpisode from './views/show/PlayEpisode';\n\nimport ShowNew from './views/show/New';\n\nimport SignIn from './views/SignIn';\nimport SignOut from './views/SignOut';\nimport CreateUser from './views/CreateUser';\n\nimport FanOf from './views/FanOf';\nimport RecentlyAired from './views/RecentlyAired';\nimport ShowsWatched from './views/ShowsWatched';\nimport Countdown from './views/Countdown';\nimport EpisodesToWatch from './views/EpisodesToWatch';\nimport Main from './views/Main';\nimport AirDates from './views/AirDates';\nimport Account from './views/Account';\nimport Password from './views/Password';\nimport PlayServers from './views/PlayServers';\nimport PlayServer from './views/PlayServer';\nimport UserShowsStats from './views/UserShowsStats';\n\nexport default (\n    <Router history={browserHistory}>\n        <Route path=\"/sign-in\" component={SignIn} />\n        <Route path=\"/sign-out\" component={SignOut} />\n        <Route path=\"/create-user\" component={CreateUser} />\n        <Route path=\"/show/:showId\" component={Show}>\n            <IndexRedirect to=\"/show/:showId/main\" />\n            <Route path=\"main\" component={ShowMain} />\n            <Route path=\"info\" component={ShowInfo} />\n            <Route path=\"seasons\" component={ShowSeasons} />\n            <Route path=\"stats\" component={ShowStats} />\n            <Route path=\"edit\" component={ShowEdit} />\n        </Route>\n        <Route path=\"/show/:showId/episode/:number/play\" component={PlayEpisode} />\n        <Route path=\"/show-new\" component={ShowNew} />\n        <Route path=\"/fan-of\" component={FanOf} />\n        <Route path=\"/recently-aired\" component={RecentlyAired} />\n        <Route path=\"/shows-watched\" component={ShowsWatched} />\n        <Route path=\"/countdown\" component={Countdown} />\n        <Route path=\"/episodes-to-watch\" component={EpisodesToWatch} />\n        <Route path=\"/main\" component={Main} />\n        <Route path=\"/air-dates\" component={AirDates} />\n        <Route path=\"/account\" component={Account} />\n        <Route path=\"/password\" component={Password} />\n        <Route path=\"/play-servers\" component={PlayServers} />\n        <Route path=\"/play-server\" component={PlayServer} />\n        <Route path=\"/user-shows-stats\" component={UserShowsStats} />\n      </Router>\n);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\n\nimport './VolumeBar.scss';\n\nconst propTypes = {\n    onChange: PropTypes.func,\n}\n\nclass VolumeBar extends React.Component {\n\n    constructor(props) {\n        super(props);        \n        this.onSliderMouseMove = this.sliderMouseMove.bind(this);\n        this.onSliderClick = this.sliderClick.bind(this);\n        this.onIconClick = this.iconClick.bind(this);\n\n        this.state = {\n            percent: (localStorage.getItem('volume') || 1)*100,\n            show: false,\n            muted: false,\n        }\n        this.onDocumentClick = this.documentClick.bind(this);\n    }\n\n    componentDidMount() {\n        let volume = localStorage.getItem('volume') || 1;\n        if (this.props.onChange)\n            this.props.onChange(volume);\n        document.addEventListener('click', this.onDocumentClick);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.onDocumentClick);\n    }\n    \n    documentClick(e) {\n        if (!this.icon.contains(e.target)) {\n            this.setState({show: false});\n        }\n    }\n\n    sliderMouseMove(event) {\n        if (event.buttons != 1) return;\n        this.onSliderClick(event);\n    }\n\n    sliderClick(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        let scrubber = event.target.querySelector('.scrubber');\n        let y = event.clientY;\n        y -= event.target.offsetTop + scrubber.offsetTop;\n        y = scrubber.offsetHeight - y;\n        if (y > scrubber.offsetHeight)\n            y = scrubber.offsetHeight;\n        if (y < 0)\n            y = 0;\n        let norm = 1 / scrubber.offsetHeight;\n        let volume = norm*y;\n        if (volume < 0)\n            volume = 0;\n        this.setState({percent: volume*100});\n        if (this.props.onChange)\n            this.props.onChange(volume);\n        localStorage.setItem('volume', volume);\n    }\n\n    iconClick(event) {\n        this.setState({show: !this.state.show});\n    }\n\n    renderBar() {\n        if (!this.state.show) return;\n        return (\n            <div \n                className=\"volume-slider\"\n                onMouseMove={this.onSliderMouseMove}\n                onClick={this.onSliderClick}\n            >\n                <div className=\"scrubber\">\n                    <div \n                        className=\"scrubber-percentage\" \n                        style={{height: this.state.percent+'%'}}\n                    />\n                    <div \n                        className=\"scrubber-head\"\n                        style={{bottom: this.state.percent+'%'}}\n                    />\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        let volume = ClassNames({\n            fa: true,\n            'fa-volume-up': (this.state.percent >= 50) && !this.state.muted,\n            'fa-volume-down': (this.state.percent < 50) && \n                (this.state.percent >= 1) && !this.state.muted,\n            'fa-volume-off': (this.state.percent < 1) || this.state.muted,\n        });\n        return (\n            <span \n                className={volume} \n                onClick={this.onIconClick}\n                ref={(ref) => this.icon = ref}\n            >\n                {this.renderBar()}\n            </span>\n        )\n    }\n\n}\nVolumeBar.propTypes = propTypes;\n\nexport default VolumeBar;","import './styles/Base.scss';\nimport './styles/FormBase.scss';\n\nimport {apiClientSettings} from './api.jsx';\nimport Chromecast from 'components/player/Chromecast';\n\nexport default{\n    React: require('react'),\n    ReactDOM: require('react-dom'),\n    $: require('jquery'),\n    seplis: {\n        Routes: require('./Routes.jsx'),\n        apiClientSettings: apiClientSettings,\n        Navbar: require('./components/Navbar.jsx'),\n        Chromecast: Chromecast,\n    }\n};"],"sourceRoot":""}